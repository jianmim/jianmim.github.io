import{b as l,d as o,O as a,as as e,at as n,x as i,c as u,V as r,W as d,Y as t,Z as s,r as v,H as g,M as c,y as b,N as C,a as p,o as f,e as m,f as h,g as y,K as S,u as w,h as x,i as z,a2 as I,F as k,a1 as _,au as j,av as B,C as M,p as G,k as N,_ as $}from"./index-80b03063.js";import{T}from"./badge.9856adf0.js";import{i as F,a as O}from"./index.b621671f.js";import{u as P}from"./index.38361e72.js";const W=Symbol("avatarGroupContextKey"),K=l({url:String,icon:String,iconConfig:{type:o(Object),default:()=>({})},type:{type:String,values:a,default:""},size:{type:[String,Number]},shape:{type:String,values:["circle","square"],default:"circle"},imgMode:{type:String,values:e,default:"aspectFill"},bgColor:String,border:n,borderColor:String,borderBold:n,shadow:n,shadowColor:String,badge:{type:[String,Number]},badgeConfig:{type:o(Object),default:()=>({})}}),L=l=>{const o=i(W,void 0);return{type:u((()=>F(null==l?void 0:l.type,null==o?void 0:o.type,""))),size:u((()=>F(null==l?void 0:l.size,null==o?void 0:o.size,""))),shape:u((()=>F(null==l?void 0:l.shape,null==o?void 0:o.shape,"circle"))),imgMode:u((()=>F(null==l?void 0:l.imgMode,null==o?void 0:o.imgMode,"aspectFill"))),bgColor:u((()=>F(null==l?void 0:l.bgColor,null==o?void 0:o.bgColor,"tn-gray-light"))),border:u((()=>F(null==l?void 0:l.border,null==o?void 0:o.border,!1))),borderColor:u((()=>F(null==l?void 0:l.borderColor,null==o?void 0:o.borderColor,""))),borderBold:u((()=>F(null==l?void 0:l.borderBold,null==o?void 0:o.borderBold,!1))),shadow:u((()=>F(null==l?void 0:l.shadow,null==o?void 0:o.shadow,!1))),shadowColor:u((()=>F(null==l?void 0:l.shadowColor,null==o?void 0:o.shadowColor,""))),avatarGap:u((()=>{let l=Number(O(null==o?void 0:o.gap,0));return l<0&&(l=0),l>1&&(l=1),l}))}},q=$(p({__name:"avatar",props:K,emits:{click:()=>!0},setup(l,{emit:o}){const a=l,{componentId:e,avatarGroupIndex:n,avatarWidth:p,avatarClick:$}=((l,o)=>{const a=b(),{uid:e}=a,n=i(W,void 0);null==n||n.addItem({uid:e});const r=`ta-${C()}`,{getSelectorNodeInfo:d}=P(a),t=u((()=>O(null==n?void 0:n.avatarItems.length,0))),s=v(-1);g((()=>{const l=null==n?void 0:n.avatarItems.findIndex((l=>l.uid===e));s.value=O(l,-1),p.value||-1===s.value||m()}));const p=v(0);let f=0;const m=async()=>{try{const l=await d(`#${r}`);if(!l.width)throw new Error("获取头像宽度信息失败");p.value=l.width||0}catch(l){if(f>10)return void(f=0);f++,setTimeout((()=>{m()}),150)}};return c((()=>{null==n||n.removeItem(e)})),{componentId:r,groupAvatarCount:t,avatarGroupIndex:s,avatarWidth:p,avatarClick:()=>{null==n||n.handleItemClick(e),o("click")}}})(0,o),{ns:K,avatarClass:q,avatarStyle:A}=((l,o,a)=>{const e=r("avatar"),{type:n,size:i,shape:v,bgColor:g,border:c,borderColor:b,shadow:C,shadowColor:p,avatarGap:f}=L(l),[m,h]=d(g,"bg"),[y,S]=d(b,"border"),[w]=d(p,"shadow"),{sizeType:x}=t(i.value),z=u((()=>{const l=[];return l.push(e.b()),n.value&&l.push(`tn-type-${n.value}_bg`),!n.value&&m.value&&l.push(m.value),"inner"===x.value&&l.push(e.m(i.value)),v.value&&l.push(e.m(v.value)),c.value&&(l.push("tn-border"),y.value&&l.push(y.value)),C.value&&(l.push("tn-shadow"),w.value&&l.push(w.value)),l.join(" ")})),I=u((()=>{const l={};return"custom"===x.value&&(l.width=s(i.value),l.height=l.width),h.value&&(l.backgroundColor=h.value),c.value&&S.value&&(l.borderColor=S.value),-1!=o.value&&(l.zIndex=o.value+1,o.value>0?l.marginLeft=`calc(-${a.value*f.value}px)`:l.marginLeft="0px"),l}));return{ns:e,avatarClass:z,avatarStyle:I}})(a,n,p),{imgMode:E}=L(a),{iconSize:H,iconColor:V,iconBold:Y}=(l=>{const o=i(W,void 0);return{iconColor:u((()=>{var a;return(null==l?void 0:l.color)||(null==(a=null==o?void 0:o.iconConfig)?void 0:a.color)||""})),iconSize:u((()=>{var a;return(null==l?void 0:l.size)||(null==(a=null==o?void 0:o.iconConfig)?void 0:a.size)||""})),iconBold:u((()=>{var a;return(null==l?void 0:l.bold)||(null==(a=null==o?void 0:o.iconConfig)?void 0:a.bold)||!1}))}})(a.iconConfig),{badgeConfig:Z}=(l=>{const o=i(W,void 0),a=u((()=>{var a,e;return F(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.max,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.max)})),e=u((()=>{var a,e;return F(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.type,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.type,"primary")})),n=u((()=>{var a,e;return F(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.bgColor,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.bgColor)})),r=u((()=>{var a,e;return F(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.textColor,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.textColor)})),d=u((()=>{var a,e;return F(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.fontSize,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.fontSize)})),t=u((()=>{var a,e;return F(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.size,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.size)})),s=u((()=>{var a,e;return F(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.bold,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.bold,!1)})),v=u((()=>{var a,e;return F(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.dot,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.dot,!1)})),g=u((()=>{var a,e;return F(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.absolutePosition,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.absolutePosition,{})})),c=u((()=>{var a,e;return F(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.absoluteCenter,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.absoluteCenter,!0)}));return{badgeConfig:u((()=>({value:l.badge,max:a.value,type:e.value,bgColor:n.value,textColor:r.value,fontSize:d.value,size:t.value,bold:s.value,customClass:"",customStyle:{},dot:v.value,absolute:!0,absolutePosition:g.value,absoluteCenter:c.value,index:""})))}})(a);return(l,o)=>{const a=G,n=N;return f(),m(n,{id:w(e),class:S([w(q)]),style:M(w(A)),onClick:w($)},{default:h((()=>[y(" 图片头像 "),l.url?(f(),m(n,{key:0,class:S([w(K).e("image")])},{default:h((()=>[x(a,{class:"image",src:l.url,mode:w(E)},null,8,["src","mode"])])),_:1},8,["class"])):l.icon?(f(),z(k,{key:1},[y(" 图标头像 "),x(n,{class:S([w(K).e("icon")])},{default:h((()=>[x(I,{name:l.icon,color:w(V),size:w(H),bold:w(Y)},null,8,["name","color","size","bold"])])),_:1},8,["class"])],2112)):(f(),z(k,{key:2},[y(" 自定义 "),x(n,{class:S([w(K).e("custom")])},{default:h((()=>[_(l.$slots,"default",{},void 0,!0)])),_:3},8,["class"])],2112)),y(" 角标 "),x(T,j(B(w(Z))),null,16)])),_:3},8,["id","class","style","onClick"])}}}),[["__scopeId","data-v-7811aa8c"]]);export{q as T,W as a,K as b};

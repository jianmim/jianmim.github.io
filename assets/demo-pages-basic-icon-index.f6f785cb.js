import{r as e,c as a,M as t,y as s,N as n,s as o,P as l,H as i,B as c,A as r,Q as u,R as d,T as m,a as p,D as f,E as h,o as _,e as g,f as v,g as b,h as x,u as j,U as I,i as y,j as w,F as T,C,k,l as D,m as $,t as B,n as N,_ as R}from"./index-80b03063.js";import{T as S,a as V}from"./tabs-item.b5ad1d1d.js";import{T as A}from"./search-box.a4889ee8.js";import{c as E}from"./clone-deep.2124c060.js";import{u as H}from"./index.38361e72.js";import{u as O}from"./index.b621671f.js";import{u as P}from"./index.ae0678d3.js";import{C as U}from"./custom-page.333ee63a.js";import{u as q}from"./index.e83e3f39.js";import"./event.5568c9d8.js";import"./is-number.acae358a.js";import"./index.ec111f4e.js";import"./badge.9856adf0.js";import"./debounce.73e35894.js";const F=()=>{const p=s(),{systemScreenInfo:f,navBarInfo:h}=O(),{connectObserver:_,disconnectObserver:g}=P(p),{getSelectorNodeInfos:v}=H(p),b=`di-t-${n()}`;let x=[];const j=e([]),I=a((()=>j.value.map((e=>e.name)))),y=e(0),w=()=>{d()},T=()=>{m({title:"提示",content:"获取数据失败，请稍后再试",showCancel:!1})};let C=!1;const k=()=>{g(),j.value.length&&_(".icon-show-container__data-title",(e=>{if(C)C=!1;else if(e.intersectionRatio>.95){const a=Number(e.id.replace(`${b}-`," "));a!==y.value&&(y.value=a)}}),{type:"relativeToViewport",margins:{bottom:-(f.height-h.height)}},{thresholds:[.95,.98,1],observeAll:!0})};let D=[],$=0;const B=async()=>{if(j.value.length)try{const e=await v(".icon-show-container__data-title");if(!e||!e.length){if($>10)throw new Error("获取icon主题标题容器信息失败");return $++,void setTimeout((()=>{B()}),150)}$=0,D=e.map((e=>e.top||0)),w()}catch(e){}};return u({title:"加载中",mask:!0}),r({url:"https://resource.tuniaokj.com/vue3_page_data/iconfont.json",success:e=>{200===e.statusCode?(x=e.data,j.value=x,i((()=>{B(),k(),setTimeout((()=>{w()}),2e3)}))):T()},fail:()=>{w(),T()}}),t((()=>{g()})),{dataTitleId:b,navBarInfo:h,tabsData:I,filterResponseData:j,currentTabsIndex:y,tabsChange:e=>{C=!0,l({scrollTop:D[e]-(h.height+100),duration:250})},onSearchInput:e=>{if(y.value=0,g(),e){const a=E(x);a.forEach((a=>{a.icons=a.icons.filter((a=>a.name.includes(e)||a.icon.includes(e)))})),j.value=a.filter((e=>e.icons.length>0)),0===j.value.length&&o({title:"暂无数据",icon:"none"})}else j.value=E(x);l({scrollTop:0,duration:0}),i((()=>{setTimeout((()=>{k()}),350)}))},copyIconName:e=>{c({data:e,success:()=>{o({title:e,icon:"none",duration:1e4})}})}}},M=R(p({__name:"index",setup(e){f((()=>({}))),h((()=>({})));const{isDemoH5Page:a}=q(),{dataTitleId:t,navBarInfo:s,tabsData:n,currentTabsIndex:o,filterResponseData:l,tabsChange:i,onSearchInput:c,copyIconName:r}=F();return(e,u)=>{const d=k,m=D("TnIcon");return _(),g(U,{title:"图标",padding:"0","navbar-frosted":!1,"navbar-bottom-shadow":!1,"is-h5-demo-page":j(a)},{default:v((()=>[b(" 图标分类 "),x(d,{class:"icon-category",style:C({top:`${j(s).height}px`})},{default:v((()=>[x(S,{modelValue:j(o),"onUpdate:modelValue":u[0]||(u[0]=e=>I(o)?o.value=e:null),onChange:j(i)},{default:v((()=>[(_(!0),y(T,null,w(j(n),((e,a)=>(_(),g(V,{key:a,name:a,title:e},null,8,["name","title"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1},8,["style"]),b(" 搜索框 "),x(d,{class:"icon-search-box tn-white_bg tn-shadow",style:C({top:`${j(s).height+50}px`})},{default:v((()=>[x(A,{placeholder:"搜索 中文 / 英文 名称",shape:"round","text-align":"center",border:!1,"search-button":!1,clearable:!1,onInput:j(c)},null,8,["onInput"])])),_:1},8,["style"]),b(" 图标数据展示 "),x(d,{class:"icon-show-container"},{default:v((()=>[(_(!0),y(T,null,w(j(l),((e,a)=>(_(),g(d,{key:a,class:"icon-data"},{default:v((()=>[x(d,{id:`${j(t)}-${a}`,class:"data-title icon-show-container__data-title"},{default:v((()=>[x(d,{class:"title-icon"},{default:v((()=>[x(m,{name:"font"})])),_:1}),x(d,{class:"title-value"},{default:v((()=>[$(B(e.name),1)])),_:2},1024),x(d,{class:"title-icon"},{default:v((()=>[x(m,{name:"font"})])),_:1})])),_:2},1032,["id"]),x(d,{class:"icon-list"},{default:v((()=>[(_(!0),y(T,null,w(e.icons,((e,a)=>(_(),g(d,{key:a,class:"icon-item tn-shadow",onClick:N((a=>j(r)(e.icon)),["stop"])},{default:v((()=>[x(d,{class:"icon-item__content"},{default:v((()=>[x(d,{class:"icon"},{default:v((()=>[x(m,{name:e.icon},null,8,["name"])])),_:2},1024),x(d,{class:"value tn-text-ellipsis-1 tn-grey_text"},{default:v((()=>[$(B(e.icon),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["is-h5-demo-page"])}}}),[["__scopeId","data-v-eab1e8c7"]]);export{M as default};

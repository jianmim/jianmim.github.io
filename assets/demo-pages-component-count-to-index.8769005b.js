import{b as t,V as e,W as a,X as s,c as o,Z as n,r as l,w as u,a as r,o as d,e as c,f as i,m,t as f,u as p,K as v,C as _,k as S,_ as x,D as h,E as g,h as y}from"./index-80b03063.js";import{a as b}from"./index.b621671f.js";import{C as j}from"./custom-page.333ee63a.js";import{D as $}from"./demo-container.59d4003d.js";import{u as z}from"./index.e83e3f39.js";import"./title.e0fd12f0.js";const C=t({start:{type:[String,Number],default:0},end:{type:[String,Number],required:!0},textColor:String,fontSize:String,decimals:{type:Number,default:0},decimalSeparator:{type:String,default:"."},thousandsSeparator:String,duration:{type:Number,default:1500}}),N=(t,e)=>{const a=o((()=>Number(b(t.start,0)))),s=o((()=>Number(b(t.end,0)))),n=o((()=>a.value>s.value)),r=o((()=>b(t.duration,1500))),d=l("");function c(t,e,a,s){return a*(1-Math.pow(2,-10*t/s))*1024/1023+e}let i=null;const m=()=>{i||(i=Date.now());const o=Date.now()-i;let l=0;n.value?(l=a.value-c(o,0,a.value-s.value,r.value),l=l<s.value?s.value:l):(l=c(o,a.value,s.value-a.value,r.value),l=l>s.value?s.value:l),d.value=(e=>{const a=/(\d+)(\d{3})/,s=e.toFixed(t.decimals).split(".");let o=s[0],n="";if(s.length>1&&(n=`${b(t.decimalSeparator,".")}${s[1]}`),null==t?void 0:t.thousandsSeparator)for(;a.test(o);)o=o.replace(a,`$1${t.thousandsSeparator}$2`);return`${o}${n}`})(l),o<r.value?setTimeout(m,16):e("end")};return u([s,a],(()=>{i=null,m()}),{immediate:!0}),{content:d}},w=x(r({__name:"count-to",props:C,emits:{end:()=>!0},setup(t,{emit:l}){const u=t,{countToClass:r,countToStyle:x}=(t=>{const l=e("count-to"),[u,r]=a(s(t,"textColor"),"text"),d=o((()=>{const t=[l.b()];return u.value&&t.push(u.value),t.join(" ")})),c=o((()=>{const e={};return u.value||(e.color=r.value||"var(--tn-text-color-primary)"),t.fontSize&&(e.fontSize=n(t.fontSize)),e}));return{ns:l,countToClass:d,countToStyle:c}})(u),{content:h}=N(u,l);return(t,e)=>{const a=S;return d(),c(a,{class:v([p(r)]),style:_(p(x))},{default:i((()=>[m(f(p(h)),1)])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-48df598d"]]),D=x(r({__name:"index",setup(t){h((()=>({}))),g((()=>({})));const{isDemoH5Page:e}=z(),a=l(""),s=l(""),o=()=>(1e6*Math.random()).toFixed(2);return s.value=o(),setInterval((()=>{a.value=s.value,s.value=o()}),5e3),(t,o)=>{const n=S;return d(),c(j,{title:"数字跳转","is-h5-demo-page":p(e)},{default:i((()=>[y($,{title:"基础使用"},{default:i((()=>[y(n,{class:"count-to-container tn-flex items-center"},{default:i((()=>[y(n,{class:"count-to-item"},{default:i((()=>[y(w,{start:"0",end:"6745"})])),_:1}),y(n,{class:"count-to-item no-mt"},{default:i((()=>[y(w,{start:"10765",end:"20"})])),_:1})])),_:1})])),_:1}),y($,{title:"带小数显示"},{default:i((()=>[y(n,{class:"count-to-container"},{default:i((()=>[y(n,{class:"count-to-item"},{default:i((()=>[y(w,{start:"0",end:"6745.89",decimals:2})])),_:1})])),_:1})])),_:1}),y($,{title:"千分位分割"},{default:i((()=>[y(n,{class:"count-to-container"},{default:i((()=>[y(n,{class:"count-to-item"},{default:i((()=>[y(w,{start:"0",end:"1327654.89",decimals:2,"thousands-separator":","})])),_:1})])),_:1})])),_:1}),y($,{title:"修改样式"},{default:i((()=>[y(n,{class:"count-to-container"},{default:i((()=>[y(n,{class:"count-to-item"},{default:i((()=>[y(w,{start:"0",end:"1327654.89",decimals:2,"thousands-separator":",","text-color":"tn-blue","font-size":"46"})])),_:1})])),_:1})])),_:1}),y($,{title:"动态数据演示"},{default:i((()=>[y(n,{class:"count-to-container"},{default:i((()=>[y(n,{class:"count-to-item"},{default:i((()=>[y(w,{start:a.value,end:s.value,decimals:2,"thousands-separator":",","text-color":"tn-blue","font-size":"46"},null,8,["start","end"])])),_:1})])),_:1})])),_:1})])),_:1},8,["is-h5-demo-page"])}}}),[["__scopeId","data-v-6f4989f9"]]);export{D as default};

import{b as e,a4 as a,r as t,c as o,w as m,H as n,y as u,a as l,o as i,e as d,u as r,U as s,D as c,E as v,i as h,h as p,f,m as y,t as g,g as x,F as _,v as k,k as $,_ as S}from"./index-80b03063.js";import{p as M,T as b}from"./picker.030b3463.js";import{U as C,C as D}from"./event.5568c9d8.js";import{b as N}from"./index.b621671f.js";import{d as j}from"./index.2f07eab2.js";import{T}from"./button.89b66e38.js";import{C as V}from"./custom-page.333ee63a.js";import{D as Y}from"./demo-container.59d4003d.js";import{u as w}from"./index.e83e3f39.js";import"./popup.cb51da11.js";import"./overlay.66eb0f69.js";import"./install.171bae2e.js";import"./is-number.acae358a.js";import"./clone-deep.2124c060.js";import"./loading.d4613e36.js";import"./debounce.73e35894.js";import"./title.e0fd12f0.js";const P=e({...M,modelValue:{type:String,default:""},open:Boolean,mode:{type:String,values:["year","yearmonth","date","datetime","time","datetimeNoSecond","timeNoSecond"],default:"date"},minTime:String,maxTime:String,initCurrentDateTime:{type:Boolean,default:!0},format:String}),U={[C]:e=>a(e),[D]:e=>a(e),"update:open":e=>N(e),confirm:e=>a(e),cancel:()=>!0,close:()=>!0},E="YYYY/MM/DD HH:mm:ss",z=j(),H=(e,a)=>(a=a<e?e:a,Array.from({length:a-e+1}).map(((a,t)=>e+t))),I=(e,a,t)=>Math.min(Math.max(e,t),a),R=e=>{const{emit:a}=u(),{pickerData:l,minTimeDayjs:i,maxTimeDayjs:d,generatePickerData:r,fillDateTime:s}=(e=>{const a=t([]),m=t([]),n=t([]),u=t([]),l=t([]),i=t([]),d=(a,t)=>{t||(t=E);let o="";if("time"===e.mode||"timeNoSecond"===e.mode){const e=/^(\d{1,2})(?::(\d{1,2}))?(?::(\d{1,2}))?$/;o=a.replace(e,((e,a,t,o)=>`1970/01/01 ${a}:${t||"00"}:${o||"00"}`))}else{const e=/^(\d{4})(?:[-/](\d{1,2}))?(?:[-/](\d{1,2}))?(?:\s?(\d{1,2}))?(?::(\d{1,2}))?(?::(\d{1,2}))?$/;o=(a=j(a,t).format(E)).replace(e,((e,a,t,o,m,n,u)=>`${a}/${t||"01"}/${o||"01"} ${m||"00"}:${n||"00"}:${u||"00"}`))}return j(o,t)},r=o((()=>{let a=z.year()-10+"/01/01 00:00:00";return e.minTime&&(a=e.minTime),d(a)})),s=o((()=>{let a=`${z.year()+10}/12/31 23:59:59`;return e.maxTime&&(a=e.maxTime),d(a)}));return{pickerData:o((()=>{const t=[];return"year"===e.mode&&t.push(a.value),"yearmonth"===e.mode&&t.push(a.value,m.value),"date"===e.mode&&t.push(a.value,m.value,n.value),"time"===e.mode&&t.push(u.value,l.value,i.value),"datetime"===e.mode&&t.push(a.value,m.value,n.value,u.value,l.value,i.value),"datetimeNoSecond"===e.mode&&t.push(a.value,m.value,n.value,u.value,l.value),"timeNoSecond"===e.mode&&t.push(u.value,l.value),t})),minTimeDayjs:r,maxTimeDayjs:s,generatePickerData:t=>{const o=t.year()===r.value.year(),d=t.year()===s.value.year(),c=t.month()===r.value.month(),v=t.month()===s.value.month(),h=t.date()===r.value.date(),p=t.date()===s.value.date(),f=t.hour()===r.value.hour(),y=t.hour()===s.value.hour(),g=t.minute()===r.value.minute(),x=t.minute()===s.value.minute(),_=r.value.year(),k=s.value.year(),$=o?r.value.month()+1:1,S=d?s.value.month()+1:12,M=o&&c?r.value.date():1,b=d&&v?s.value.date():t.daysInMonth(),C=o&&c&&h||"time"===e.mode||"timeNoSecond"===e.mode?r.value.hour():0,D=d&&v&&p||"time"===e.mode||"timeNoSecond"===e.mode?s.value.hour():23,N=(o&&c&&h||"time"===e.mode||"timeNoSecond"===e.mode)&&f?r.value.minute():0,j=(d&&v&&p||"time"===e.mode||"timeNoSecond"===e.mode)&&y?s.value.minute():59,T=(o&&c&&h||"time"===e.mode)&&f&&g?r.value.second():0,V=(d&&v&&p||"time"===e.mode)&&y&&x?s.value.second():59;a.value=H(_,k).map((e=>({label:`${e}年`,value:e}))),m.value=H($,S).map((e=>({label:`${String(e).padStart(2,"0")}月`,value:e}))),n.value=H(M,b).map((e=>({label:`${String(e).padStart(2,"0")}日`,value:e}))),u.value=H(C,D).map((e=>({label:String(e).padStart(2,"0"),value:e}))),l.value=H(N,j).map((e=>({label:String(e).padStart(2,"0"),value:e}))),i.value=H(T,V).map((e=>({label:String(e).padStart(2,"0"),value:e})))},fillDateTime:d,getTimeMaxMinValue:(e,a,t)=>{const o={...t};let m=0,n=0,u=0,l=0,i=0,d=0,r=0,s=0,c=0,v=0,h=0;return"[object Object]"===e.toString()?({year:m,month:n,date:u,hour:l,minute:i}=e):(m=e.year(),n=e.month(),u=e.date(),l=e.hour(),i=e.minute()),"[object Object]"===a.toString()?({year:d,month:r,date:s,hour:c,minute:v,second:h}=a):(d=a.year(),r=a.month(),s=a.date(),c=a.hour(),v=a.minute(),h=a.second()),m===d&&(o.month=r,n===r&&(o.date=s,u===s&&(o.hour=c,l===c&&(o.minute=v,i===v&&(o.second=h))))),o}}})(e),{handlePickerChangeMinMaxTime:c}=((e,a)=>{const t=t=>(t.year()===e.value.year()&&(t=t.set("month",Math.max(e.value.month(),t.month()))),t.year()===a.value.year()&&(t=t.set("month",Math.min(a.value.month(),t.month()))),t),o=t=>(t.year()===e.value.year()&&(t=t.set("month",Math.max(e.value.month(),t.month()))).month()===e.value.month()&&(t=t.set("date",Math.max(e.value.date(),t.date()))),t.year()===a.value.year()&&(t=t.set("month",Math.min(a.value.month(),t.month()))).month()===a.value.month()&&(t=t.set("date",Math.min(a.value.date(),t.date()))),t),m=(t,o=!0)=>(t.year()===e.value.year()&&(t=t.set("month",Math.max(e.value.month(),t.month()))).month()===e.value.month()&&(t=t.set("date",Math.max(e.value.date(),t.date()))).date()===e.value.date()&&(t=t.set("hour",Math.max(e.value.hour(),t.hour()))).hour()===e.value.hour()&&(t=t.set("minute",Math.max(e.value.minute(),t.minute())),o?t.minute()===e.value.minute()&&(t=t.set("second",Math.max(e.value.second(),t.second()))):t=t.set("second",0)),t.year()===a.value.year()&&(t=t.set("month",Math.min(a.value.month(),t.month()))).month()===a.value.month()&&(t=t.set("date",Math.min(a.value.date(),t.date()))).date()===a.value.date()&&(t=t.set("hour",Math.min(a.value.hour(),t.hour()))).hour()===a.value.hour()&&(t=t.set("minute",Math.min(a.value.minute(),t.minute())),o?t.minute()===a.value.minute()&&(t=t.set("second",Math.min(a.value.second(),t.second()))):t=t.set("second",0)),t),n=(t,o=!0)=>(t.hour()===e.value.hour()&&(t=t.set("minute",Math.max(e.value.minute(),t.minute()))).minute()===e.value.minute()&&(t=t.set("second",Math.max(e.value.second(),t.second()))),t.hour()===a.value.hour()&&(t=t.set("minute",Math.min(a.value.minute(),t.minute())),o?t.minute()===a.value.minute()&&(t=t.set("second",Math.min(a.value.second(),t.second()))):t=t.set("second",0)),t);return{handlePickerChangeMinMaxTime:(e,a)=>{switch(e){case"yearmonth":return t(a);case"date":return o(a);case"datetime":case"datetimeNoSecond":return m(a,"datetime"===e);case"time":case"timeNoSecond":return n(a,"time"===e);default:return a}}}})(i,d),v=t(),h=t(!1);m((()=>e.open),(e=>{h.value=e}));const p=()=>{a("update:open",!1)};m((()=>[e.minTime,e.maxTime,e.modelValue]),(()=>{g(!1)}));const f=t([]),y=a=>{const t=a.year(),o=String(a.month()+1).padStart(2,"0"),m=String(a.date()).padStart(2,"0"),n=String(a.hour()).padStart(2,"0"),u=String(a.minute()).padStart(2,"0"),l=String(a.second()).padStart(2,"0");return"year"===e.mode?`${t}`:"yearmonth"===e.mode?j(`${t}/${o}`).format(e.format||"YYYY/MM"):"date"===e.mode?j(`${t}/${o}/${m}`).format(e.format||"YYYY/MM/DD"):"datetimeNoSecond"===e.mode?j(`${t}/${o}/${m} ${n}:${u}`).format(e.format||"YYYY/MM/DD HH:mm"):"time"===e.mode?`${n}:${u}:${l}`:"timeNoSecond"===e.mode?`${n}:${u}`:j(`${t}/${o}/${m} ${n}:${u}:${l}`).format(e.format||E)},g=(t=!0)=>{let o=j();e.modelValue&&(o=s(e.modelValue,e.format)),"time"!==e.mode&&"timeNoSecond"!==e.mode?(o=o.year(I(i.value.year(),d.value.year(),o.year())),o.year()===i.value.year()&&(o.month()<i.value.month()?o=o.month(i.value.month()).date(i.value.date()).hour(i.value.hour()).minute(i.value.minute()).second(i.value.second()):o.month()===i.value.month()&&(o.date()<i.value.date()?o=o.date(i.value.date()).hour(i.value.hour()).minute(i.value.minute()).second(i.value.second()):o.date()===i.value.date()&&(o=o.hour(i.value.hour()).minute(i.value.minute()).second(i.value.second()),o.hour()===i.value.hour()&&(o=o.minute(Math.max(i.value.minute(),o.minute())),o.minute()===i.value.minute()&&(o=o.second(Math.max(i.value.second(),o.second()))))))),o.year()===d.value.year()&&(o.month()>d.value.month()?o=o.month(d.value.month()).date(1).hour(0).minute(0).second(0):o.month()===d.value.month()&&(o.date()>d.value.date()?o=o.date(d.value.date()).hour(d.value.hour()).minute(d.value.minute()).second(d.value.second()):o.date()===d.value.date()&&(o=o.hour(d.value.hour()).minute(d.value.minute()).second(d.value.second()),o.hour()===d.value.hour()&&(o=o.minute(Math.min(d.value.minute(),o.minute())),o.minute()===d.value.minute()&&(o=o.second(0)))))),"datetimeNoSecond"===e.mode&&(o=o.second(0))):(o=o.hour(I(i.value.hour(),d.value.hour(),o.hour())),o.hour()===i.value.hour()&&(o=o.minute(Math.max(i.value.minute(),o.minute())),o.minute()===i.value.minute()&&(o=o.second(Math.max(i.value.second(),o.second())))),o.hour()===d.value.hour()&&(o=o.minute(Math.min(d.value.minute(),o.minute())),o.minute()===d.value.minute()&&(o=o.second(0))),"timeNoSecond"===e.mode&&(o=o.second(0))),r(o),(a=>{const t=a.year(),o=a.month()+1,m=a.date(),n=a.hour(),u=a.minute(),l=a.second();"year"===e.mode&&(f.value=[t]),"yearmonth"===e.mode&&(f.value=[t,o]),"date"===e.mode&&(f.value=[t,o,m]),"time"===e.mode&&(f.value=[n,u,l]),"datetime"===e.mode&&(f.value=[t,o,m,n,u,l]),"timeNoSecond"===e.mode&&(f.value=[n,u]),"datetimeNoSecond"===e.mode&&(f.value=[t,o,m,n,u])})(o),t&&a(C,y(o))},x=a=>{let t="";if("year"===e.mode&&(t=`${a[0]}`),"yearmonth"===e.mode&&(t=`${a[0]}/${a[1]}`),"date"===e.mode){const e=Number(a[0]),o=Number(a[1]),m=Math.min(j().year(e).month(o-1).daysInMonth(),Number(a[2]));t=`${a[0]}/${o}/${m}`}if("time"!==e.mode&&"timeNoSecond"!==e.mode||(t=`${a[0]}:${a[1]}:${"time"===e.mode?a[2]:"00"}`),"datetime"===e.mode||"datetimeNoSecond"===e.mode){const o=Number(a[0]),m=Number(a[1]),n=Math.min(j().year(o).month(m-1).daysInMonth(),Number(a[2]));t=`${a[0]}/${m}/${n} ${a[3]}:${a[4]}:${"datetime"===e.mode?a[5]:"00"}`}return s(t)};return{pickerRef:v,showPicker:h,pickerData:l,pickerSelectData:f,handlePickerCloseEvent:()=>{p(),g(!1),a("close")},initDateTimePicker:g,pickerValueChangeEvent:t=>{let o=x(t);o=c(e.mode,o),"year"===e.mode&&(f.value=[o.year()]),"yearmonth"===e.mode&&(f.value=[o.year(),o.month()+1]),"date"===e.mode&&(f.value=[o.year(),o.month()+1,o.date()]),"time"===e.mode&&(f.value=[o.hour(),o.minute(),o.second()]),"datetime"===e.mode&&(f.value=[o.year(),o.month()+1,o.date(),o.hour(),o.minute(),o.second()]),"timeNoSecond"===e.mode&&(f.value=[o.hour(),o.minute()]),"datetimeNoSecond"===e.mode&&(f.value=[o.year(),o.month()+1,o.date(),o.hour(),o.minute()]),n((()=>{r(o)}));const m=y(o);a(D,m)},handlePickerConfirmEvent:e=>{const t=x(e),o=y(t);a(C,o),n((()=>{a("confirm",o)})),p()},handlePickerCancelEvent:()=>{g(!1),a("cancel"),p()}}},B=l({__name:"date-time-picker",props:P,emits:U,setup(e){const a=e,{pickerRef:t,showPicker:o,pickerData:m,pickerSelectData:n,handlePickerCloseEvent:u,initDateTimePicker:l,pickerValueChangeEvent:c,handlePickerConfirmEvent:v,handlePickerCancelEvent:h}=R(a);return l(a.initCurrentDateTime),(e,a)=>(i(),d(b,{ref_key:"pickerRef",ref:t,open:r(o),"onUpdate:open":a[0]||(a[0]=e=>s(o)?o.value=e:null),"model-value":r(n),data:r(m),"show-cancel":e.showCancel,"show-confirm":e.showConfirm,mask:e.mask,"cancel-text":e.cancelText,"cancel-color":e.cancelColor,"confirm-text":e.confirmText,"confirm-color":e.confirmColor,"z-index":e.zIndex,onChange:r(c),onConfirm:r(v),onCancel:r(h),onClose:r(u)},null,8,["open","model-value","data","show-cancel","show-confirm","mask","cancel-text","cancel-color","confirm-text","confirm-color","z-index","onChange","onConfirm","onCancel","onClose"]))}}),O=S(l({__name:"index",setup(e){c((()=>({}))),v((()=>({})));const{isDemoH5Page:a}=w(),o=t(""),m=t(!1),n=()=>{m.value=!0},u=t(""),l=t(!1),d=()=>{l.value=!0},s=t(""),S=t(!1),M=()=>{S.value=!0},b=t(""),C=t(!1),D=()=>{C.value=!0},N=t(""),j=t(!1),P=()=>{j.value=!0};return(e,t)=>{const c=k,v=$;return i(),h(_,null,[p(V,{title:"日期时间选择器","is-h5-demo-page":r(a)},{default:f((()=>[p(Y,{title:"选择年月日"},{default:f((()=>[p(v,{class:"date-time-picker-container"},{default:f((()=>[p(v,{class:"date-time-picker-item"},{default:f((()=>[y(" 当前选中的日期时间: "),p(c,{class:"tn-gray_text"},{default:f((()=>[y(g(o.value),1)])),_:1})])),_:1}),p(v,{class:"date-time-picker-item"},{default:f((()=>[p(T,{size:"lg","bg-color":"gradient-bg__cool-6","text-color":"tn-white",onClick:n},{default:f((()=>[y(" 打开选择器 ")])),_:1})])),_:1})])),_:1})])),_:1}),p(Y,{title:"选择年月"},{default:f((()=>[p(v,{class:"date-time-picker-container"},{default:f((()=>[p(v,{class:"date-time-picker-item"},{default:f((()=>[y(" 当前选中的日期时间: "),p(c,{class:"tn-gray_text"},{default:f((()=>[y(g(u.value),1)])),_:1})])),_:1}),p(v,{class:"date-time-picker-item"},{default:f((()=>[p(T,{size:"lg","bg-color":"gradient-bg__cool-6","text-color":"tn-white",onClick:d},{default:f((()=>[y(" 打开选择器 ")])),_:1})])),_:1})])),_:1})])),_:1}),p(Y,{title:"选择时间"},{default:f((()=>[p(v,{class:"date-time-picker-container"},{default:f((()=>[p(v,{class:"date-time-picker-item"},{default:f((()=>[y(" 当前选中的日期时间: "),p(c,{class:"tn-gray_text"},{default:f((()=>[y(g(s.value),1)])),_:1})])),_:1}),p(v,{class:"date-time-picker-item"},{default:f((()=>[p(T,{size:"lg","bg-color":"gradient-bg__cool-6","text-color":"tn-white",onClick:M},{default:f((()=>[y(" 打开选择器 ")])),_:1})])),_:1})])),_:1})])),_:1}),p(Y,{title:"选择日期时间"},{default:f((()=>[p(v,{class:"date-time-picker-container"},{default:f((()=>[p(v,{class:"date-time-picker-item"},{default:f((()=>[y(" 当前选中的日期时间: "),p(c,{class:"tn-gray_text"},{default:f((()=>[y(g(b.value),1)])),_:1})])),_:1}),p(v,{class:"date-time-picker-item"},{default:f((()=>[p(T,{size:"lg","bg-color":"gradient-bg__cool-6","text-color":"tn-white",onClick:D},{default:f((()=>[y(" 打开选择器 ")])),_:1})])),_:1})])),_:1})])),_:1}),p(Y,{title:"选择格式化日期时间"},{default:f((()=>[p(v,{class:"date-time-picker-container"},{default:f((()=>[p(v,{class:"date-time-picker-item"},{default:f((()=>[y(" 当前选中的日期时间: "),p(c,{class:"tn-gray_text"},{default:f((()=>[y(g(N.value),1)])),_:1})])),_:1}),p(v,{class:"date-time-picker-item"},{default:f((()=>[p(T,{size:"lg","bg-color":"gradient-bg__cool-6","text-color":"tn-white",onClick:P},{default:f((()=>[y(" 打开选择器 ")])),_:1})])),_:1})])),_:1})])),_:1}),p(v,{class:"fit-height"})])),_:1},8,["is-h5-demo-page"]),x(" 选择日期选择器 "),p(B,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),open:m.value,"onUpdate:open":t[1]||(t[1]=e=>m.value=e),mode:"date","min-time":"2020/10/02","max-time":"2024/12/02"},null,8,["modelValue","open"]),x(" 选择年月选择器 "),p(B,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=e=>u.value=e),open:l.value,"onUpdate:open":t[3]||(t[3]=e=>l.value=e),mode:"yearmonth","min-time":"2020/10","max-time":"2023/12"},null,8,["modelValue","open"]),x(" 选择时间选择器 "),p(B,{modelValue:s.value,"onUpdate:modelValue":t[4]||(t[4]=e=>s.value=e),open:S.value,"onUpdate:open":t[5]||(t[5]=e=>S.value=e),mode:"time","min-time":"04:30:10","max-time":"12:40:20"},null,8,["modelValue","open"]),x(" 选择日期时间选择器 "),p(B,{modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=e=>b.value=e),open:C.value,"onUpdate:open":t[7]||(t[7]=e=>C.value=e),mode:"datetime","min-time":"2020/10/02 12:40:20","max-time":"2023/12/02 10:30:10"},null,8,["modelValue","open"]),x(" 选择格式化日期时间选择器 "),p(B,{modelValue:N.value,"onUpdate:modelValue":t[8]||(t[8]=e=>N.value=e),open:j.value,"onUpdate:open":t[9]||(t[9]=e=>j.value=e),mode:"datetime","min-time":"2020-10-02 12:40","max-time":"2023-12-02 10:30",format:"YYYY-MM-DD HH:mm"},null,8,["modelValue","open"])],64)}}}),[["__scopeId","data-v-ae8487e8"]]);export{O as default};

import{b as e,d as t,V as a,W as n,X as s,c as o,w as l,r,L as d,H as i,y as u,Z as c,a8 as f,N as p,a as m,o as _,e as x,f as h,g,h as y,a1 as v,u as C,K as k,C as S,n as w,m as H,t as b,a2 as j,k as I,_ as A,D as $,E as T,Q as E,s as O,az as D,R as F}from"./index-80b03063.js";import{b as N}from"./index.b621671f.js";import{u as B}from"./index.38361e72.js";import{u as P}from"./index.0751853a.js";import{C as R}from"./custom-page.333ee63a.js";import{D as z}from"./demo-container.59d4003d.js";import{u as K}from"./index.e83e3f39.js";import"./title.e0fd12f0.js";const L=e({expand:Boolean,height:{type:Number,default:250},showFold:{type:Boolean,default:!0},expandText:{type:String,default:"显示更多"},expandIcon:{type:String,default:"down"},foldText:{type:String,default:"收起"},foldIcon:{type:String,default:"up"},tipColor:String,beforeExpand:{type:t(Function)}}),M=(e,t)=>{const a=u(),n=`${`trm-${p()}`}-content`,{getSelectorNodeInfo:s}=B(a),[m,_]=P(e.expand||!1);l((()=>e.expand),(e=>{m.value=e}));const x=o((()=>!m.value||m.value&&e.showFold)),h=o((()=>m.value?`calc(${c(g.value,"px")} + 40rpx)`:c(e.height)));let g=r(0),y=0;const v=async()=>{try{const e=await s(`#${n}`);y=0,g.value=e.height||0}catch(e){if(y>10)return void(y=0);y++,setTimeout((()=>{v()}),150)}},C=()=>{t("expand"),_()};return d((()=>{i((()=>{v()}))})),{componentContentId:n,showOperationArea:x,foldOperationAreaHeight:40,containerHeight:h,expandStatus:m,toggleExpandStatus:()=>{if(m.value)t("fold"),_();else{const{beforeExpand:t}=e;if(!t)return void C();const a=t();if(![f(a),N(a)].includes(!0))return;f(a)?a.then((e=>{e&&C()})):a&&C()}},resetContentHeight:()=>{i((()=>{v()}))}}},Q=A(m({__name:"read-more",props:L,emits:{expand:()=>!0,fold:()=>!0},setup(e,{expose:t,emit:l}){const r=e,{componentContentId:d,showOperationArea:i,foldOperationAreaHeight:u,containerHeight:c,expandStatus:f,toggleExpandStatus:p,resetContentHeight:m}=M(r,l),{ns:A,operationAreaClass:$,operationAreaStyle:T}=(e=>{const t=a("read-more"),[l,r]=n(s(e,"tipColor"),"text"),d=o((()=>{const e=[t.e("operation-area")];return l.value&&e.push(l.value),e.join(" ")})),i=o((()=>{const e={};return l.value||(e.color=r.value||"var(--tn-color-primary)"),e}));return{ns:t,operationAreaClass:d,operationAreaStyle:i}})(r);return t({resetContentHeight:m}),(e,t)=>{const a=I;return _(),x(a,{class:k([C(A).b()]),style:S({height:C(c)})},{default:h((()=>[g(" 内容区域 "),y(a,{id:C(d),class:k([C(A).e("content")])},{default:h((()=>[v(e.$slots,"default",{},void 0,!0)])),_:3},8,["id","class"]),g(" 操作区域 "),C(i)?(_(),x(a,{key:0,class:k([C($),C(f)?C(A).is("fold"):C(A).is("expand")]),style:S(C(T)),onClick:w(C(p),["stop"])},{default:h((()=>[C(f)?v(e.$slots,"fold",{key:1},(()=>[y(a,{class:k(["fold",[C(A).e("operation-content")]]),style:S({height:`${C(u)}rpx`})},{default:h((()=>[y(a,{class:"text"},{default:h((()=>[H(b(e.foldText),1)])),_:1}),y(a,{class:"icon"},{default:h((()=>[y(j,{name:e.foldIcon},null,8,["name"])])),_:1})])),_:1},8,["class","style"])]),!0):v(e.$slots,"expand",{key:0},(()=>[y(a,{class:k(["expand",[C(A).e("operation-content")]])},{default:h((()=>[y(a,{class:"text"},{default:h((()=>[H(b(e.expandText),1)])),_:1}),y(a,{class:"icon"},{default:h((()=>[y(j,{name:e.expandIcon},null,8,["name"])])),_:1})])),_:1},8,["class"])]),!0)])),_:3},8,["class","style","onClick"])):g("v-if",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-b6d4da3d"]]),V=A(m({__name:"index",setup(e){$((()=>({}))),T((()=>({})));const{isDemoH5Page:t}=K(),a="噫吁嚱，危乎高哉！\n  蜀道之难，难于上青天！\n  蚕丛及鱼凫，开国何茫然！\n  尔来四万八千岁，不与秦塞通人烟。\n  西当太白有鸟道，可以横绝峨眉巅。\n  地崩山摧壮士死，然后天梯石栈相钩连。\n  上有六龙回日之高标，下有冲波逆折之回川。\n  黄鹤之飞尚不得过，猿猱欲度愁攀援。\n  青泥何盘盘，百步九折萦岩峦。\n  扪参历井仰胁息，以手抚膺坐长叹。\n\n  问君西游何时还？畏途巉岩不可攀。\n  但见悲鸟号古木，雄飞雌从绕林间。\n  又闻子规啼夜月，愁空山。\n  蜀道之难，难于上青天，使人听此凋朱颜！\n  连峰去天不盈尺，枯松倒挂倚绝壁。\n  飞湍瀑流争喧豗，砯崖转石万壑雷。\n  其险也如此，嗟尔远道之人胡为乎来哉！(也如此 一作：也若此)\n\n  剑阁峥嵘而崔嵬，一夫当关，万夫莫开。\n  所守或匪亲，化为狼与豺。\n  朝避猛虎，夕避长蛇，磨牙吮血，杀人如麻。\n  锦城虽云乐，不如早还家。\n  蜀道之难，难于上青天，侧身西望长咨嗟！",n=r(),s=r(!1);let o=0;const l=()=>!!s.value||new Promise(((e,t)=>{E({title:"请求中...",mask:!0}),setTimeout((()=>{var a;if(0===o)return O({title:"解说失败，请重试",icon:"none"}),o++,void t(!1);F(),s.value=!0,null==(a=n.value)||a.resetContentHeight(),e(!0)}),2e3)}));return(e,o)=>{const r=D,d=I;return _(),x(R,{title:"阅读更多","is-h5-demo-page":C(t)},{default:h((()=>[y(z,{title:"基础使用"},{default:h((()=>[y(d,{class:"read-more-container"},{default:h((()=>[y(d,{class:"read-more-item"},{default:h((()=>[y(Q,null,{default:h((()=>[y(r,{nodes:a})])),_:1})])),_:1})])),_:1})])),_:1}),y(z,{title:"默认展开"},{default:h((()=>[y(d,{class:"read-more-container"},{default:h((()=>[y(d,{class:"read-more-item"},{default:h((()=>[y(Q,{expand:""},{default:h((()=>[y(r,{nodes:a})])),_:1})])),_:1})])),_:1})])),_:1}),y(z,{title:"不显示收起按钮"},{default:h((()=>[y(d,{class:"read-more-container"},{default:h((()=>[y(d,{class:"read-more-item"},{default:h((()=>[y(Q,{"show-fold":!1},{default:h((()=>[y(r,{nodes:a})])),_:1})])),_:1})])),_:1})])),_:1}),y(z,{title:"设置显示内容的高度"},{default:h((()=>[y(d,{class:"read-more-container"},{default:h((()=>[y(d,{class:"read-more-item"},{default:h((()=>[y(Q,{height:300},{default:h((()=>[y(r,{nodes:a})])),_:1})])),_:1})])),_:1})])),_:1}),y(z,{title:"自定义文案"},{default:h((()=>[y(d,{class:"read-more-container"},{default:h((()=>[y(d,{class:"read-more-item"},{default:h((()=>[y(Q,{"expand-text":"付费查看","expand-icon":"lock","fold-text":"收起","fold-icon":"up-arrow"},{default:h((()=>[y(r,{nodes:a})])),_:1})])),_:1})])),_:1})])),_:1}),y(z,{title:"修改颜色"},{default:h((()=>[y(d,{class:"read-more-container"},{default:h((()=>[y(d,{class:"read-more-item"},{default:h((()=>[y(Q,{"tip-color":"tn-gray"},{default:h((()=>[y(r,{nodes:a})])),_:1})])),_:1})])),_:1})])),_:1}),y(z,{title:"案例演示 - 点击两次解锁"},{default:h((()=>[y(d,{class:"read-more-container"},{default:h((()=>[y(d,{class:"read-more-item"},{default:h((()=>[y(Q,{ref_key:"readMoreRef",ref:n,"before-expand":l},{default:h((()=>[s.value?(_(),x(r,{key:0,nodes:a})):(_(),x(r,{key:1,nodes:"噫吁嚱，危乎高哉！\n  蜀道之难，难于上青天！\n  蚕丛及鱼凫，开国何茫然！\n  尔来四万八千岁，不与秦塞通人烟。\n  西当太白有鸟道，可以横绝峨眉巅。\n  地崩山摧壮士死，然后天梯石栈相钩连。\n  上有六龙回日之高标，下有冲波逆折之回川。\n  黄鹤之飞尚不得过，猿猱欲度愁攀援。\n  青泥何盘盘，百步九折萦岩峦。\n  扪参历井仰胁息，以手抚膺坐长叹。\n"}))])),_:1},512)])),_:1})])),_:1})])),_:1})])),_:1},8,["is-h5-demo-page"])}}}),[["__scopeId","data-v-73b12d0f"]]);export{V as default};

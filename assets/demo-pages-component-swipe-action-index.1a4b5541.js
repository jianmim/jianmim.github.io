import{b as e,r as t,I as o,z as a,a5 as s,c as l,W as n,x as i,w as u,L as c,H as d,M as r,y as p,N as v,a as m,V as f,o as _,e as h,f as C,a1 as g,K as x,u as y,k as b,_ as w,d as I,g as k,h as T,i as j,F as S,j as $,C as D,n as A,a2 as M,m as E,t as O,p as N,v as U,D as B,E as W,s as F}from"./index-80b03063.js";import{a as H,i as K}from"./index.b621671f.js";import{i as P}from"./is-number.acae358a.js";import{u as R}from"./index.ec111f4e.js";import{u as V}from"./index.38361e72.js";import{u as X}from"./index.a1af8551.js";import{C as q}from"./custom-page.333ee63a.js";import{D as z}from"./demo-container.59d4003d.js";import{u as L}from"./index.e83e3f39.js";import"./title.e0fd12f0.js";const Y=Symbol("swipeActionContextKey"),G=e({autoClose:{type:Boolean,default:!0}}),J=e({...G,exclusive:{type:Boolean,default:!0}}),Q=w(m({__name:"swipe-action",props:J,emits:{open:e=>P(e),select:(e,t)=>!0},setup(e,{emit:l}){const n=e,i=f("swipe-action");return((e,l)=>{const{children:n,addChild:i,removeChild:u}=R(),c=t([]);o(Y,a({...s(e),items:n,addItem:i,removeItem:u,activeUid:c,setActiveItem:t=>{const o=n.value.findIndex((e=>e.uid===t)),a=c.value.indexOf(t);e.exclusive?c.value=-1!==a?[]:[t]:-1!==a?c.value.splice(a,1):c.value.push(t),l("open",o)},closeAllItemOption:()=>{c.value=[]},optionClick:(e,t)=>{const o=n.value.findIndex((t=>t.uid===e));l("select",o,t)}}))})(n,l),(e,t)=>{const o=b;return _(),h(o,{class:x([y(i).b()])},{default:C((()=>[g(e.$slots,"default",{},void 0,!0)])),_:3},8,["class"])}}}),[["__scopeId","data-v-96efcd8d"]]),Z=w(m({__name:"swipe-action-item",props:e({...G,options:{type:I(Array),default:()=>[]},disabled:Boolean,threshold:{type:Number,default:20}}),setup(e){const o=e,a=f("swipe-action-item"),{componentId:s,optionComponentClass:m,optionsMenuWidth:w,contentRightDistance:I,isSwipe:N,onTouchStart:U,onTouchMove:B,onTouchEnd:W,optionClickEvent:F}=(e=>{const o=p(),{uid:a}=o,s=i(Y,null),n=`tsai-${v()}`,m=`${n}-option`,{getSelectorNodeInfo:f,getSelectorNodeInfos:_}=V(o),{deltaX:h,distanceX:C,distanceY:g,isVertical:x,updateOptions:y,onTouchStart:b,onTouchMove:w,onTouchEnd:I}=X(),k=l((()=>s.activeUid.includes(a))),T=l((()=>K(null==e?void 0:e.autoClose,null==s?void 0:s.autoClose,!0))),j=l((()=>{var t;return e.disabled||!(null==(t=e.options)?void 0:t.length)}));u((()=>j.value),(e=>{y({disabled:e})}),{immediate:!0});const S=t(0);let $=0;const D=async()=>{var t;try{const o=await f(`#${n}`);let a=[];(null==(t=e.options)?void 0:t.length)&&(a=await _(`.${m}`)),$=0,y({left:o.left,right:o.right,top:o.top,bottom:o.bottom}),S.value=a.reduce(((e,t)=>e+(t.width||0)),0)}catch(o){if($>10)return void($=0);$++,setTimeout((()=>{D()}),150)}},A=t(0),M=t(!1),E=()=>{M.value=!1,A.value=0},O=()=>{k.value?null==s||s.setActiveItem(a):(null==s?void 0:s.exclusive)&&(null==s||s.closeAllItemOption())},N=()=>{M.value=!1,A.value=S.value,null==s||s.setActiveItem(a)};return u((()=>k.value),(e=>{e||E()})),c((()=>{null==s||s.addItem({uid:a}),d((()=>{D()}))})),r((()=>{null==s||s.removeItem(a)})),{componentId:n,optionComponentClass:m,isOptionsOpen:k,optionsMenuWidth:S,contentRightDistance:A,isSwipe:M,onTouchStart:e=>{b(e)},onTouchMove:e=>{e.preventDefault(),e.stopPropagation(),w(e),M.value=!0,C.value<3&&g.value>5||(k.value?A.value=S.value-h.value:A.value=-h.value,A.value<0&&(A.value=0),A.value>S.value&&(A.value=S.value))},onTouchEnd:t=>{I(t),C.value<3&&g.value>5||(M.value=!1,-h.value>e.threshold?N():(E(),O()),x.value&&O())},optionClickEvent:t=>{e.options[t].disabled||(null==s||s.optionClick(a,t),T.value&&E())}}})(o),{options:P,optionColorClass:R,optionColorStyle:q}=(e=>{const o=l((()=>e.options.map((e=>{const o=t(e.textColor),a=t(e.bgColor),[s,l]=n(o,"text"),[i,u]=n(a,"bg");return{icon:H(e.icon,""),text:H(e.text,""),textColor:{class:s.value,style:l.value},bgColor:{class:i.value,style:u.value},round:H(e.round,!1),disabled:H(e.disabled,!1)}})))),a=l((()=>e=>{const t=[],a=o.value[e];return a&&(a.textColor.class&&t.push(a.textColor.class),a.bgColor.class&&t.push(a.bgColor.class)),t.join(" ")})),s=l((()=>e=>{const t={},a=o.value[e];return a&&(a.textColor.class||(t.color=a.textColor.style||"var(--tn-color-white)"),a.bgColor.class||(t.backgroundColor=a.bgColor.style||"var(--tn-color-primary)")),t}));return{options:o,optionColorClass:a,optionColorStyle:s}})(o);return(e,t)=>{const o=b;return _(),h(o,{id:y(s),class:x([y(a).b()])},{default:C((()=>[k(" 操作菜单 "),T(o,{class:x([y(a).e("options")])},{default:C((()=>[(_(!0),j(S,null,$(y(P),((e,t)=>(_(),h(o,{key:t,class:x([y(m),y(a).e("option-item"),y(a).is("disabled",e.disabled),y(a).is("round",e.round)]),style:D({right:`-${y(w)-y(I)}px`,transitionDuration:(y(N)?0:300)+"ms"}),onClick:A((e=>y(F)(t)),["stop"])},{default:C((()=>[T(o,{class:x([y(a).e("option-item-content"),y(R)(t)]),style:D(y(q)(t))},{default:C((()=>[e.icon?(_(),h(o,{key:0,class:"icon"},{default:C((()=>[T(M,{name:e.icon},null,8,["name"])])),_:2},1024)):k("v-if",!0),e.text&&!e.round?(_(),h(o,{key:1,class:"text"},{default:C((()=>[E(O(e.text),1)])),_:2},1024)):k("v-if",!0)])),_:2},1032,["class","style"])])),_:2},1032,["class","style","onClick"])))),128))])),_:1},8,["class"]),k(" 内容 "),T(o,{class:x([y(a).e("content")]),style:D({right:`${y(I)}px`,transitionDuration:(y(N)?0:300)+"ms"}),onTouchstart:y(U),onTouchmove:y(B),onTouchend:y(W)},{default:C((()=>[g(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style","onTouchstart","onTouchmove","onTouchend"])])),_:3},8,["id","class"])}}}),[["__scopeId","data-v-81358055"]]);const ee=w({},[["render",function(e,t){const o=N,a=b,s=U;return _(),h(a,{class:"swipe-item-content"},{default:C((()=>[T(a,{class:"avatar"},{default:C((()=>[T(o,{src:"https://resource.tuniaokj.com/images/tuniao_logo/logo.jpg",mode:"aspectFill"})])),_:1}),T(a,{class:"content"},{default:C((()=>[T(a,{class:"top"},{default:C((()=>[T(a,{class:"nickname"},{default:C((()=>[E("图鸟科技")])),_:1}),T(a,{class:"date"},{default:C((()=>[E("7月1日")])),_:1})])),_:1}),T(a,{class:"bottom"},{default:C((()=>[T(a,{class:"message"},{default:C((()=>[T(s,{class:"tn-text-ellipsis-1"},{default:C((()=>[E(" 图鸟UI: 图鸟UI-uniapp-vue3版本正式发布，欢迎大家使用 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-a75c4b04"]]),te=w(m({__name:"index",setup(e){B((()=>({}))),W((()=>({})));const{isDemoH5Page:t}=L(),o=[{text:"标记已读",bgColor:"tn-type-primary"},{text:"置顶",bgColor:"tn-orange"},{text:"删除",bgColor:"tn-red"}],a=[{icon:"open",bgColor:"tn-type-primary",round:!0},{icon:"totop-simple",bgColor:"tn-orange",round:!0},{icon:"delete",bgColor:"tn-red",round:!0}],s=(e,t)=>{F({title:`选中了第${e}个滑动菜单的第${t}个选项`,icon:"none"})};return(e,l)=>{const n=b;return _(),h(q,{title:"滑动菜单","is-h5-demo-page":y(t)},{default:C((()=>[T(z,{title:"基础使用"},{default:C((()=>[T(n,{class:"swipe-action-container"},{default:C((()=>[T(n,{class:"swipe-action-item"},{default:C((()=>[T(Q,{onSelect:s},{default:C((()=>[(_(),j(S,null,$(3,(e=>T(Z,{key:e,options:o},{default:C((()=>[T(ee)])),_:2},1024))),64))])),_:1})])),_:1})])),_:1})])),_:1}),T(z,{title:"禁止第一项打开选项菜单"},{default:C((()=>[T(n,{class:"swipe-action-container"},{default:C((()=>[T(n,{class:"swipe-action-item"},{default:C((()=>[T(Q,null,{default:C((()=>[(_(),j(S,null,$(3,(e=>T(Z,{key:e,options:o,disabled:1===e},{default:C((()=>[T(ee)])),_:2},1032,["disabled"]))),64))])),_:1})])),_:1})])),_:1})])),_:1}),T(z,{title:"允许划出多个菜单"},{default:C((()=>[T(n,{class:"swipe-action-container"},{default:C((()=>[T(n,{class:"swipe-action-item"},{default:C((()=>[T(Q,{exclusive:!1},{default:C((()=>[(_(),j(S,null,$(3,(e=>T(Z,{key:e,options:o},{default:C((()=>[T(ee)])),_:2},1024))),64))])),_:1})])),_:1})])),_:1})])),_:1}),T(z,{title:"圆形图标菜单"},{default:C((()=>[T(n,{class:"swipe-action-container"},{default:C((()=>[T(n,{class:"swipe-action-item"},{default:C((()=>[T(Q,null,{default:C((()=>[(_(),j(S,null,$(3,(e=>T(Z,{key:e,options:a},{default:C((()=>[T(ee)])),_:2},1024))),64))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["is-h5-demo-page"])}}}),[["__scopeId","data-v-1f9f2181"]]);export{te as default};

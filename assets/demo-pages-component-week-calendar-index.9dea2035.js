import{b as e,d as a,V as t,W as l,X as s,c as u,r as n,L as d,y as o,N as r,a6 as c,w as i,H as m,a as v,o as f,e as p,f as _,g as h,h as k,i as g,j as w,u as y,F as x,K as C,n as b,a2 as V,C as I,k as D,S as j,m as S,t as N,q as $,_ as U,D as H,E as T,v as W}from"./index-80b03063.js";import{U as E,C as M}from"./event.5568c9d8.js";import{i as q}from"./is-number.acae358a.js";import{a as B}from"./index.b621671f.js";import{d as A}from"./index.2f07eab2.js";import{u as F}from"./index.38361e72.js";import{C as K}from"./custom-page.333ee63a.js";import{D as L}from"./demo-container.59d4003d.js";import{u as P}from"./index.e83e3f39.js";import"./title.e0fd12f0.js";const X=e({modelValue:Number,activeBgColor:String,activeTextColor:String,year:{type:[String,Number]},month:{type:[String,Number]},minDate:{type:[String,Number]},maxDate:{type:[String,Number]},customData:{type:a(Array),default:()=>[]}}),z=(e,a)=>{const t=A(),{componentDateItemId:l,dateItemContainerHeight:s}=(()=>{const e=o(),a=`twcdi-${r()}`,{getSelectorNodeInfo:t}=F(e),l=n(0);let s=0;const u=async()=>{try{const e=await t(`#${a}-0-0`);l.value=e.height||0,l.value+=c(16)}catch(e){if(s>10)return void(s=0);s++,setTimeout((()=>{u()}),150)}};return d((()=>{setTimeout((()=>{u()}),150)})),{componentDateItemId:a,dateItemContainerHeight:l}})(),v=u((()=>e.year?Number(e.year):t.year())),f=u((()=>e.month?Number(e.month):t.month()+1)),p=u((()=>e.minDate?Number(e.minDate):t.year()===v.value&&t.month()+1===f.value?t.date():1)),_=u((()=>e.maxDate?Number(e.maxDate):t.daysInMonth())),h=u((()=>{const a=new Map;return e.customData.forEach((e=>{a.set(e.date,e.desc)})),a})),k=n(["日","一","二","三","四","五","六"]),g=n([]),w=u((()=>B(e.modelValue,0))),y=n(0),x=(e,t=!0)=>{var l;a(E,e),t&&(l=e,g.value.forEach((e=>{e.forEach((e=>{"disabled"!==e.status&&(e.date===l?e.status="active":e.status="normal")}))})),m((()=>{a(M,e)})))},C=()=>{const e=[],a=A(`${v.value}/${f.value}/01`),t=a.daysInMonth(),l=a.day();for(let u=0;u<l;u++)e.push({date:0,status:"disabled"});for(let u=1;u<=t;u++){let a=u>=p.value&&u<=_.value?"normal":"disabled";u===w.value&&(a="active",y.value=Math.floor((u+l-1)/7));const t=h.value.get(u);e.push({date:u,status:a,desc:t})}const s=[];for(let u=0;u<e.length;u+=7)s.push(e.slice(u,u+7));g.value=s};(()=>{let a=!1,l=e.modelValue;l||(l=t.date(),a=!0),l<p.value&&(l=p.value,a=!0),l>_.value&&(l=_.value,a=!0),a&&x(l),m((()=>{C()}))})();return i((()=>e.customData),(()=>{C()}),{deep:!0}),{componentDateItemId:l,dateItemContainerHeight:s,weekCalendarData:g,weekText:k,currentSwiperIndex:y,dateItemClick:e=>{"active"!==e.status&&"disabled"!==e.status&&0!==e.date&&x(e.date)},switchWeek:e=>{if("prev"===e){if(0===y.value)return;y.value--}if("next"===e){if(y.value===g.value.length-1)return;y.value++}a("week-change",y.value)},swiperChangeWeek:e=>{y.value=e.detail.current,a("week-change",y.value)}}},G=U(v({__name:"week-calendar",props:X,emits:{[E]:e=>q(e),[M]:e=>q(e),"week-change":e=>q(e)},setup(e,{emit:a}){const n=e,{componentDateItemId:d,dateItemContainerHeight:o,weekCalendarData:r,weekText:c,currentSwiperIndex:i,dateItemClick:m,switchWeek:v,swiperChangeWeek:U}=z(n,a),{ns:H,itemClass:T,itemStyle:W}=(e=>{const a=t("week-calendar"),[n,d]=l(s(e,"activeBgColor"),"bg"),[o,r]=l(s(e,"activeTextColor"),"text"),c=u((()=>e=>{const t=[a.is(e)];return"active"===e&&(n.value&&t.push(n.value),o.value&&t.push(o.value)),t.join(" ")})),i=u((()=>e=>{const a={};return"active"===e&&(n.value||(a.backgroundColor=d.value||"var(--tn-color-primary)"),r.value?a.color=r.value:n.value||o.value||(a.color="var(--tn-color-white)")),a}));return{ns:a,itemClass:c,itemStyle:i}})(n);return(e,a)=>{const t=D,l=$,s=j;return f(),p(t,{class:C([y(H).b()])},{default:_((()=>[h(" 星期中文数据 "),k(t,{class:C([y(H).e("weeks")])},{default:_((()=>[(f(!0),g(x,null,w(y(c),((e,a)=>(f(),p(t,{key:a,class:C([y(H).e("week")])},{default:_((()=>[S(N(e),1)])),_:2},1032,["class"])))),128))])),_:1},8,["class"]),h(" 周日历数据 "),k(t,{class:C([y(H).e("data")]),style:I({height:""+(y(o)?`${y(o)}px`:"auto")})},{default:_((()=>[h(" 星期切换 "),y(i)>0?(f(),p(t,{key:0,class:C(["left",[y(H).e("data__week-btn")]]),onClick:a[0]||(a[0]=b((e=>y(v)("prev")),["stop"]))},{default:_((()=>[k(V,{name:"left"})])),_:1},8,["class"])):h("v-if",!0),y(i)<y(r).length-1?(f(),p(t,{key:1,class:C(["right",[y(H).e("data__week-btn")]]),onClick:a[1]||(a[1]=b((e=>y(v)("next")),["stop"]))},{default:_((()=>[k(V,{name:"right"})])),_:1},8,["class"])):h("v-if",!0),k(s,{class:C([y(H).e("data__swiper")]),"indicator-dots":!1,autoplay:!1,circular:!1,current:y(i),onChange:y(U)},{default:_((()=>[(f(!0),g(x,null,w(y(r),((e,a)=>(f(),p(l,{key:a,class:C([y(H).e("data__swiper-item")])},{default:_((()=>[k(t,{class:C([y(H).e("data__dates")])},{default:_((()=>[(f(!0),g(x,null,w(e,((e,l)=>(f(),p(t,{key:l,id:`${y(d)}-${a}-${l}`,class:C([y(H).e("data__date")]),onClick:b((a=>y(m)(e)),["stop"])},{default:_((()=>[k(t,{class:C(["date",[y(T)(e.status)]]),style:I(y(W)(e.status))},{default:_((()=>[e.date?(f(),p(t,{key:0,class:"date-value"},{default:_((()=>[k(t,{class:"value"},{default:_((()=>[S(N(e.date),1)])),_:2},1024),k(t,{class:"desc"},{default:_((()=>[S(N(e.desc),1)])),_:2},1024)])),_:2},1024)):h("v-if",!0)])),_:2},1032,["class","style"])])),_:2},1032,["id","class","onClick"])))),128))])),_:2},1032,["class"])])),_:2},1032,["class"])))),128))])),_:1},8,["class","current","onChange"])])),_:1},8,["class","style"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-72a4e846"]]),J=U(v({__name:"index",setup(e){H((()=>({}))),T((()=>({})));const{isDemoH5Page:a}=P(),t=n(),l=n(20),s=n(20),u=n(10),d=n(10),o=[{date:11,desc:"已签"},{date:12,desc:"漏签"},{date:13,desc:"已签"}],r=n(13);return(e,n)=>{const c=D,i=W;return f(),p(K,{title:"周日历","is-h5-demo-page":y(a)},{default:_((()=>[k(L,{title:"基础使用"},{default:_((()=>[k(c,{class:"week-calendar-container"},{default:_((()=>[k(c,{class:"week-calendar-item"},{default:_((()=>[k(G,{modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=e=>t.value=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),k(L,{title:"指定年月周日历"},{default:_((()=>[k(c,{class:"week-calendar-container"},{default:_((()=>[k(c,{class:"week-calendar-item"},{default:_((()=>[k(i,{class:"tn-gray_text tn-mb-sm"},{default:_((()=>[S("2023/02")])),_:1}),k(G,{modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=e=>l.value=e),year:"2023",month:"2"},null,8,["modelValue"])])),_:1}),k(c,{class:"week-calendar-item"},{default:_((()=>[k(i,{class:"tn-gray_text tn-mb-sm"},{default:_((()=>[S("2024/02")])),_:1}),k(G,{modelValue:s.value,"onUpdate:modelValue":n[2]||(n[2]=e=>s.value=e),year:"2024",month:"2"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),k(L,{title:"设置最小最大日期"},{default:_((()=>[k(c,{class:"week-calendar-container"},{default:_((()=>[k(c,{class:"week-calendar-item"},{default:_((()=>[k(G,{modelValue:u.value,"onUpdate:modelValue":n[3]||(n[3]=e=>u.value=e),"min-date":5,"max-date":20},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),k(L,{title:"自定义颜色"},{default:_((()=>[k(c,{class:"week-calendar-container"},{default:_((()=>[k(c,{class:"week-calendar-item"},{default:_((()=>[k(G,{modelValue:d.value,"onUpdate:modelValue":n[4]||(n[4]=e=>d.value=e),"min-date":1,"max-date":20,"active-bg-color":"tn-orangeyellow"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),k(L,{title:"自定义数据"},{default:_((()=>[k(c,{class:"week-calendar-container"},{default:_((()=>[k(c,{class:"week-calendar-item"},{default:_((()=>[k(G,{modelValue:r.value,"onUpdate:modelValue":n[5]||(n[5]=e=>r.value=e),"min-date":13,"max-date":20,"custom-data":o},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["is-h5-demo-page"])}}}),[["__scopeId","data-v-682400a7"]]);export{J as default};

import{b as e,r as t,w as a,y as s,N as o,H as l,a as r,V as i,o as n,e as c,f as u,g as p,h as m,i as h,j as d,u as g,F as f,K as j,k as v,a1 as _,_ as k,a7 as w}from"./index-80b03063.js";import"./index.b621671f.js";import{c as b}from"./clone-deep.2124c060.js";import{u as y}from"./index.38361e72.js";import{T as x}from"./lazy-load.2475d186.js";const $=e({data:{type:Array,default:()=>[]},mode:{type:String,values:["normal","calc"],default:"normal"}}),D=k(r({__name:"water-fall",props:$,setup(e,{expose:r}){const k=e,w=i("water-fall"),{componentId:x,leftData:$,rightData:D,resetWaterFall:I}=(e=>{const r=s(),i=`twf-${o()}`,{getSelectorNodeInfo:n}=y(r),c=t([]),u=t([]);let p=0,m=0;const h=async()=>{try{const e=await n(`#${i}-left`),t=await n(`#${i}-right`);p=e.height||p,m=t.height||m}catch(e){}};let d=[];const g=async t=>{if(t&&t.length)if("calc"===e.mode)await h(),p<=m?c.value.push(t.shift()):u.value.push(t.shift()),l((()=>{setTimeout((()=>{g(t)}),200)}));else if("normal"===e.mode){let e=!0;await h(),c.value.length>u.value.length&&(e=!1);let a=!1;p<m&&(a=!0),t.forEach(((t,s)=>{s%2==0&&e||a?c.value.push(t):u.value.push(t),e||(e=!0),a&&s>=2&&(a=!1)}))}};return a((()=>e.data),(e=>{if(!e)return;if(d.length===e.length)return;const t=b(e.slice(d.length));t.length||(c.value=[],u.value=[],p=0,m=0),l((()=>{d=e,g(t)}))}),{immediate:!0}),{componentId:i,leftData:c,rightData:u,resetWaterFall:()=>{e.data&&(c.value=[],u.value=[],p=0,m=0,l((()=>{d=e.data,g(e.data)})))}}})(k);return r({reset:I}),(e,t)=>{const a=v;return n(),c(a,{class:j([g(w).b()])},{default:u((()=>[p(" 左边数据 "),m(a,{id:`${g(x)}-left`,class:j(["left",[g(w).e("container")]])},{default:u((()=>[(n(!0),h(f,null,d(g($),((t,s)=>(n(),c(a,{key:s,class:j([g(w).e("item")])},{default:u((()=>[_(e.$slots,"left",{item:t,index:s},void 0,!0)])),_:2},1032,["class"])))),128))])),_:3},8,["id","class"]),p(" 右边数据 "),m(a,{id:`${g(x)}-right`,class:j(["right",[g(w).e("container")]])},{default:u((()=>[(n(!0),h(f,null,d(g(D),((t,s)=>(n(),c(a,{key:s,class:j([g(w).e("item")])},{default:u((()=>[_(e.$slots,"right",{item:t,index:s},void 0,!0)])),_:2},1032,["class"])))),128))])),_:3},8,["id","class"])])),_:3},8,["class"])}}}),[["__scopeId","data-v-45f64e0b"]]),I=()=>{const e=["https://resource.tuniaokj.com/images/shop/bag1.jpg","https://resource.tuniaokj.com/images/bless/bless-bottom.jpg","https://resource.tuniaokj.com/images/bless/bless-top.jpg","https://resource.tuniaokj.com/images/shop/computer1.jpg","https://resource.tuniaokj.com/images/login/2/login-top2.png","https://resource.tuniaokj.com/images/shop/cup1.jpg","https://resource.tuniaokj.com/images/shop/cup2.jpg","https://resource.tuniaokj.com/images/advertise/3.jpg","https://resource.tuniaokj.com/images/shop/watch2.jpg","https://resource.tuniaokj.com/images/advertise/9.jpg"],a=t([]),s=()=>{const t=a.value.length,s=e.length,o=[];for(let a=0;a<20;a++)o.push({id:t+a+1,url:e[Math.floor(Math.random()*s)]});a.value=a.value.concat(o)};return s(),w((()=>{s()})),{imageData:a}},F=k(r({__name:"index",props:{url:String},setup:e=>(t,a)=>{const s=v;return n(),c(s,{class:"water-fall-item"},{default:u((()=>[m(x,{src:e.url,mode:"widthFix"},null,8,["src"])])),_:1})}}),[["__scopeId","data-v-b7df4998"]]);export{D as T,F as W,I as u};

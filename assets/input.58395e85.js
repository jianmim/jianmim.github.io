import{aE as e,b as t,d as o,aO as a,$ as n,a4 as l,aa as s,V as r,W as u,X as i,c,a0 as d,Z as f,r as p,w as m,aP as h,H as v,a as y,o as g,e as b,f as w,K as x,u as S,a1 as C,g as $,i as k,h as I,F as E,a2 as B,n as j,C as _,m as L,t as F,k as V,aQ as W,ac as N,_ as O}from"./index-80b03063.js";import{i as P}from"./is-number.acae358a.js";import{U as T,I as A,C as H}from"./event.5568c9d8.js";import{t as R,u as z,b as q,c as K}from"./index.f7e3486a.js";import{a as Q}from"./index.b621671f.js";import{u as U}from"./index.0751853a.js";const X=/\s/;const Z=/^\s+/;function D(e){return e?e.slice(0,function(e){let t=e.length;for(;t--&&X.test(e.charAt(t)););return t}(e)+1).replace(Z,""):e}const G=new RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const J="\\ud800-\\udfff",M=`[${J}]`,Y="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ee="\\ud83c[\\udffb-\\udfff]",te=`[^${J}]`,oe="(?:\\ud83c[\\udde6-\\uddff]){2}",ae="[\\ud800-\\udbff][\\udc00-\\udfff]",ne=`${`(?:${Y}|${ee})`}?`,le="[\\ufe0e\\ufe0f]?",se=le+ne+`(?:\\u200d(?:${[te,oe,ae].join("|")})${le}${ne})*`,re=`(?:${[`${te+Y}?`,Y,oe,ae,M].join("|")})`,ue=new RegExp(`${ee}(?=${ee})|${re}${se}`,"g");function ie(e){return function(e){return G.test(e)}(e)?function(e){return e.match(ue)||[]}(e):function(e){return e.split("")}(e)}function ce(e){return e!=e}function de(e,t,o){return t==t?function(e,t,o){let a=o-1;const n=e.length;for(;++a<n;)if(e[a]===t)return a;return-1}(e,t,o):function(e,t,o,a=!1){const n=e.length;let l=o+(a?1:-1);for(;a?l--:++l<n;)if(t(e[l],l,e))return l;return-1}(e,ce,o)}function fe(e,t,o){const a=e.length;return o=void 0===o?a:o,!t&&o>=a?e:function(e,t,o){let a=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(o=o>n?n:o)<0&&(o+=n),n=t>o?0:o-t>>>0,t>>>=0;const l=Array.from({length:n});for(;++a<n;)l[a]=e[a+t];return l}(e,t,o)}function pe(t,o){if((t=R(t))&&void 0===o)return D(t);if(!t||!(o=e(o)))return t;const a=ie(t),n=ie(o),l=function(e,t){let o=-1;const a=e.length;for(;++o<a&&de(t,e[o],0)>-1;);return o}(a,n),s=function(e,t){let o=e.length;for(;o--&&de(t,e[o],0)>-1;);return o}(a,n)+1;return fe(a,l,s).join("")}const me=t({modelValue:{type:o([String,Number,Object]),default:""},size:a,height:{type:[String,Number]},disabled:Boolean,type:{type:String,values:["text","number","idcard","digit","textarea","password","select"],default:"text"},placeholder:String,textAlign:{type:String,values:["left","center","right"],default:"left"},placeholderStyle:n,border:{type:Boolean,default:!0},borderColor:{type:String,default:"tn-gray-disabled"},underline:Boolean,customStyle:n,customClass:String,maxlength:{type:Number,default:-1},autoHeight:{type:Boolean,default:!0},confirmType:{type:String,values:["","send","search","next","go","done","return"],default:"done"},focus:Boolean,clearable:Boolean,showPassword:{type:Boolean,default:!0},cursorSpacing:{type:Number,default:0},selectionStart:{type:Number,default:-1},selectionEnd:{type:Number,default:-1},showConfirmBar:{type:Boolean,default:!0},rightIcon:String,trim:{type:Boolean,default:!0},showWordLimit:{type:Boolean,default:!1},wordLimitColor:String,validateEvent:{type:Boolean,default:!0}}),he=O(y({__name:"input",props:me,emits:{[T]:e=>l(e)||P(e),[A]:e=>l(e)||P(e),[H]:e=>l(e)||P(e),click:()=>!0,focus:e=>s(e),blur:e=>s(e),clear:()=>!0,confirm:e=>l(e)||P(e)},setup(e,{emit:t}){const o=e,{inputText:a,needStatusIcon:n,validateState:l,validateIcon:s,passwordVisible:y,passwordIcon:O,showIcon:P,disabled:R,showWordLimit:X,currentWordCount:Z,togglePasswordVisible:D,inputInputEvent:G,inputFocusEvent:J,inputBlurEvent:M,clearClickEvent:Y,confirmEvent:ee,inputClickEvent:te}=((e,t)=>{const{form:o,formItem:a}=q(),n=p(String(e.modelValue??""));m((()=>e.modelValue),(t=>{var o;n.value=String(t??""),e.validateEvent&&(null==(o=null==a?void 0:a.validate)||o.call(a,"change").catch((e=>{})))}));const[l,s]=U(!1),r=c((()=>Q(null==o?void 0:o.statusIcon,!1))),u=c((()=>Q(null==a?void 0:a.validateState,""))),i=c((()=>u.value&&h[u.value])),d=c((()=>l.value?"eye-hide":"eye")),f=c((()=>{let t=!1;return u.value&&r.value&&i.value&&(t=!0),e.showPassword&&(t=!0),e.rightIcon&&(t=!0),e.clearable&&(t=!0),t})),y=K(e.disabled),g=c((()=>"textarea"===e.type&&!!(null==e?void 0:e.maxlength)&&!!(null==e?void 0:e.showWordLimit))),b=c((()=>{var t;return e.showWordLimit&&"textarea"===e.type&&(null==(t=n.value)?void 0:t.length)||0})),w=o=>{o=e.trim?pe(o):o,t(T,x(o)),v((()=>{t(A,x(o)),t(H,x(o))}))},x=t=>""===t?"":"number"===e.type||"digit"===e.type?Number.parseFloat(t):t;return{inputText:n,needStatusIcon:r,validateState:u,validateIcon:i,passwordVisible:l,passwordIcon:d,showIcon:f,disabled:y,showWordLimit:g,currentWordCount:b,togglePasswordVisible:s,inputInputEvent:e=>{const{value:t}=e.detail;w(t)},inputFocusEvent:e=>{t("focus",e)},inputBlurEvent:o=>{var n;t("blur",o),e.validateEvent&&(null==(n=null==a?void 0:a.validate)||n.call(a,"blur").catch((e=>{})))},clearClickEvent:()=>{y.value||(w(""),t("clear"))},confirmEvent:e=>{const{value:o}=e.detail;t("confirm",x(o))},inputClickEvent:()=>{"select"===e.type&&t("click")}}})(o,t),{ns:oe,inputClass:ae,inputStyle:ne,placeholderStyle:le,wordLimitClass:se,wordLimitStyle:re}=((e,t,o)=>{const a=r("input"),n=z(e.size),[l,s]=u(i(e,"borderColor"),"border"),[p,m]=u(i(e,"wordLimitColor"),"text"),h=c((()=>{const t={color:"var(--tn-text-color-secondary)"};return d(e.placeholderStyle)||Object.assign(t,e.placeholderStyle),Object.entries(t).map((([e,t])=>`${e}:${t}`)).join(";")})),v=c((()=>{const s=[a.b()];return o.value&&"select"!==e.type&&s.push(a.m("disabled")),n.value&&s.push(a.m(n.value)),e.textAlign&&s.push(a.m(`text-${e.textAlign}`)),"error"===t.value&&s.push(a.m("error")),(e.border||e.underline||"error"===t.value)&&(s.push(e.underline?"tn-border-bottom":"tn-border"),"error"===t.value?s.push("tn-red_border"):l.value&&s.push(l.value)),e.underline&&s.push(a.m("underline")),e.customClass&&s.push(e.customClass),s.join(" ")})),y=c((()=>{const o={};return e.height&&(o.height=f(e.height)),e.border&&s.value&&"error"!==t.value&&(o.borderColor=s.value),d(e.customStyle)||Object.assign(o,e.customStyle),o})),g=c((()=>{const e=[a.e("word-limit")];return p.value&&e.push(p.value),e.join(" ")})),b=c((()=>{const e={};return p.value||(e.color=m.value||"var(--tn-color-gray)"),e}));return{ns:a,inputClass:v,inputStyle:y,placeholderStyle:h,wordLimitClass:g,wordLimitStyle:b}})(o,l,R);return(e,t)=>{const o=V,r=W,u=N;return g(),b(o,{class:x([S(ae),`${"textarea"===e.type?S(oe).m("textarea"):S(oe).m("input")}`,S(oe).is("show-word-limit",S(X))]),style:_(S(ne)),onClick:S(te)},{default:w((()=>[e.$slots.prefix?(g(),b(o,{key:0,class:x([S(oe).em("slot","left")])},{default:w((()=>[C(e.$slots,"prefix",{},void 0,!0)])),_:3},8,["class"])):$("v-if",!0),$(" 文本域 "),"textarea"===e.type?(g(),b(r,{key:1,class:x([S(oe).e("base"),S(oe).e("textarea"),S(oe).is("custom-height",!!e.height)]),value:S(a),placeholder:e.placeholder,"placeholder-style":S(le),disabled:S(R),maxlength:e.maxlength,focus:e.focus,"confirm-type":e.confirmType,"auto-height":!e.height&&e.autoHeight,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"cursor-spacing":e.cursorSpacing,"show-confirm-bar":e.showConfirmBar,onInput:S(G),onFocus:S(J),onBlur:S(M),onConfirm:S(ee)},null,8,["class","value","placeholder","placeholder-style","disabled","maxlength","focus","confirm-type","auto-height","selection-start","selection-end","cursor-spacing","show-confirm-bar","onInput","onFocus","onBlur","onConfirm"])):(g(),k(E,{key:2},[$(" 文本框 "),I(u,{class:x([S(oe).e("base"),S(oe).e("input"),S(oe).em("input",e.type)]),type:"password"===e.type||"select"===e.type?"text":e.type,value:S(a),placeholder:e.placeholder,password:"password"===e.type&&!S(y),"placeholder-style":S(le),disabled:S(R)||"select"===e.type,maxlength:e.maxlength,focus:e.focus,"confirm-type":e.confirmType,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"cursor-spacing":e.cursorSpacing,"show-confirm-bar":e.showConfirmBar,onInput:S(G),onFocus:S(J),onBlur:S(M),onConfirm:S(ee)},null,8,["class","type","value","placeholder","password","placeholder-style","disabled","maxlength","focus","confirm-type","selection-start","selection-end","cursor-spacing","show-confirm-bar","onInput","onFocus","onBlur","onConfirm"])],2112)),$(" 图标 "),S(P)?(g(),b(o,{key:3,class:x([S(oe).e("icon")])},{default:w((()=>[$(" 右边图标 "),e.rightIcon?(g(),b(o,{key:0,class:x([S(oe).em("icon","custom")])},{default:w((()=>[I(B,{name:e.rightIcon},null,8,["name"])])),_:1},8,["class"])):$("v-if",!0),$(" 密码显示/隐藏 "),"password"===e.type&&e.showPassword?(g(),b(o,{key:1,class:x([S(oe).em("icon","password")]),onClick:j(S(D),["stop"])},{default:w((()=>[I(B,{name:S(O)},null,8,["name"])])),_:1},8,["class","onClick"])):e.clearable&&S(a)?(g(),k(E,{key:2},[$(" 清除按钮 "),I(o,{class:x([S(oe).em("icon","clear")]),onClick:j(S(Y),["stop"])},{default:w((()=>[I(B,{name:"close"})])),_:1},8,["class","onClick"])],2112)):$("v-if",!0),$(" 错误提示图标 "),S(l)&&S(s)&&S(n)?(g(),b(o,{key:3,class:x([S(oe).em("icon",`validate-${S(l)}`)])},{default:w((()=>[I(B,{name:S(s)},null,8,["name"])])),_:1},8,["class"])):$("v-if",!0)])),_:1},8,["class"])):$("v-if",!0),e.$slots.suffix?(g(),b(o,{key:4,class:x([S(oe).em("slot","right")])},{default:w((()=>[C(e.$slots,"suffix",{},void 0,!0)])),_:3},8,["class"])):$("v-if",!0),$(" 字数统计 "),S(X)?(g(),b(o,{key:5,class:x([S(se)]),style:_(S(re))},{default:w((()=>[L(F(S(Z))+" / "+F(e.maxlength),1)])),_:1},8,["class","style"])):$("v-if",!0)])),_:3},8,["class","style","onClick"])}}}),[["__scopeId","data-v-e6a26aa2"]]);export{he as T};

import{H as e,T as t,J as a,a6 as n,a7 as s,U as o,a8 as l,a9 as r,aa as i,a as c,ab as u,A as d,i as h,r as g,K as p,u as f,V as v,O as m,d as y,o as b,j as x,w as k,y as I,P as $,B as S,D as _,t as B,C as z,ac as w,M as C,a2 as T,$ as H,W as O,n as j,k as F,Q as N,R,x as W,m as P,z as U,F as A}from"./index-0wprmZGF.js";import{_ as E}from"./_plugin-vue_export-helper.Cg_lsX-a.js";const L=(e,t)=>null==e?t:e;const q=Object.prototype.toString;function M(e){return!0===e||!1===e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Boolean]"==q.call(e)}const V=/^\w*$/,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\./,D=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Q=/\\(\\)?/g,Y=/^(?:0|[1-9]\d*)$/,G=1/0,X=9007199254740991,Z=Symbol?Symbol.prototype:void 0,ee=Z?Z.toString:void 0;function te(t){if("string"==typeof t)return t;if(e(t))return ee?ee.call(t):"";const a=`${t}`;return"0"==a&&1/t==-Infinity?"-0":a}const ae=e=>!e&&0!==e||t(e)&&0===e.length||a(e)&&!Object.keys(e).length,ne=e=>e,se=(e,t)=>{if(!a(e)||a(o=e)&&o.__tnPropKey)return e;var o;const{values:l,required:r,default:i,type:c,validator:u}=e,d=l||u?a=>{let o=!1,r=[];if(l&&(r=Array.from(l),n(e,"default")&&r.push(i),o||(o=r.includes(a))),u&&(o||(o=u(a))),!o&&r.length>0){const e=[...new Set(r)].map((e=>JSON.stringify(e))).join(", ");s(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${e}], got value ${JSON.stringify(a)}.`)}return o}:void 0,h={type:c,required:!!r,validator:d,__tnPropKey:!0};return n(e,"default")&&(h.default=i),h},oe=e=>function(e){const t={};if(null==e)return t;for(const a of e)t[a[0]]=a[1];return t}(Object.entries(e).map((([e,t])=>[e,se(t,e)]))),le=[String],re=(e,t="rpx",a=!0)=>e?o(e)&&/(^calc)|(%|vw|vh|px|rpx|auto)$/.test(e)?e:`${e}${t}`:a?"":`0${t}`,ie=()=>Math.floor(1e4*Math.random());class ce extends Error{constructor(e){super(e),this.name="TuniaoUIError"}}function ue(e,t){throw new ce(`[${e}] ${t}`)}function de(e,t=1){const a=L(e,"/pages/index/index"),n=l();if(null==n?void 0:n.length){const e=n[0];return 1!==n.length||e.route&&(null==e?void 0:e.route)==a?(r({delta:t}),Promise.resolve()):he(a,"reLaunch")}return he(a,"reLaunch")}function he(e,t="navigateTo"){return new Promise(((a,n)=>{switch(t){case"navigateTo":d({url:e,success:()=>{a()},fail:e=>{n(e)}});break;case"redirectTo":u({url:e,success:()=>{a()},fail:e=>{n(e)}});break;case"reLaunch":c({url:e,success:()=>{a()},fail:e=>{n(e)}});break;case"switchTab":i({url:e,success:()=>{a()},fail:e=>{n(e)}})}}))}const ge=["","sm","lg","xl"],pe=["","sm","lg"],fe=["","primary","success","warning","danger","info"];se({type:[Boolean,void 0],default:void 0});const ve=se({type:String,values:ge,required:!1});se({type:String,values:pe,required:!1});const me=se({type:Object,default:()=>({})});se({type:[String,Number],default:()=>ie()}),se({type:Boolean,default:!0});const ye=oe({name:{type:le,required:!0},type:{type:String,values:fe,default:""},color:String,size:{type:[String,Number]},bold:Boolean,transparent:Boolean,transparentBg:String,imgMode:{type:String,values:["scaleToFill","aspectFit","aspectFill","widthFix","heightFix","top","bottom","center","left","right","top left","top right","bottom left","bottom right"],default:"aspectFill"},offsetTop:{type:[String,Number]},customStyle:me,customClass:String}),be=(e,t,a,n,s)=>{let o=`${e}-${t}`;return a&&(o+=`-${a}`),n&&(o+=`__${n}`),s&&(o+=`--${s}`),o},xe=Symbol("localContextKey"),ke=e=>{const t=(()=>{const e=h(xe,g("tn"));return p((()=>f(e)||"tn"))})();return{namespace:t,b:(a="")=>be(t.value,e,a,"",""),e:a=>a?be(t.value,e,"",a,""):"",m:a=>a?be(t.value,e,"","",a):"",be:(a,n)=>a&&n?be(t.value,e,a,n,""):"",em:(a,n)=>a&&n?be(t.value,e,"",a,n):"",bm:(a,n)=>a&&n?be(t.value,e,a,"",n):"",bem:(a,n,s)=>a&&n&&s?be(t.value,e,a,n,s):"",is:(e,...t)=>{const a=!(t.length>=1)||t[0];return e&&a?`is-${e}`:""},cssVar:e=>{const a={};for(const n in e)e[n]&&(a[`--${t.value}-${n}`]=e[n]);return a},cssVarName:e=>`--${t.value}-${e}`,cssVarBlock:a=>{const n={};for(const s in a)a[s]&&(n[`--${t.value}-${e}-${s}`]=a[s]);return n},cssVarBlockName:a=>`--${t.value}-${e}-${a}`}},Ie=(e,t="")=>{const a=g(""),n=g(""),s=/^(tn-|gradient)/,o=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{8}|[A-Fa-f0-9]{3})$|^rgb\(\d{1,3}(,\s?\d{1,3}){2}\)$|^rgba\(\d{1,3}(,\s?\d{1,3}){2},\s?0?\.?\d{1,}\)|transparent/i,l=e=>{if(a.value="",n.value="",void 0!==e){if(s.test(e)){if("bg"===t&&/.*gradient.*/.test(e)){const t=e.split("__")[1];return void(a.value=`tn-gradient-bg__${t}`)}a.value=`${e}_${t}`}o.test(e)&&(n.value=e)}};l(e.value),v((()=>e.value),(e=>{l(e)}));return[a,n,e=>{l(e)}]},$e=e=>({sizeType:p((()=>e?ge.includes(e)?"inner":"custom":"none"))}),Se=E(y({__name:"icon",props:ye,emits:{click:()=>!0},setup(e,{emit:t}){const a=e,n=t,{isImg:s,iconClass:o,iconStyle:l}=(e=>{const t=ke("icon"),[a,n,s]=Ie(m(e,"color"),"text"),[o]=Ie(m(e,"transparentBg"),"bg"),{sizeType:l}=$e(e.size),r=p((()=>!!(null==e?void 0:e.name)&&e.name.includes("/"))),i=p((()=>{const n=[];return n.push(t.b()),r.value?n.push(t.m("image")):(e.type&&n.push(`tn-type-${e.type}_text`),e.transparent?n.push("tn-text-transparent",o.value):a.value&&n.push(a.value),e.bold&&n.push("tn-text-bold")),"inner"===l.value&&n.push(t.m(e.size)),e.customClass&&n.push(e.customClass),n.join(" ")})),c=p((()=>{const t={};return r.value?"custom"===l.value&&e.size&&(t.width=t.height=re(e.size)):(n.value&&(t.color=n.value),"custom"===l.value&&e.size&&(t.fontSize=re(e.size))),e.offsetTop&&(t.transform=`translateY(${re(e.offsetTop)})`),ae(e.customStyle)||Object.assign(t,e.customStyle),t}));return{isImg:r,iconClass:i,iconStyle:c,updateColor:s}})(a),r=()=>{n("click")};return(e,t)=>{const a=S,n=_,i=B;return b(),x(i,{class:I([f(o)]),style:$(f(l)),onClick:r},{default:k((()=>[f(s)?(b(),x(a,{key:0,class:"image",src:e.name,mode:e.imgMode},null,8,["src","mode"])):(b(),x(n,{key:1,class:I(["icon",`tn-icon-${e.name}`])},null,8,["class"]))])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-9333daaa"]]),_e=oe({height:String,bgColor:String,textColor:String,frosted:Boolean,opacity:{type:Number,default:1},backIcon:{type:String,default:"left"},backText:String,homeIcon:{type:String,default:"home-capsule-fill"},bottomShadow:{type:Boolean,default:!0},safeAreaInsetRight:{type:Boolean,default:!0},center:{type:Boolean,default:!0},rightOperationWidth:String,beforeBack:{type:Function},beforeHome:{type:Function},indexUrl:{type:String,default:"/pages/index/index"},fixed:Boolean,placeholder:{type:Boolean,default:!0},zIndex:{type:Number,default:20090}});g(0);const Be=(e,t,a)=>{const n=ke("navbar"),s=ke("navbar-back"),{navBarInfo:o,navBarBoundingInfo:l}=(()=>{const e=z({height:0,statusHeight:45}),t=z({width:0,height:32,top:0,right:0,bottom:0,left:0,marginRight:0}),a=z({width:0,height:0,operationHeight:0}),n=()=>{try{const n=w(),{statusBarHeight:s,windowWidth:o,windowHeight:l,titleBarHeight:r}=n;let i=0;i=(s||0)+45,t.width=87,t.height=32,t.right=o-7,t.left=o-7-87,t.top=4,t.bottom=36,t.marginRight=7,e.height=i,e.statusHeight=s,a.width=o,a.height=l,a.operationHeight=l-i}catch(n){}};return n(),{navBarInfo:e,navBarBoundingInfo:t,systemScreenInfo:a,getSystemRectInfo:n}})(),[r,i]=Ie(m(e,"bgColor"),"bg"),[c,u]=Ie(m(e,"textColor"),"text"),d=p((()=>e.height?re(e.height):`${o.height}px`)),h=p((()=>{const t=[n.b()];return e.fixed&&t.push(n.m("fixed")),e.bottomShadow&&t.push("tn-shadow"),c.value&&t.push(c.value),t.join(" ")})),g=p((()=>{const t={};return t.height=d.value,e.zIndex&&(t.zIndex=e.zIndex),void 0!==(null==e?void 0:e.opacity)&&(t.opacity=e.opacity),u.value?t.color=u.value:r.value||c.value||(t.color="var(--tn-text-color-primary)"),t})),f=p((()=>{const t=[n.e("bg")];return r.value&&!e.frosted&&t.push(r.value),e.frosted&&t.push(n.em("bg","frosted")),t.join(" ")})),v=p((()=>{const t={};return e.zIndex&&(t.zIndex=e.zIndex-2),r.value||(t.backgroundColor=i.value||"var(--tn-color-white)"),e.frosted&&(t.backgroundColor=i.value||"rgba(255, 255, 255, 0.5)"),t})),y=p((()=>{const t={};return e.zIndex&&(t.zIndex=e.zIndex-2),t.height=d.value,t})),b=p((()=>{const t={};return e.zIndex&&(t.zIndex=e.zIndex),e.height||(t.top=`${o.statusHeight}px`,t.height=o.height-o.statusHeight+"px"),t})),x=p((()=>{const t={};return e.zIndex&&(t.zIndex=e.zIndex),t.width=`${l.width}px`,t.height=`${l.height}px`,t.left=`${l.marginRight}px`,t})),k=p((()=>{const n={};return e.zIndex&&(n.zIndex=e.zIndex-1),n.height=o.height-o.statusHeight+"px",e.height&&(n.height=re(e.height)),"none"!==t.value&&(n.paddingLeft=`${l.width+l.marginRight}px`),a.value&&e.rightOperationWidth?n.paddingRight=re(e.rightOperationWidth):(e.safeAreaInsetRight||a.value)&&(n.paddingRight=`${l.width+l.marginRight}px`),n})),I=p((()=>{const t={};return t.maxWidth=`${l.width}px`,e.zIndex&&(t.zIndex=e.zIndex),t.height=o.height-o.statusHeight+"px",e.height&&(t.height=re(e.height)),e.rightOperationWidth&&(t.width=re(e.rightOperationWidth)),t}));return{ns:n,backNs:s,navBarInfo:o,navbarClass:h,navbarStyle:g,navbarBgClass:f,navbarBgStyle:v,navbarPlaceholderStyle:y,navbarWrapperStyle:b,backStyle:x,contentStyle:k,rightOperationStyle:I}},ze=E(y({__name:"navbar",props:_e,emits:{initFinish:e=>!0},setup(e,{emit:t}){const a=e,n=t,{navbackButtonType:s,hasRightOperation:o,clickBackEvent:l,clickHomeEvent:r}=(e=>{const{slots:t}=C();return{navbackButtonType:p((()=>(null==t?void 0:t.back)?"custom":(null==e?void 0:e.backText)?"text":(null==e?void 0:e.backIcon)&&(null==e?void 0:e.homeIcon)?"multi":(null==e?void 0:e.backIcon)||(null==e?void 0:e.homeIcon)?"single":"none")),hasRightOperation:p((()=>!!(null==t?void 0:t.right))),clickBackEvent:()=>{const{beforeBack:t}=e;if(!t)return void de(e.indexUrl);const a=t();[T(a),M(a)].includes(!0)||ue("TnNavbar","beforeBack 返回值必须是 Promise 或者 Boolean 类型"),T(a)?a.then((t=>{t&&de(e.indexUrl)})).catch((e=>{})):a&&de(e.indexUrl)},clickHomeEvent:()=>{const{beforeHome:t}=e;if(!t)return void he(e.indexUrl,"reLaunch");const a=t();[T(a),M(a)].includes(!0)||ue("TnNavbar","beforeHome 返回值必须是 Promise 或者 Boolean 类型"),T(a)?a.then((t=>{t&&he(e.indexUrl,"reLaunch")})).catch((e=>{})):a&&he(e.indexUrl,"reLaunch")}}})(a),{ns:i,backNs:c,navBarInfo:u,navbarClass:d,navbarStyle:h,navbarBgClass:g,navbarBgStyle:v,navbarPlaceholderStyle:m,navbarWrapperStyle:y,backStyle:S,contentStyle:_,rightOperationStyle:z}=Be(a,s,o);return H((()=>{O((()=>{n("initFinish",u)}))})),(e,t)=>{const n=B;return b(),j(A,null,[F(n,{class:I([f(d)]),style:$(f(h))},{default:k((()=>[F(n,{class:I(f(g)),style:$(f(v))},null,8,["class","style"]),F(n,{class:I([f(i).e("wrapper")]),style:$(f(y))},{default:k((()=>["none"!==f(s)?(b(),x(n,{key:0,class:I([f(c).b()]),style:$(f(S))},{default:k((()=>[N(e.$slots,"back",{},(()=>["multi"===f(s)?(b(),x(n,{key:0,class:I([f(c).e("multi")])},{default:k((()=>[F(n,{class:I([f(c).e("multi__item")]),onClick:R(f(l),["stop"])},{default:k((()=>[F(Se,{name:a.backIcon},null,8,["name"])])),_:1},8,["class","onClick"]),F(n,{class:I([f(c).e("multi__item")]),onClick:R(f(r),["stop"])},{default:k((()=>[F(Se,{name:a.homeIcon},null,8,["name"])])),_:1},8,["class","onClick"])])),_:1},8,["class"])):W("",!0),"single"===f(s)?(b(),x(n,{key:1,class:I([f(c).e("single")]),onClick:t[0]||(t[0]=R((e=>{"back"===(a.backIcon?"back":"home")?l():r()}),["stop"]))},{default:k((()=>[a.backIcon?(b(),x(Se,{key:0,name:a.backIcon},null,8,["name"])):a.homeIcon?(b(),x(Se,{key:1,name:a.homeIcon},null,8,["name"])):W("",!0)])),_:1},8,["class"])):W("",!0),"text"===f(s)?(b(),x(n,{key:2,class:I([f(c).e("text")]),onClick:R(f(l),["stop"])},{default:k((()=>[F(n,{class:I([f(c).e("text__icon")])},{default:k((()=>[F(Se,{name:e.backIcon||"left"},null,8,["name"])])),_:1},8,["class"]),F(n,{class:I(["tn-text-ellipsis-1",[f(c).e("text__value")]])},{default:k((()=>[P(U(e.backText||"返回"),1)])),_:1},8,["class"])])),_:1},8,["class","onClick"])):W("",!0)]),!0)])),_:3},8,["class","style"])):W("",!0),e.$slots.default?(b(),x(n,{key:1,class:I([f(i).e("content"),{[f(i).em("content","center")]:a.center}]),style:$(f(_))},{default:k((()=>[N(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])):W("",!0),e.$slots.right?(b(),x(n,{key:2,class:I([f(i).e("right-operation")]),style:$(f(z))},{default:k((()=>[N(e.$slots,"right",{},void 0,!0)])),_:3},8,["class","style"])):W("",!0)])),_:3},8,["class","style"])])),_:3},8,["class","style"]),e.fixed&&e.placeholder?(b(),x(n,{key:0,class:I([f(i).e("placeholder")]),style:$(f(m))},null,8,["class","style"])):W("",!0)],64)}}}),[["__scopeId","data-v-7469c705"]]);export{G as I,X as M,ze as _,K as a,te as b,J as c,D as d,Q as e,Y as f,oe as g,fe as h,L as i,Ie as j,$e as k,re as l,ve as m,le as n,me as o,ae as p,Se as q,V as r,ne as s,pe as t,ke as u,M as v,ie as w,ue as x};

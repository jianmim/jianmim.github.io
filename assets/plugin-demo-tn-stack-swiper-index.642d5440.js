import{b as e,V as t,c as l,r as a,a5 as i,w as s,I as n,z as o,L as u,H as r,M as c,y as d,N as v,x as m,a as p,o as h,e as f,f as y,a1 as w,u as g,K as _,k as I,_ as x,i as D,C as S,g as T,n as k,F as b,D as j,E as H,h as z,j as R,p as $}from"./index-80b03063.js";import{U as C,C as N}from"./event.5568c9d8.js";import{i as B}from"./is-number.acae358a.js";import{u as V}from"./index.38361e72.js";import"./index.b621671f.js";import{u as F}from"./index.ec111f4e.js";import{C as W}from"./custom-page.333ee63a.js";import{D as A}from"./demo-container.59d4003d.js";import{u as M}from"./index.e83e3f39.js";import"./title.e0fd12f0.js";const O=e({modelValue:{type:Number,default:0},width:{type:String,default:"100%"},height:{type:String,default:"100%"},autoplay:{type:Boolean,default:!1},interval:{type:Number,default:5e3},switchRate:{type:Number,default:.1},scaleRate:{type:Number,default:.08},opacityRate:{type:Number,default:.18},slideDirection:{type:String,values:["horizontal","vertical"],default:"horizontal"},scaleDirection:{type:String,values:["top","bottom","left","right"],default:""}}),P={[C]:e=>B(e),[N]:e=>B(e),click:e=>B(e)},X=()=>({ns:t("stack-swiper"),itemNs:t("stack-swiper-item")}),Y=Symbol("stackSwiperContextKey"),K={transformOrigin:"left center"},U={transformOrigin:"center top"},q={transitionProperty:"transform opacity",transitionTimingFunction:"linear"},E=(e,t)=>{const m=d(),{getSelectorNodeInfo:p}=V(m),{children:h,addChild:f,removeChild:y}=F(),w=l((()=>h.value.length||0)),g=a(0),_=a(0),I=l((()=>"horizontal"===e.slideDirection?_.value*e.switchRate:"vertical"===e.slideDirection?g.value*e.switchRate:0)),{setSwiperItemStyleBySort:x,updateSwiperItemWithRateBySort:D,moveSwiperItemPositionByDistance:S}=((e,t,l,a)=>{const i=(t,l=0)=>1-e.scaleRate.value*(t+1+l),s=(i,s=0)=>{const n=(i+s)*(1+1/(t.value-1))*e.scaleRate.value;let o=l.value*n,u=a.value*n;return"vertical"===e.slideDirection.value?o=0:u=0,{x:o,y:u}},n=t=>({...Object.assign("horizontal"===e.slideDirection.value?K:U,...t)}),o=(e=0)=>Object.assign(q,{transitionDuration:`${e}ms`});return{setSwiperItemStyleBySort:(t,l=!1)=>{const a=i(t),{x:u,y:r}=s(t),c={transform:`translate(${u}px, ${r}px) scale(${a})`,opacity:1-e.opacityRate.value*t,zIndex:10-t};return{...n([o(l?300:0),c])}},updateSwiperItemWithRateBySort:(t,l)=>{const a=i(t,l),{x:u,y:r}=s(t,l),c={transform:`translate(${u}px, ${r}px) scale(${a})`,opacity:1-e.opacityRate.value*(t+l),zIndex:10-t};return{...n([o(),c])}},moveSwiperItemPositionByDistance:(t,l)=>{const a=i(0);let s=0,u=0;"horizontal"===e.slideDirection.value?s=t:u=t;const r={transform:`translate(${s}px, ${u}px) scale(${a})`,opacity:1,zIndex:void 0===l?10:l};return{...n([o(),r])}}}})(i(e),w,_,g);let T=null;const k=a(0),b=a(-1);s((()=>e.modelValue),(e=>{k.value=e||0}));const j=l((()=>(k.value+1)%w.value)),H=l((()=>(k.value-1+w.value)%w.value)),z=(l,a=!1)=>{b.value=l;const i=h.value.findIndex((e=>e.uid===l));t(C,i),void 0!==e.modelValue&&0!==e.modelValue||(k.value=i),a&&t(N,l)},R=e=>{if("reset"===e)return void B();const t="next"===e?h.value[j.value].uid:h.value[H.value].uid;z(t,!0),r((()=>{setTimeout((()=>{B()}),50)}))},$=()=>{!T&&e.autoplay&&(T=setInterval((()=>{R("next")}),e.interval))},B=(e=!1)=>{for(let t=0;t<w.value;t++){const l=W(t);h.value[t].style.value=x(l,!e)}},W=e=>e>=k.value?e-k.value:w.value-k.value+e,A=`tssc-${v()}`;let M=0;const O=async()=>{try{const e=await p(`#${A}`);g.value=e.height||0,_.value=e.width||0,r((()=>{B(!0),$()}))}catch(e){if(M>10)return void(M=0);setTimeout((()=>{O(),M++}),150)}};return n(Y,o({...e,sliderSwitchDistance:I,containerWidth:_,containerHeight:g,items:h,activeUid:b,addItem:t=>{void 0!==e.modelValue&&-1===b.value&&e.modelValue===h.value.length&&r((()=>{z(t.uid)})),f(t)},removeItem:y,switchSwiperItem:R,itemClickHandle:()=>{t("click",k.value)},itemTouchHandle:(t,l)=>{if("horizontal"===e.slideDirection){if(Math.abs(t)>_.value*(1-(e.scaleRate||0)))return;const l=t<0,a=t/(_.value-I.value);if(l)for(let e=0;e<w.value;e++){let l={};if(k.value===e)l=S(t);else{const t=W(e);l=D(t,a)}h.value[e].style.value=l}else for(let i=0;i<w.value;i++){let l={};if(i===H.value)l=S(-(_.value*(1-e.scaleRate)-t),11);else{const e=W(i);l=D(e,a)}h.value[i].style.value=l}}else if("vertical"===e.slideDirection){if(Math.abs(l)>g.value*(1-(e.scaleRate||0)))return;const t=l<0,a=l/(g.value-I.value);if(t)for(let e=0;e<w.value;e++){let t={};if(k.value===e)t=S(l);else{const l=W(e);t=D(l,a)}h.value[e].style.value=t}else for(let i=0;i<w.value;i++){let t={};if(i===H.value)t=S(-(g.value*(1-e.scaleRate)-l),11);else{const e=W(i);t=D(e,a)}h.value[i].style.value=t}}},pauseAutoplay:()=>{T&&e.autoplay&&(clearInterval(T),T=null)},startAutoplay:$})),u((()=>{r((()=>{O()}))})),c((()=>{T&&(clearInterval(T),T=null)})),{containerId:A}},L=()=>{const e=d(),{uid:t}=e,l=m(Y),i=a({}),s=()=>{null==l||l.itemClickHandle()};let n=!1,o=0,v=0,p=0;return u((()=>{r((()=>{null==l||l.addItem({uid:t,style:i})}))})),c((()=>{null==l||l.removeItem(t)})),{sliderDirection:null==l?void 0:l.slideDirection,swiperItemStyle:i,itemClickHandle:s,startTouchHandle:e=>{var t;e.preventDefault();const a=null==(t=e.changedTouches)?void 0:t[0];a&&(o=a.clientX,v=a.clientY,p=Date.now(),n=!0,null==l||l.pauseAutoplay())},moveTouchHandle:e=>{var t;const a=null==(t=e.changedTouches)?void 0:t[0];if(!n||!a)return;const{clientX:i,clientY:s}=a;if("horizontal"===(null==l?void 0:l.slideDirection)){const e=i-o;null==l||l.itemTouchHandle(e,0)}else if("vertical"===(null==l?void 0:l.slideDirection)){const e=s-v;null==l||l.itemTouchHandle(0,e)}},endTouchHandle:e=>{var t;const a=null==(t=e.changedTouches)?void 0:t[0];if(!n||!a)return;const{clientX:i,clientY:u}=a;let r=0;"horizontal"===(null==l?void 0:l.slideDirection)?r=i-o:"vertical"===(null==l?void 0:l.slideDirection)&&(r=u-v);Date.now()-p<300?Math.abs(r)<5?s():-r>((null==l?void 0:l.sliderSwitchDistance)||50)?null==l||l.switchSwiperItem("next"):r>((null==l?void 0:l.sliderSwitchDistance)||50)?null==l||l.switchSwiperItem("prev"):null==l||l.switchSwiperItem("reset"):"horizontal"===(null==l?void 0:l.slideDirection)&&-r>(null==l?void 0:l.containerWidth)*(2/3)||"vertical"===(null==l?void 0:l.slideDirection)&&-r>(null==l?void 0:l.containerHeight)*(2/3)?null==l||l.switchSwiperItem("next"):"horizontal"===(null==l?void 0:l.slideDirection)&&r>(null==l?void 0:l.containerWidth)*(2/3)||"vertical"===(null==l?void 0:l.slideDirection)&&r>(null==l?void 0:l.containerHeight)*(2/3)?null==l||l.switchSwiperItem("prev"):null==l||l.switchSwiperItem("reset"),o=0,v=0,n=!1,null==l||l.startAutoplay()}}},G=x(p({__name:"index",props:O,emits:P,setup(e,{emit:t}){const l=e,{containerId:a}=E(l,t),{ns:i}=X();return(e,t)=>{const l=I;return h(),f(l,{id:g(a),class:_([g(i).b()])},{default:y((()=>[w(e.$slots,"default",{},void 0,!0)])),_:3},8,["id","class"])}}}),[["__scopeId","data-v-4fabc216"]]),J=x(p({__name:"item",setup(e){const{sliderDirection:t,swiperItemStyle:l,startTouchHandle:a,moveTouchHandle:i,endTouchHandle:s}=L(),{itemNs:n}=X();return(e,o)=>{const u=I;return h(),D(b,null,["horizontal"===g(t)?(h(),f(u,{key:0,class:_([g(n).b()]),style:S(g(l)),onTouchstart:g(a),onTouchmove:g(i),onTouchend:g(s)},{default:y((()=>[w(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style","onTouchstart","onTouchmove","onTouchend"])):T("v-if",!0),"vertical"===g(t)?(h(),f(u,{key:1,class:_([g(n).b()]),style:S(g(l)),onTouchstart:k(g(a),["stop","prevent"]),onTouchmove:g(i),onTouchend:g(s)},{default:y((()=>[w(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style","onTouchstart","onTouchmove","onTouchend"])):T("v-if",!0)],64)}}}),[["__scopeId","data-v-6ea33b38"]]),Q=x(p({__name:"index",setup(e){j((()=>({}))),H((()=>({})));const{isDemoH5Page:t}=M(),l=["https://resource.tuniaokj.com/images/album/xiong1.jpg","https://resource.tuniaokj.com/images/album/xiong2.jpg","https://resource.tuniaokj.com/images/album/xiong3.jpg","https://resource.tuniaokj.com/images/album/xiong4.jpg"];return(e,a)=>{const i=$,s=I;return h(),f(W,{title:"堆叠轮播","is-h5-demo-page":g(t)},{default:y((()=>[z(A,{title:"垂直切换"},{default:y((()=>[z(s,{class:"stack-swiper-container"},{default:y((()=>[z(s,{class:"stack-swiper-item vertical"},{default:y((()=>[z(G,{"slide-direction":"vertical"},{default:y((()=>[(h(),D(b,null,R(l,((e,t)=>z(J,{key:t},{default:y((()=>[z(s,{class:"swiper-item"},{default:y((()=>[z(i,{class:"tn-image",src:e,mode:"aspectFill"},null,8,["src"])])),_:2},1024)])),_:2},1024))),64))])),_:1})])),_:1})])),_:1})])),_:1}),z(A,{title:"基础使用"},{default:y((()=>[z(s,{class:"stack-swiper-container"},{default:y((()=>[z(s,{class:"stack-swiper-item"},{default:y((()=>[z(G,null,{default:y((()=>[(h(),D(b,null,R(l,((e,t)=>z(J,{key:t},{default:y((()=>[z(s,{class:"swiper-item"},{default:y((()=>[z(i,{class:"tn-image",src:e,mode:"aspectFill"},null,8,["src"])])),_:2},1024)])),_:2},1024))),64))])),_:1})])),_:1})])),_:1})])),_:1}),z(A,{title:"自动播放"},{default:y((()=>[z(s,{class:"stack-swiper-container"},{default:y((()=>[z(s,{class:"stack-swiper-item"},{default:y((()=>[z(G,{autoplay:""},{default:y((()=>[(h(),D(b,null,R(l,((e,t)=>z(J,{key:t},{default:y((()=>[z(s,{class:"swiper-item"},{default:y((()=>[z(i,{class:"tn-image",src:e,mode:"aspectFill"},null,8,["src"])])),_:2},1024)])),_:2},1024))),64))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["is-h5-demo-page"])}}}),[["__scopeId","data-v-8a5ea36b"]]);export{Q as default};

import{b as a,a4 as e,V as t,W as s,X as l,c as o,r as n,w as r,aR as u,a as i,o as c,e as p,f as d,h as m,K as f,u as v,m as k,t as _,n as h,a2 as y,C,U as g,k as b,p as j,ac as w,_ as x,D as S,E as B,i as H,F as U,aS as T}from"./index-80b03063.js";import{T as I}from"./button.89b66e38.js";import{T as N}from"./popup.cb51da11.js";import{b as P}from"./index.b621671f.js";import{C as F}from"./custom-page.333ee63a.js";import{D as V}from"./demo-container.59d4003d.js";import{u as D}from"./index.e83e3f39.js";import{U as J}from"./index.5ab7a248.js";import{u as K}from"./upload-headers.4d942798.js";import"./loading.d4613e36.js";import"./debounce.73e35894.js";import"./overlay.66eb0f69.js";import"./event.5568c9d8.js";import"./install.171bae2e.js";import"./title.e0fd12f0.js";const A=a({show:{type:Boolean,default:!1},avatar:{type:String,default:""},nickname:{type:String,default:""},title:{type:String,default:"获取您的昵称、头像"},tips:{type:String,default:"获取用户头像、昵称，主要用于向用户提供具有辨识度的用户体验"},confirmText:{type:String,default:"保 存"},confirmBgColor:{type:String,default:"tn-type-primary"},confirmTextColor:{type:String,default:"tn-white"}}),E=x(i({__name:"index",props:A,emits:{"update:show":a=>P(a),"update:avatar":a=>e(a),"update:nickname":a=>e(a),confirm:(a,e)=>!0,"choose-avatar":a=>e(a)},setup(a,{emit:e}){const i=a,{showUpdatePopup:x,inputNickname:S,popupCloseHandle:B,nickNameInputHandle:H,submitBtnClickHandle:U,avatarClickHandle:T}=((a,e)=>{const t=n(!1),s=n(a.nickname);return r((()=>a.show),(a=>{t.value=a}),{immediate:!0}),{showUpdatePopup:t,inputNickname:s,nickNameInputHandle:a=>{const t=a.detail.value;s.value=t,e("update:nickname",t)},popupCloseHandle:()=>{e("update:show",!1)},submitBtnClickHandle:()=>{s.value&&a.avatar&&(e("confirm",s.value,a.avatar),e("update:show",!1))},avatarClickHandle:()=>{u({count:1,success:a=>{e("choose-avatar",a.tempFilePaths[0])}})}}})(i,e),{ns:I,submitBtnClass:P,submitBtnStyle:F}=(a=>{const e=t("update-user-info-popup"),[n,r]=s(l(a,"confirmBgColor"),"bg"),[u,i]=s(l(a,"confirmTextColor"),"text"),c=o((()=>{const a=[e.e("submit-btn")];return n.value&&a.push(n.value),u.value&&a.push(u.value),a.join(" ")})),p=o((()=>{const e={};return n.value||(e.backgroundColor=r.value||"var(--tn-color-primary)"),i.value?e.color=i.value:n.value||(e.color="var(--tn-color-white)"),a.avatar&&a.nickname||(e.backgroundColor="var(--tn-color-gray-disabled)",e.color="var(--tn-color-gray-dark)"),e}));return{ns:e,submitBtnClass:c,submitBtnStyle:p}})(i);return(a,e)=>{const t=b,s=j,l=w;return c(),p(N,{modelValue:v(x),"onUpdate:modelValue":e[0]||(e[0]=a=>g(x)?x.value=a:null),"open-direction":"bottom","close-btn":"","safe-area-inset-bottom":!1,onClose:v(B)},{default:d((()=>[m(t,{class:f([v(I).b()])},{default:d((()=>[m(t,{class:f([v(I).e("title")])},{default:d((()=>[k(_(a.title),1)])),_:1},8,["class"]),m(t,{class:f([v(I).e("tips")])},{default:d((()=>[k(_(a.tips),1)])),_:1},8,["class"]),m(t,{class:f([v(I).e("avatar")])},{default:d((()=>[m(t,{class:f([v(I).em("avatar","container")]),onClick:h(v(T),["stop"])},{default:d((()=>[a.avatar?(c(),p(s,{key:0,class:f([v(I).em("avatar","image")]),src:a.avatar,mode:"aspectFill"},null,8,["class","src"])):(c(),p(t,{key:1,class:f([v(I).em("avatar","empty")])},{default:d((()=>[m(y,{name:"clover-fill"})])),_:1},8,["class"])),m(t,{class:f([v(I).em("avatar","assist")])},{default:d((()=>[m(y,{name:"camera-fill"})])),_:1},8,["class"])])),_:1},8,["class","onClick"])])),_:1},8,["class"]),m(l,{class:f([v(I).e("nickname-input")]),value:v(S),type:"nickname",placeholder:"请输入昵称","placeholder-style":"color:var(--tn-color-gray);",onInput:v(H)},null,8,["class","value","onInput"]),m(t,{class:f([v(P)]),style:C(v(F)),onClick:h(v(U),["stop"])},{default:d((()=>[k(_(a.confirmText),1)])),_:1},8,["class","style","onClick"])])),_:1},8,["class"])])),_:1},8,["modelValue","onClose"])}}}),[["__scopeId","data-v-1e0bee2d"]]),L=x(i({__name:"index",setup(a){S((()=>({}))),B((()=>({})));const{isDemoH5Page:e}=D(),t=n(!1),s=n(""),l=n(""),o=a=>{T({url:J,header:K,fileType:"image",filePath:a,name:"file",success:a=>{const e=JSON.parse(a.data);l.value=e.data.url}})},r=()=>{t.value=!0};return(a,n)=>{const u=j,i=b;return c(),H(U,null,[m(F,{title:"更新用户信息弹框","is-h5-demo-page":v(e)},{default:d((()=>[m(V,{title:"用户信息"},{default:d((()=>[m(i,{class:"update-user-info-container"},{default:d((()=>[m(i,{class:"update-user-info-item"},{default:d((()=>[m(i,{class:"user-info"},{default:d((()=>[m(i,{class:"avatar"},{default:d((()=>[m(u,{class:"tn-image",src:l.value,mode:"aspectFill"},null,8,["src"])])),_:1}),m(i,{class:"nickname"},{default:d((()=>[k(_(s.value),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),m(V,{title:"基础使用"},{default:d((()=>[m(i,{class:"update-user-info-container"},{default:d((()=>[m(i,{class:"update-user-info-item"},{default:d((()=>[m(I,{onClick:r},{default:d((()=>[k("修改用户信息")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["is-h5-demo-page"]),m(E,{show:t.value,"onUpdate:show":n[0]||(n[0]=a=>t.value=a),nickname:s.value,"onUpdate:nickname":n[1]||(n[1]=a=>s.value=a),avatar:l.value,"onUpdate:avatar":n[2]||(n[2]=a=>l.value=a),onChooseAvatar:o},null,8,["show","nickname","avatar"])],64)}}}),[["__scopeId","data-v-54d4f6e2"]]);export{L as default};

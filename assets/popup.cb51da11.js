import{b as e,aw as o,V as t,c as s,W as a,X as i,Z as n,r,w as l,aj as p,y as u,a as c,u as d,o as m,e as v,f as h,g as y,h as b,a1 as f,K as g,n as C,a2 as D,C as B,k as w,_ as x}from"./index-80b03063.js";import{T as R,o as k}from"./overlay.66eb0f69.js";import{U as I}from"./event.5568c9d8.js";import{Z as S,b as z}from"./index.b621671f.js";import{w as N}from"./install.171bae2e.js";N(R);const T=e({modelValue:Boolean,openDirection:{type:String,values:["top","bottom","left","right","center"],default:"center"},width:{type:[String,Number]},height:{type:[String,Number]},bgColor:{type:String,default:"#fff"},radius:{type:[String,Number],default:15},overlay:{type:Boolean,default:!0},overlayOpacity:k.opacity,overlayCloseable:{type:Boolean,default:!0},closeBtn:Boolean,closeBtnPosition:{type:String,values:["left-top","right-top","left-bottom","right-bottom"],default:"right-top"},safeAreaInsetBottom:o,zIndex:{type:Number,default:S.popup},top:{type:[String,Number]}}),_=x(c({__name:"popup",props:T,emits:{[I]:e=>z(e),open:()=>!0,close:()=>!0},setup(e){const o=e,{iosDevice:c,showOverlay:x,showPopup:k,visiblePopup:S,onClickCloseBtn:z,onClickOverlay:N}=(e=>{const{emit:o}=u(),t=s((()=>{const e=p();return"ios"===e.osName||"macos"===e.osName})),a=r(!1),i=r(!1),n=r(!1);let c=!1;l((()=>e.modelValue),(s=>{s?(n.value=!0,t.value?setTimeout((()=>{i.value=!0,e.overlay&&(a.value=!0),c&&o("open")}),0):(i.value=!0,e.overlay&&(a.value=!0),c&&o("open"))):(i.value=!1,a.value=!1,setTimeout((()=>{n.value=!1}),250),c&&o("close")),c=!0}),{immediate:!0});const d=e=>{o(I,e)};return{iosDevice:t,showOverlay:a,showPopup:i,visiblePopup:n,updateModelValue:d,onClickCloseBtn:()=>{d(!1)},onClickOverlay:()=>{e.overlayCloseable&&d(!1)}}})(o),{ns:T,overlayZIndex:_,zIndex:j,popupContentClass:O,popupContentStyle:P}=(e=>{const o=t("popup"),r=s((()=>Number(e.zIndex))),l=s((()=>r.value-1)),[p,u]=a(i(e,"bgColor"),"bg"),c=s((()=>{const t=[o.e("content")];return e.openDirection&&t.push(o.em("content",e.openDirection)),"bottom"===e.openDirection&&e.safeAreaInsetBottom&&t.push("tn-u-safe-area"),p.value&&t.push(p.value),t.join(" ")})),d=s((()=>{const o={};return u.value&&(o.backgroundColor=u.value),e.radius&&(o.overflow="hidden","center"===e.openDirection&&(o.borderRadius=n(e.radius)),"top"===e.openDirection&&(o.borderBottomLeftRadius=n(e.radius),o.borderBottomRightRadius=n(e.radius)),"left"===e.openDirection&&(o.borderTopRightRadius=n(e.radius),o.borderBottomRightRadius=n(e.radius)),"right"===e.openDirection&&(o.borderTopLeftRadius=n(e.radius),o.borderBottomLeftRadius=n(e.radius)),"bottom"===e.openDirection&&(o.borderTopLeftRadius=n(e.radius),o.borderTopRightRadius=n(e.radius))),!e.top||"top"!==e.openDirection&&"left"!==e.openDirection&&"right"!==e.openDirection||(o.top=n(e.top,"px")),!e.width||"left"!==e.openDirection&&"right"!==e.openDirection&&"center"!==e.openDirection||(o.width=n(e.width)),!e.height||"top"!==e.openDirection&&"bottom"!==e.openDirection&&"center"!==e.openDirection||(o.height=n(e.height)),"left"!==e.openDirection&&"right"!==e.openDirection||e.top&&(o.height=`calc(100% - ${n(e.top,"px")})`),o.zIndex=r.value,o}));return{ns:o,zIndex:r,overlayZIndex:l,popupContentClass:c,popupContentStyle:d}})(o);return(e,o)=>{const t=w;return!d(c)||d(c)&&d(S)?(m(),v(t,{key:0,class:g([d(T).b(),d(T).is("show",d(k)),d(T).is("visible",d(S))]),style:B({zIndex:d(j)})},{default:h((()=>[y(" 遮罩层 "),b(R,{show:d(x),"z-index":d(_),opacity:e.overlayOpacity,onClick:d(N)},null,8,["show","z-index","opacity","onClick"]),y(" 弹框内容 "),b(t,{class:g([d(O)]),style:B(d(P))},{default:h((()=>[f(e.$slots,"default",{},void 0,!0),y(" 关闭按钮 "),e.closeBtn?(m(),v(t,{key:0,class:g([d(T).e("close-btn"),d(T).em("close-btn",e.closeBtnPosition)]),onClick:C(d(z),["stop"])},{default:h((()=>[f(e.$slots,"closeBtn",{},(()=>[b(D,{name:"close"})]),!0)])),_:3},8,["class","onClick"])):y("v-if",!0)])),_:3},8,["class","style"])])),_:3},8,["class","style"])):y("v-if",!0)}}}),[["__scopeId","data-v-0b59239b"]]);export{_ as T};

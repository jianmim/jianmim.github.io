import{b as e,aO as a,$ as t,d as s,a4 as i,V as l,W as n,X as o,c,Z as u,a0 as r,w as v,a8 as d,H as m,y as h,a as f,o as p,e as g,f as b,g as y,h as w,K as C,u as S,m as x,t as k,a2 as _,C as I,n as T,k as V,_ as j}from"./index-80b03063.js";import{T as B}from"./loading.d4613e36.js";import{b as E}from"./index.b621671f.js";import{i as z}from"./is-number.acae358a.js";import{U as N,C as q}from"./event.5568c9d8.js";import{u as O,c as $,b as F}from"./index.f7e3486a.js";const H=e({modelValue:{type:[String,Number,Boolean],default:!1},shape:{type:String,values:["square","round"],default:"round"},size:a,width:{type:[String,Number]},customStyle:t,customClass:String,disabled:Boolean,loading:Boolean,inactiveColor:String,activeColor:String,inactiveText:String,activeText:String,inactiveIcon:String,activeIcon:String,inactiveValue:{type:[String,Number,Boolean],default:!1},activeValue:{type:[String,Number,Boolean],default:!0},validateEvent:{type:Boolean,default:!0},beforeChange:{type:s(Function)}}),K=e=>({size:O(e.size),disabled:$(e.disabled)}),P=j(f({__name:"switch",props:H,emits:{[N]:e=>i(e)||z(e)||E(e),[q]:e=>i(e)||z(e)||E(e)},setup(e){const a=e,{selected:t,switchClickEvent:s}=(e=>{const{emit:a}=h(),{formItem:t}=F(),{disabled:s}=K(e),i=c((()=>e.modelValue===e.activeValue)),l=()=>{const t=e.modelValue===e.activeValue?e.inactiveValue:e.activeValue;a(N,t),m((()=>a(q,t)))};return v((()=>e.modelValue),(()=>{var a;e.validateEvent&&(null==(a=null==t?void 0:t.validate)||a.call(t,"change").catch((e=>{})))})),{selected:i,switchClickEvent:()=>{if(s.value||e.loading)return;const{beforeChange:a}=e;if(!a)return void l();const t=a();if(![d(t),E(t)].includes(!0))throw new Error("[TnSwitch] beforeChange 返回值必须是 Promise 或者 boolean");d(t)?t.then((e=>{e&&l()})).catch((e=>{console.warn(`[TnSwitch] some error occured: ${e}`)})):t&&l()}}})(a),{ns:i,switchClass:f,switchStyle:j}=((e,a)=>{const t=l("switch"),{size:s,disabled:i}=K(e),[v,d]=n(o(e,"activeColor"),"bg"),[m,h]=n(o(e,"inactiveColor"),"bg"),[f,p]=n(o(e,"activeColor"),"text"),[g,b]=n(o(e,"inactiveColor"),"text"),y=c((()=>{const l=[t.b()];return e.shape&&l.push(t.m(e.shape)),s.value&&l.push(t.m(s.value)),i.value&&l.push(t.m("disabled")),a.value?(v.value&&l.push(v.value),f.value&&l.push(f.value)):(m.value&&l.push(m.value),g.value&&l.push(g.value)),e.customClass&&l.push(e.customClass),l.join(" ")})),w=c((()=>{const t={};return e.width&&(t.width=u(e.width)),a.value?(!d.value&&v.value||(t.backgroundColor=d.value||"var(--tn-color-primary)"),p.value&&(t.color=p.value)):(!h.value&&m.value||(t.backgroundColor=h.value||"var(--tn-color-gray-disabled)"),b.value&&(t.color=b.value)),r(e.customStyle)||Object.assign(t,e.customStyle),t}));return{ns:t,switchClass:y,switchStyle:w}})(a,t);return(e,l)=>{const n=V;return p(),g(n,{class:C([S(f),{[S(i).is("content")]:a.activeText||a.activeIcon||a.inactiveText||a.inactiveIcon}]),style:I(S(j)),onClick:T(S(s),["stop"])},{default:b((()=>[y(" switch小圆圈 "),w(n,{class:C([S(i).e("dot"),{[S(i).em("dot","checked")]:S(t)}])},{default:b((()=>[w(B,{show:e.loading,animation:"",type:"info",mode:"flower"},null,8,["show"])])),_:1},8,["class"]),S(t)?(p(),g(n,{key:0,class:C([S(i).e("active-content")])},{default:b((()=>[y(" 激活时的文本 "),a.activeText&&!a.activeIcon?(p(),g(n,{key:0,class:C(["tn-text-ellipsis-1",[S(i).em("active-content","text")]])},{default:b((()=>[x(k(a.activeText),1)])),_:1},8,["class"])):y("v-if",!0),y(" 激活时的图标 "),a.activeIcon?(p(),g(n,{key:1,class:C([S(i).em("active-content","icon")])},{default:b((()=>[w(_,{name:a.activeIcon},null,8,["name"])])),_:1},8,["class"])):y("v-if",!0)])),_:1},8,["class"])):(p(),g(n,{key:1,class:C([S(i).e("inactive-content")])},{default:b((()=>[y(" 未激活时的文本 "),a.inactiveText&&!a.inactiveIcon?(p(),g(n,{key:0,class:C(["tn-text-ellipsis-1",[S(i).em("inactive-content","text")]])},{default:b((()=>[x(k(a.inactiveText),1)])),_:1},8,["class"])):y("v-if",!0),y(" 激活时的图标 "),a.inactiveIcon?(p(),g(n,{key:1,class:C([S(i).em("inactive-content","icon")])},{default:b((()=>[w(_,{name:a.inactiveIcon},null,8,["name"])])),_:1},8,["class"])):y("v-if",!0)])),_:1},8,["class"]))])),_:1},8,["class","style","onClick"])}}}),[["__scopeId","data-v-3bfdefaa"]]);export{P as T};

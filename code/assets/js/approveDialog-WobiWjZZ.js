import{k as G,r as f,p as z,t as u,x as n,M as _,D as l,A as e,O as x,T as i,F as V,S as d,B as H,C as K,a4 as k,a5 as w,y as v,G as I,E as P}from"./store-dof5ccn5.js";import{g as T,d as Q,a as W,u as X,b as Y}from"./licRecordInfo-PN0JhAPF.js";import{_ as Z}from"./_plugin-vue_export-helper-x3n3nnut.js";import"./index-zQlakb1H.js";import"./request-k9quR_KD.js";const ee={class:"licRecordInfo-container"},le={style:{color:"#fff"}},ae={class:"dialog-footer"},te=G({__name:"approveDialog",props:{title:{type:String,default:""}},emits:["reloadTable"],setup(S,{expose:h,emit:N}){var R=S;const E=N,D=f(),m=f(!1),a=f({}),L=f({machineCode:[{required:!0,message:"请输入机器码！",trigger:"blur"}],projectName:[{required:!0,message:"请输入申请项目名称！",trigger:"blur"}],userCount:[{required:!0,message:"请输入用户数目！",trigger:"blur"}],concurrencyCount:[{required:!0,message:"请输入并发数目！",trigger:"blur"}],giveState:[{required:!0,message:"请选择授权发放状态！",trigger:"change"}],systemType:[{required:!0,message:"请选择系统类型！",trigger:"change"}],licenseType:[{required:!0,message:"请选择授权方式 ！",trigger:"change"}]}),q=async p=>{let o=JSON.parse(JSON.stringify(p));o.id?a.value=(await Q(o.id)).data.result:a.value=o,m.value=!0},$=()=>{E("reloadTable"),m.value=!1},F=()=>{m.value=!1},C=async p=>{a.value.approveState=p,setTimeout(()=>{A()},200)},A=async()=>{D.value.validate(async(p,o)=>{if(console.log("ruleForm",a.value.approveState),p){let s=a.value;a.value.id==null||a.value.id==null||a.value.id==""||a.value.id==0?await W(s):await X(s),$()}else P({message:`表单有${Object.keys(o).length}处验证失败，请修改后再提交`,type:"error"})})},U=f([]);return(async()=>{let p=await Y();U.value=p.data.result??[]})(),z(async()=>{}),h({openDialog:q}),(p,o)=>{const s=u("el-form-item"),r=u("el-col"),g=u("el-option"),y=u("el-select"),B=u("el-date-picker"),j=u("el-input"),O=u("el-row"),M=u("el-form"),b=u("el-button"),J=u("el-dialog");return n(),_("div",ee,[l(J,{modelValue:m.value,"onUpdate:modelValue":o[7]||(o[7]=t=>m.value=t),width:800,draggable:""},{header:e(()=>[x("div",le,[x("span",null,i(V(R).title),1)])]),footer:e(()=>[x("span",ae,[l(b,{type:"primary",onClick:o[5]||(o[5]=t=>C("1"))},{default:e(()=>[d("通过")]),_:1}),l(b,{type:"danger",plain:"",onClick:o[6]||(o[6]=t=>C("2"))},{default:e(()=>[d("拒绝")]),_:1}),l(b,{onClick:F},{default:e(()=>[d("取 消")]),_:1})])]),default:e(()=>[l(M,{model:a.value,ref_key:"ruleFormRef",ref:D,"label-width":"auto",rules:L.value},{default:e(()=>[l(O,{gutter:35},{default:e(()=>[l(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:e(()=>[l(s,{label:"ID",prop:"id"},{default:e(()=>[d(i(a.value.id),1)]),_:1})]),_:1}),H(l(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:e(()=>[l(s,{label:"申请人ID",prop:"applyUserId"},{default:e(()=>[l(y,{clearable:"",filterable:"",modelValue:a.value.applyUserId,"onUpdate:modelValue":o[0]||(o[0]=t=>a.value.applyUserId=t),placeholder:"请选择申请人ID",disabled:""},{default:e(()=>[(n(!0),_(k,null,w(U.value,(t,c)=>(n(),v(g,{key:c,value:t.value,label:t.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},512),[[K,a.value.id>0]]),l(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:e(()=>[l(s,{label:"机器码",prop:"machineCode"},{default:e(()=>[d(i(a.value.machineCode),1)]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:e(()=>[l(s,{label:"申请项目名称",prop:"projectName"},{default:e(()=>[d(i(a.value.projectName),1)]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:e(()=>[l(s,{label:"备注",prop:"remark"},{default:e(()=>[d(i(a.value.remark),1)]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:e(()=>[l(s,{label:"用户数目",prop:"userCount"},{default:e(()=>[d(i(a.value.userCount),1)]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:e(()=>[l(s,{label:"并发数目",prop:"concurrencyCount"},{default:e(()=>[d(i(a.value.concurrencyCount),1)]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:e(()=>[l(s,{label:"系统类型",prop:"systemType"},{default:e(()=>[l(y,{clearable:"",modelValue:a.value.systemType,"onUpdate:modelValue":o[1]||(o[1]=t=>a.value.systemType=t),placeholder:"请选择系统类型",disabled:""},{default:e(()=>[(n(!0),_(k,null,w(V(T)("licrecordinfo_systemtype"),(t,c)=>(n(),v(g,{key:c,value:t.code,label:`[${t.code}] ${t.value}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:e(()=>[l(s,{label:"授权方式 ",prop:"licenseType"},{default:e(()=>[l(y,{clearable:"",modelValue:a.value.licenseType,"onUpdate:modelValue":o[2]||(o[2]=t=>a.value.licenseType=t),placeholder:"请选择授权方式 ",disabled:""},{default:e(()=>[(n(!0),_(k,null,w(V(T)("licrecordinfo_licensetype"),(t,c)=>(n(),v(g,{key:c,value:t.code,label:`[${t.code}] ${t.value}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:e(()=>[a.value.licenseType=="2"?(n(),v(s,{key:0,label:"授权到期时间",prop:"licenseExpiration"},{default:e(()=>[l(B,{modelValue:a.value.licenseExpiration,"onUpdate:modelValue":o[3]||(o[3]=t=>a.value.licenseExpiration=t),type:"date",placeholder:"授权到期时间"},null,8,["modelValue"])]),_:1})):I("",!0),a.value.licenseType!="2"?(n(),v(s,{key:1,label:"授权到期时间",prop:"licenseExpiration"},{default:e(()=>[d(i(a.value.licenseExpiration),1)]),_:1})):I("",!0)]),_:1}),l(r,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:e(()=>[l(s,{label:"审批备注",prop:"approveRemark"},{default:e(()=>[l(j,{modelValue:a.value.approveRemark,"onUpdate:modelValue":o[4]||(o[4]=t=>a.value.approveRemark=t),placeholder:"请输入审批备注",maxlength:"255","show-word-limit":"",type:"textarea",rows:3,clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),pe=Z(te,[["__scopeId","data-v-58080d8c"]]);export{pe as default};

import{k as D,r as k,s as H,u as j,a0 as U,L as V,p as q,q as z,aO as E,w as W,t as O,x as m,M as f,O as r,F as c,D as y,A as Z,a4 as G,a5 as J,P as v,T as R,n as K}from"./store-dof5ccn5.js";import{Z as Q,u as X,e as a}from"./index-zQlakb1H.js";import{l as Y}from"./logo-mini-gwMegSab.js";import{_ as ee}from"./_plugin-vue_export-helper-x3n3nnut.js";const te={class:"layout-columns-aside"},se={class:"layout-logo"},le=["src"],ne=["onClick","onMouseenter","title"],oe={class:"columns-vertical-title font12"},ie=["href"],ae={class:"columns-vertical-title font12"},re=D({name:"layoutColumnsAside"}),ue=D({...re,setup(ce){const S=k([]),M=k(),h=Q(),x=X(),{routesList:T,isColumnsMenuHover:_,isColumnsNavHover:A}=H(h),{themeConfig:i}=H(x),g=j(),I=U(),n=V({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),P=e=>{if(e===void 0)return!1;n.liIndex=e,M.value.style.top=`${S.value[e].offsetTop+n.difference}px`},b=async e=>{var o;let{path:t,redirect:s}=e;if(s)p(e.k),g.path.startsWith(s)?a.emit("setSendColumnsChildren",u(s)):I.push(s);else if(!e.children)I.push(t);else{const l=u(t);if(Object.keys(l).length<=0)return!1;p((o=l.item)==null?void 0:o.k),a.emit("setSendColumnsChildren",l)}e.children?e.children.length>1&&(i.value.isCollapse=!1):i.value.isCollapse=!0},w=(e,t)=>{if(!i.value.isColumnsMenuHoverPreload)return!1;let{path:s}=e;n.liOldPath=s,n.liOldIndex=t,n.liHoverIndex=t,a.emit("setSendColumnsChildren",u(s)),h.setColumnsMenuHover(!1),h.setColumnsNavHover(!0)},F=async()=>{if(!i.value.isColumnsMenuHoverPreload)return!1;await h.setColumnsNavHover(!1),setTimeout(()=>{!_&&!A&&a.emit("restoreDefault")},100)},p=e=>{K(()=>{P(e)})},L=e=>{var s,o;const t=u(e);return!((s=t.item)!=null&&s.redirect)&&t.children.length==0||(o=t.item)!=null&&o.redirect&&t.children.length<=1?i.value.isCollapse=!0:i.value.isCollapse=!1,t},N=()=>{var t;n.columnsAsideList=$(T.value);const e=L(g.path);p((t=e.item)==null?void 0:t.k),setTimeout(()=>{a.emit("setSendColumnsChildren",e)},500)},u=e=>{const t=e.split("/");let s={children:[]};return n.columnsAsideList.map((o,l)=>{o.path===`/${t[1]}`&&(o.k=l,s.item={...o},s.children=[{...o}],o.children&&(s.children=o.children))}),s},$=e=>e.filter(t=>{var s;return!((s=t.meta)!=null&&s.isHide)}).map(t=>(t=Object.assign({},t),t.children&&(t.children=$(t.children)),t)),B=e=>{n.routeSplit=e.split("/"),n.routeSplit.shift();const t=`/${n.routeSplit[0]}`,s=n.columnsAsideList.find(o=>o.path===t);if(!s)return!1;setTimeout(()=>{p(s.k)},0)};return q(()=>{N(),a.on("restoreDefault",()=>{n.liOldIndex=null,n.liOldPath=null})}),z(()=>{a.off("restoreDefault",()=>{})}),E(e=>{const t=L(e.path);B(e.path),a.emit("setSendColumnsChildren",t)}),W([()=>i.value.columnsAsideStyle,_,A],()=>{if(i.value.columnsAsideStyle==="columnsRound"?n.difference=3:n.difference=0,!_.value&&!A.value)n.liHoverIndex=null,a.emit("setSendColumnsChildren",u(g.path));else{if(n.liHoverIndex=n.liOldIndex,!n.liOldPath)return!1;a.emit("setSendColumnsChildren",u(n.liOldPath))}},{deep:!0}),(e,t)=>{const s=O("SvgIcon"),o=O("el-scrollbar");return m(),f("div",te,[r("div",se,[r("img",{src:c(Y),class:"layout-logo-medium-img"},null,8,le)]),y(o,null,{default:Z(()=>[r("ul",{onMouseleave:t[0]||(t[0]=l=>F())},[(m(!0),f(G,null,J(n.columnsAsideList,(l,d)=>(m(),f("li",{key:d,onClick:C=>b(l),onMouseenter:C=>w(l,d),ref_for:!0,ref:C=>{C&&(S.value[d]=C)},class:v({"layout-columns-active":n.liIndex===d,"layout-columns-hover":n.liHoverIndex===d}),title:e.$t(l.meta.title)},[!l.meta.isLink||l.meta.isLink&&l.meta.isIframe?(m(),f("div",{key:0,class:v(c(i).columnsAsideLayout)},[y(s,{name:l.meta.icon},null,8,["name"]),r("div",oe,R(e.$t(l.meta.title)&&e.$t(l.meta.title).length>=4?e.$t(l.meta.title).substr(0,c(i).columnsAsideLayout==="columns-vertical"?4:3):e.$t(l.meta.title)),1)],2)):(m(),f("div",{key:1,class:v(c(i).columnsAsideLayout)},[r("a",{href:l.meta.isLink,target:"_blank"},[y(s,{name:l.meta.icon},null,8,["name"]),r("div",ae,R(e.$t(l.meta.title)&&e.$t(l.meta.title).length>=4?e.$t(l.meta.title).substr(0,c(i).columnsAsideLayout==="columns-vertical"?4:3):e.$t(l.meta.title)),1)],8,ie)],2))],42,ne))),128)),r("div",{ref_key:"columnsAsideActiveRef",ref:M,class:v(c(i).columnsAsideStyle)},null,2)],32)]),_:1})])}}}),pe=ee(ue,[["__scopeId","data-v-0a8e36a4"]]);export{pe as default};

import{k as J,r as p,p as z,t as u,x as d,M as f,D as e,A as l,O as y,T as _,F as x,S as c,B as G,C as H,a4 as V,a5 as w,E as K,y as U}from"./store-dof5ccn5.js";import{g as h,d as P,a as Q,u as W,b as X}from"./licRecordInfo-PN0JhAPF.js";import{_ as Y}from"./_plugin-vue_export-helper-x3n3nnut.js";import"./index-zQlakb1H.js";import"./request-k9quR_KD.js";const Z={class:"licRecordInfo-container"},ee={style:{color:"#fff"}},le={class:"dialog-footer"},ae=J({__name:"editDialog",props:{title:{type:String,default:""}},emits:["reloadTable"],setup(T,{expose:S,emit:L}){var N=T;const q=L,D=p(),m=p(!1),a=p({}),E=p({machineCode:[{required:!0,message:"请输入机器码！",trigger:"blur"}],projectName:[{required:!0,message:"请输入申请项目名称！",trigger:"blur"}],userCount:[{required:!0,message:"请输入用户数目！",trigger:"blur"}],concurrencyCount:[{required:!0,message:"请输入并发数目！",trigger:"blur"}],giveState:[{required:!0,message:"请选择授权发放状态！",trigger:"change"}],systemType:[{required:!0,message:"请选择系统类型！",trigger:"change"}],licenseType:[{required:!0,message:"请选择授权方式 ！",trigger:"change"}]}),R=async n=>{let t=JSON.parse(JSON.stringify(n));t.id?a.value=(await P(t.id)).data.result:a.value=t,m.value=!0},j=()=>{q("reloadTable"),m.value=!1},A=()=>{m.value=!1},B=async()=>{D.value.validate(async(n,t)=>{if(n){let s=a.value;a.value.id==null||a.value.id==null||a.value.id==""||a.value.id==0?await Q(s):await W(s),j()}else K({message:`表单有${Object.keys(t).length}处验证失败，请修改后再提交`,type:"error"})})},C=p([]);return(async()=>{let n=await X();C.value=n.data.result??[]})(),z(async()=>{}),S({openDialog:R}),(n,t)=>{const s=u("el-form-item"),r=u("el-col"),g=u("el-option"),v=u("el-select"),b=u("el-input"),k=u("el-input-number"),F=u("el-date-picker"),$=u("el-row"),O=u("el-form"),I=u("el-button"),M=u("el-dialog");return d(),f("div",Z,[e(M,{modelValue:m.value,"onUpdate:modelValue":t[9]||(t[9]=o=>m.value=o),width:800,draggable:""},{header:l(()=>[y("div",ee,[y("span",null,_(x(N).title),1)])]),footer:l(()=>[y("span",le,[e(I,{onClick:A},{default:l(()=>[c("取 消")]),_:1}),e(I,{type:"primary",onClick:B},{default:l(()=>[c("确 定")]),_:1})])]),default:l(()=>[e(O,{model:a.value,ref_key:"ruleFormRef",ref:D,"label-width":"auto",rules:E.value},{default:l(()=>[e($,{gutter:35},{default:l(()=>[e(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(s,{label:"ID",prop:"id"},{default:l(()=>[c(_(a.value.id),1)]),_:1})]),_:1}),G(e(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(s,{label:"申请人ID",prop:"applyUserId"},{default:l(()=>[e(v,{clearable:"",filterable:"",modelValue:a.value.applyUserId,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.applyUserId=o),placeholder:"请选择申请人ID"},{default:l(()=>[(d(!0),f(V,null,w(C.value,(o,i)=>(d(),U(g,{key:i,value:o.value,label:o.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},512),[[H,a.value.id>0]]),e(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(s,{label:"机器码",prop:"machineCode"},{default:l(()=>[e(b,{modelValue:a.value.machineCode,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.machineCode=o),placeholder:"请输入机器码",maxlength:"255","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:l(()=>[e(s,{label:"申请项目名称",prop:"projectName"},{default:l(()=>[e(b,{modelValue:a.value.projectName,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.projectName=o),placeholder:"请输入申请项目名称",maxlength:"255","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:l(()=>[e(s,{label:"备注",prop:"remark"},{default:l(()=>[e(b,{modelValue:a.value.remark,"onUpdate:modelValue":t[3]||(t[3]=o=>a.value.remark=o),placeholder:"请输入备注",maxlength:"255","show-word-limit":"",type:"textarea",rows:2,clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(s,{label:"用户数目",prop:"userCount"},{default:l(()=>[e(k,{modelValue:a.value.userCount,"onUpdate:modelValue":t[4]||(t[4]=o=>a.value.userCount=o),placeholder:"请输入用户数目",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(s,{label:"并发数目",prop:"concurrencyCount"},{default:l(()=>[e(k,{modelValue:a.value.concurrencyCount,"onUpdate:modelValue":t[5]||(t[5]=o=>a.value.concurrencyCount=o),placeholder:"请输入并发数目",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(s,{label:"系统类型",prop:"systemType"},{default:l(()=>[e(v,{clearable:"",modelValue:a.value.systemType,"onUpdate:modelValue":t[6]||(t[6]=o=>a.value.systemType=o),placeholder:"请选择系统类型"},{default:l(()=>[(d(!0),f(V,null,w(x(h)("licrecordinfo_systemtype"),(o,i)=>(d(),U(g,{key:i,value:o.code,label:`[${o.code}] ${o.value}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(s,{label:"授权方式 ",prop:"licenseType"},{default:l(()=>[e(v,{clearable:"",modelValue:a.value.licenseType,"onUpdate:modelValue":t[7]||(t[7]=o=>a.value.licenseType=o),placeholder:"请选择授权方式 "},{default:l(()=>[(d(!0),f(V,null,w(x(h)("licrecordinfo_licensetype"),(o,i)=>(d(),U(g,{key:i,value:o.code,label:`[${o.code}] ${o.value}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(s,{label:"授权到期时间",prop:"licenseExpiration"},{default:l(()=>[e(F,{modelValue:a.value.licenseExpiration,"onUpdate:modelValue":t[8]||(t[8]=o=>a.value.licenseExpiration=o),type:"date",placeholder:"授权到期时间"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(s,{label:"发放授权时间",prop:"giveDate"},{default:l(()=>[c(_(a.value.giveDate),1)]),_:1})]),_:1}),e(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:l(()=>[e(s,{label:"新授权码 ",prop:"newLicense"},{default:l(()=>[c(_(a.value.newLicense),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),ne=Y(ae,[["__scopeId","data-v-a0fee231"]]);export{ne as default};

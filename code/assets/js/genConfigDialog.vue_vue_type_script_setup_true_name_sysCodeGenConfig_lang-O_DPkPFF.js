import{B as ce,d as H,R as K,g as z,e as X,t as pe,x as he}from"./index-lw7p-_pG.js";import{_ as me}from"./fkDialog.vue_vue_type_script_setup_true_name_sysCodeGenFk_lang-tzAheGMb.js";import{_ as fe}from"./treeDialog.vue_vue_type_script_setup_true_name_sysCodeGenTree_lang-oJm2FaN3.js";import{b as $,k as ue,r as ie,L as ye,p as we,q as ve,t as W,a6 as Se,x as Q,M,D as v,A as V,O as le,S as re,B as Ce,y as Y,a4 as Z,a5 as ee}from"./store-mQZkmHj-.js";import{S as ne}from"./sys-dict-data-api-XxUIrrBV.js";const ae=function(o){return{apiSysCodeGenConfigDetailGet:async(s,l,r,i,d,e,m,S,w,h,C,f,k,G,g,U,P,c,u,y,L,p,b,T,_,E,A,R,D,x,q,t={})=>{const n="/api/sysCodeGenConfig/detail",O=new URL(n,"https://example.com");let F;o&&(F=o.baseOptions);const N={method:"GET",...F,...t},I={},a={};if(o&&o.accessToken){const B=typeof o.accessToken=="function"?await o.accessToken():await o.accessToken;I.Authorization="Bearer "+B}s!==void 0&&(a.Id=s),l!==void 0&&(a.CodeGenId=l),r!==void 0&&(a.ColumnName=r),i!==void 0&&(a.PropertyName=i),d!==void 0&&(a.ColumnLength=d),e!==void 0&&(a.LowerPropertyName=e),m!==void 0&&(a.ColumnComment=m),S!==void 0&&(a.NetType=S),w!==void 0&&(a.EffectType=w),h!==void 0&&(a.FkEntityName=h),C!==void 0&&(a.FkTableName=C),f!==void 0&&(a.LowerFkEntityName=f),k!==void 0&&(a.FkColumnName=k),G!==void 0&&(a.LowerFkColumnName=G),g!==void 0&&(a.FkColumnNetType=g),U!==void 0&&(a.DictTypeCode=U),P!==void 0&&(a.WhetherRetract=P),c!==void 0&&(a.WhetherRequired=c),u!==void 0&&(a.WhetherSortable=u),y!==void 0&&(a.QueryWhether=y),L!==void 0&&(a.QueryType=L),p!==void 0&&(a.WhetherTable=p),b!==void 0&&(a.WhetherAddUpdate=b),T!==void 0&&(a.ColumnKey=T),_!==void 0&&(a.DataType=_),E!==void 0&&(a.WhetherCommon=E),A!==void 0&&(a.TableNickName=A),R!==void 0&&(a.DisplayColumn=R),D!==void 0&&(a.ValueColumn=D),x!==void 0&&(a.PidColumn=x),q!==void 0&&(a.OrderNo=q);const j=new URLSearchParams(O.search);for(const B in a)j.set(B,a[B]);for(const B in t.params)j.set(B,t.params[B]);O.search=new URLSearchParams(j).toString();let J=F&&F.headers?F.headers:{};return N.headers={...I,...J,...t.headers},{url:O.pathname+O.search+O.hash,options:N}},apiSysCodeGenConfigListGet:async(s,l,r,i,d,e,m,S,w,h,C,f,k,G,g,U,P,c,u,y,L,p,b,T,_,E,A,R,D,x,q,t={})=>{const n="/api/sysCodeGenConfig/list",O=new URL(n,"https://example.com");let F;o&&(F=o.baseOptions);const N={method:"GET",...F,...t},I={},a={};if(o&&o.accessToken){const B=typeof o.accessToken=="function"?await o.accessToken():await o.accessToken;I.Authorization="Bearer "+B}s!==void 0&&(a.Id=s),l!==void 0&&(a.CodeGenId=l),r!==void 0&&(a.ColumnName=r),i!==void 0&&(a.PropertyName=i),d!==void 0&&(a.ColumnLength=d),e!==void 0&&(a.LowerPropertyName=e),m!==void 0&&(a.ColumnComment=m),S!==void 0&&(a.NetType=S),w!==void 0&&(a.EffectType=w),h!==void 0&&(a.FkEntityName=h),C!==void 0&&(a.FkTableName=C),f!==void 0&&(a.LowerFkEntityName=f),k!==void 0&&(a.FkColumnName=k),G!==void 0&&(a.LowerFkColumnName=G),g!==void 0&&(a.FkColumnNetType=g),U!==void 0&&(a.DictTypeCode=U),P!==void 0&&(a.WhetherRetract=P),c!==void 0&&(a.WhetherRequired=c),u!==void 0&&(a.WhetherSortable=u),y!==void 0&&(a.QueryWhether=y),L!==void 0&&(a.QueryType=L),p!==void 0&&(a.WhetherTable=p),b!==void 0&&(a.WhetherAddUpdate=b),T!==void 0&&(a.ColumnKey=T),_!==void 0&&(a.DataType=_),E!==void 0&&(a.WhetherCommon=E),A!==void 0&&(a.TableNickName=A),R!==void 0&&(a.DisplayColumn=R),D!==void 0&&(a.ValueColumn=D),x!==void 0&&(a.PidColumn=x),q!==void 0&&(a.OrderNo=q);const j=new URLSearchParams(O.search);for(const B in a)j.set(B,a[B]);for(const B in t.params)j.set(B,t.params[B]);O.search=new URLSearchParams(j).toString();let J=F&&F.headers?F.headers:{};return N.headers={...I,...J,...t.headers},{url:O.pathname+O.search+O.hash,options:N}},apiSysCodeGenConfigUpdatePost:async(s,l={})=>{const r="/api/sysCodeGenConfig/update",i=new URL(r,"https://example.com");let d;o&&(d=o.baseOptions);const e={method:"POST",...d,...l},m={},S={};if(o&&o.accessToken){const f=typeof o.accessToken=="function"?await o.accessToken():await o.accessToken;m.Authorization="Bearer "+f}m["Content-Type"]="application/json-patch+json";const w=new URLSearchParams(i.search);for(const f in S)w.set(f,S[f]);for(const f in l.params)w.set(f,l.params[f]);i.search=new URLSearchParams(w).toString();let h=d&&d.headers?d.headers:{};e.headers={...m,...h,...l.headers};const C=typeof s!="string"||e.headers["Content-Type"]==="application/json";return e.data=C?JSON.stringify(s!==void 0?s:{}):s||"",{url:i.pathname+i.search+i.hash,options:e}}}},te=function(o){return{async apiSysCodeGenConfigDetailGet(s,l,r,i,d,e,m,S,w,h,C,f,k,G,g,U,P,c,u,y,L,p,b,T,_,E,A,R,D,x,q,t){const n=await ae(o).apiSysCodeGenConfigDetailGet(s,l,r,i,d,e,m,S,w,h,C,f,k,G,g,U,P,c,u,y,L,p,b,T,_,E,A,R,D,x,q,t);return(O=$,F=H)=>{const N={...n.options,url:F+n.url};return O.request(N)}},async apiSysCodeGenConfigListGet(s,l,r,i,d,e,m,S,w,h,C,f,k,G,g,U,P,c,u,y,L,p,b,T,_,E,A,R,D,x,q,t){const n=await ae(o).apiSysCodeGenConfigListGet(s,l,r,i,d,e,m,S,w,h,C,f,k,G,g,U,P,c,u,y,L,p,b,T,_,E,A,R,D,x,q,t);return(O=$,F=H)=>{const N={...n.options,url:F+n.url};return O.request(N)}},async apiSysCodeGenConfigUpdatePost(s,l){const r=await ae(o).apiSysCodeGenConfigUpdatePost(s,l);return(i=$,d=H)=>{const e={...r.options,url:d+r.url};return i.request(e)}}}};class de extends ce{async apiSysCodeGenConfigDetailGet(s,l,r,i,d,e,m,S,w,h,C,f,k,G,g,U,P,c,u,y,L,p,b,T,_,E,A,R,D,x,q,t){return te(this.configuration).apiSysCodeGenConfigDetailGet(s,l,r,i,d,e,m,S,w,h,C,f,k,G,g,U,P,c,u,y,L,p,b,T,_,E,A,R,D,x,q,t).then(n=>n(this.axios,this.basePath))}async apiSysCodeGenConfigListGet(s,l,r,i,d,e,m,S,w,h,C,f,k,G,g,U,P,c,u,y,L,p,b,T,_,E,A,R,D,x,q,t){return te(this.configuration).apiSysCodeGenConfigListGet(s,l,r,i,d,e,m,S,w,h,C,f,k,G,g,U,P,c,u,y,L,p,b,T,_,E,A,R,D,x,q,t).then(n=>n(this.axios,this.basePath))}async apiSysCodeGenConfigUpdatePost(s,l){return te(this.configuration).apiSysCodeGenConfigUpdatePost(s,l).then(r=>r(this.axios,this.basePath))}}const oe=function(o){return{apiSysEnumEnumDataListByFieldGet:async(s,l,r={})=>{if(s==null)throw new K("entityName","Required parameter entityName was null or undefined when calling apiSysEnumEnumDataListByFieldGet.");if(l==null)throw new K("fieldName","Required parameter fieldName was null or undefined when calling apiSysEnumEnumDataListByFieldGet.");const i="/api/sysEnum/enumDataListByField",d=new URL(i,"https://example.com");let e;o&&(e=o.baseOptions);const m={method:"GET",...e,...r},S={},w={};if(o&&o.accessToken){const f=typeof o.accessToken=="function"?await o.accessToken():await o.accessToken;S.Authorization="Bearer "+f}s!==void 0&&(w.EntityName=s),l!==void 0&&(w.FieldName=l);const h=new URLSearchParams(d.search);for(const f in w)h.set(f,w[f]);for(const f in r.params)h.set(f,r.params[f]);d.search=new URLSearchParams(h).toString();let C=e&&e.headers?e.headers:{};return m.headers={...S,...C,...r.headers},{url:d.pathname+d.search+d.hash,options:m}},apiSysEnumEnumDataListGet:async(s,l={})=>{if(s==null)throw new K("enumName","Required parameter enumName was null or undefined when calling apiSysEnumEnumDataListGet.");const r="/api/sysEnum/enumDataList",i=new URL(r,"https://example.com");let d;o&&(d=o.baseOptions);const e={method:"GET",...d,...l},m={},S={};if(o&&o.accessToken){const C=typeof o.accessToken=="function"?await o.accessToken():await o.accessToken;m.Authorization="Bearer "+C}s!==void 0&&(S.EnumName=s);const w=new URLSearchParams(i.search);for(const C in S)w.set(C,S[C]);for(const C in l.params)w.set(C,l.params[C]);i.search=new URLSearchParams(w).toString();let h=d&&d.headers?d.headers:{};return e.headers={...m,...h,...l.headers},{url:i.pathname+i.search+i.hash,options:e}},apiSysEnumEnumTypeListGet:async(s={})=>{const l="/api/sysEnum/enumTypeList",r=new URL(l,"https://example.com");let i;o&&(i=o.baseOptions);const d={method:"GET",...i,...s},e={},m={};if(o&&o.accessToken){const h=typeof o.accessToken=="function"?await o.accessToken():await o.accessToken;e.Authorization="Bearer "+h}const S=new URLSearchParams(r.search);for(const h in m)S.set(h,m[h]);for(const h in s.params)S.set(h,s.params[h]);r.search=new URLSearchParams(S).toString();let w=i&&i.headers?i.headers:{};return d.headers={...e,...w,...s.headers},{url:r.pathname+r.search+r.hash,options:d}}}},se=function(o){return{async apiSysEnumEnumDataListByFieldGet(s,l,r){const i=await oe(o).apiSysEnumEnumDataListByFieldGet(s,l,r);return(d=$,e=H)=>{const m={...i.options,url:e+i.url};return d.request(m)}},async apiSysEnumEnumDataListGet(s,l){const r=await oe(o).apiSysEnumEnumDataListGet(s,l);return(i=$,d=H)=>{const e={...r.options,url:d+r.url};return i.request(e)}},async apiSysEnumEnumTypeListGet(s){const l=await oe(o).apiSysEnumEnumTypeListGet(s);return(r=$,i=H)=>{const d={...l.options,url:i+l.url};return r.request(d)}}}};class be extends ce{async apiSysEnumEnumDataListByFieldGet(s,l,r){return se(this.configuration).apiSysEnumEnumDataListByFieldGet(s,l,r).then(i=>i(this.axios,this.basePath))}async apiSysEnumEnumDataListGet(s,l){return se(this.configuration).apiSysEnumEnumDataListGet(s,l).then(r=>r(this.axios,this.basePath))}async apiSysEnumEnumTypeListGet(s){return se(this.configuration).apiSysEnumEnumTypeListGet(s).then(l=>l(this.axios,this.basePath))}}const Te={class:"sys-codeGenConfig-container"},_e={style:{color:"#fff"}},Ve=le("span",null," 生成配置 ",-1),Le={class:"dialog-footer"},Ee=ue({name:"sysCodeGenConfig"}),Pe=ue({...Ee,emits:["handleQuery"],setup(o,{expose:s,emit:l}){const r=l,i=ie(),d=ie(),e=ye({isShowDialog:!1,loading:!1,tableData:[],dbData:[],effectTypeList:[],dictTypeCodeList:[],dictDataAll:[],queryTypeList:[],allConstSelector:[],allEnumSelector:[]});we(async()=>{var b;var c=await z(ne).apiSysDictDataDataListCodeGet("code_gen_effect_type");e.effectTypeList=c.data.result;var u=await z(pe).apiSysDictTypeListGet();e.dictTypeCodeList=u.data.result,e.dictDataAll=u.data.result;var y=await z(ne).apiSysDictDataDataListCodeGet("code_gen_query_type");e.queryTypeList=y.data.result;var L=await z(he).apiSysConstListGet();e.allConstSelector=L.data.result;let p=await z(be).apiSysEnumEnumTypeListGet();e.allEnumSelector=(b=p.data.result)==null?void 0:b.map(T=>{var _;return{...T,name:`${T.typeDescribe} [${(_=T.typeName)==null?void 0:_.replace("Enum","")}]`,code:T.typeName}}),X.on("submitRefreshFk",T=>{e.tableData[T.index]=T})});const m=c=>{e.tableData[c.index]=c};ve(()=>{X.off("submitRefresh",()=>{}),X.off("submitRefreshFk",()=>{})});const S=(c,u)=>{let y=c.effectType;y==="fk"?k(c,u):y==="ApiTreeSelect"?G(c,u):y==="Select"?(c.dictTypeCode="",e.dictTypeCodeList=e.dictDataAll):y==="ConstSelector"?(c.dictTypeCode="",e.dictTypeCodeList=e.allConstSelector):y=="EnumSelector"&&(c.dictTypeCode="",e.dictTypeCodeList=e.allEnumSelector)},w=async c=>{e.loading=!0;var u=await z(de).apiSysCodeGenConfigListGet(void 0,c.id),y=u.data.result??[];let L=["whetherTable","whetherAddUpdate","whetherRequired","whetherSortable"];y.forEach(p=>{for(const b in p)p[b]==="Y"&&(p[b]=!0),(p[b]==="N"||L.includes(b)&&p[b]===null)&&(p[b]=!1)}),e.tableData=y,e.loading=!1};function h(c){return c.whetherCommon==!0||c.columnKey==="True"}function C(c){var u=["Radio","Select","Checkbox","ConstSelector","EnumSelector"];return u.indexOf(c.effectType)===-1}const f=c=>{w(c),e.isShowDialog=!0},k=(c,u)=>{c.index=u,i.value.openDialog(c)},G=(c,u)=>{c.index=u,d.value.openDialog(c)},g=()=>{r("handleQuery"),e.isShowDialog=!1},U=()=>{e.isShowDialog=!1},P=async()=>{e.loading=!0;var c=e.tableData;c.forEach(u=>{for(var y in u)u[y]===!0&&(u[y]="Y"),u[y]===!1&&(u[y]="N")}),await z(de).apiSysCodeGenConfigUpdatePost(c),e.loading=!1,g()};return s({openDialog:f}),(c,u)=>{const y=W("ele-Edit"),L=W("el-icon"),p=W("el-table-column"),b=W("el-input"),T=W("el-option"),_=W("el-select"),E=W("el-checkbox"),A=W("el-switch"),R=W("el-table"),D=W("el-button"),x=W("el-dialog"),q=Se("loading");return Q(),M("div",Te,[v(x,{modelValue:e.isShowDialog,"onUpdate:modelValue":u[0]||(u[0]=t=>e.isShowDialog=t),draggable:"","close-on-click-modal":!1,width:"1500px"},{header:V(()=>[le("div",_e,[v(L,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:V(()=>[v(y)]),_:1}),Ve])]),footer:V(()=>[le("span",Le,[v(D,{onClick:U},{default:V(()=>[re("取 消")]),_:1}),v(D,{type:"primary",onClick:P},{default:V(()=>[re("确 定")]),_:1})])]),default:V(()=>[Ce((Q(),Y(R,{data:e.tableData,style:{width:"100%"},border:""},{default:V(()=>[v(p,{type:"index",label:"序号",width:"55",align:"center"}),v(p,{prop:"propertyName",label:"实体属性",width:"180","show-overflow-tooltip":""}),v(p,{prop:"columnComment",label:"描述",width:"180","show-overflow-tooltip":""},{default:V(t=>[v(b,{modelValue:t.row.columnComment,"onUpdate:modelValue":n=>t.row.columnComment=n,autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),v(p,{prop:"netType",label:"数据类型","min-width":"90","show-overflow-tooltip":""}),v(p,{prop:"effectType",label:"作用类型",width:"120","show-overflow-tooltip":""},{default:V(t=>[v(_,{modelValue:t.row.effectType,"onUpdate:modelValue":n=>t.row.effectType=n,class:"m-2",placeholder:"Select",disabled:h(t.row),onChange:n=>S(t.row,t.$index)},{default:V(()=>[(Q(!0),M(Z,null,ee(e.effectTypeList,n=>(Q(),Y(T,{key:n.code,label:n.value,value:n.code},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1}),v(p,{prop:"dictTypeCode",label:"字典",width:"180","show-overflow-tooltip":""},{default:V(t=>[v(_,{modelValue:t.row.dictTypeCode,"onUpdate:modelValue":n=>t.row.dictTypeCode=n,class:"m-2",disabled:C(t.row)},{default:V(()=>[(Q(!0),M(Z,null,ee(e.dictTypeCodeList,n=>(Q(),Y(T,{key:n.code,label:n.name,value:n.code},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),v(p,{prop:"whetherTable",label:"列表显示",width:"85",align:"center","show-overflow-tooltip":""},{default:V(t=>[v(E,{modelValue:t.row.whetherTable,"onUpdate:modelValue":n=>t.row.whetherTable=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),v(p,{prop:"whetherAddUpdate",label:"增改",width:"80",align:"center","show-overflow-tooltip":""},{default:V(t=>[v(E,{modelValue:t.row.whetherAddUpdate,"onUpdate:modelValue":n=>t.row.whetherAddUpdate=n,disabled:h(t.row)},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),v(p,{prop:"whetherRequired",label:"必填",width:"80",align:"center","show-overflow-tooltip":""},{default:V(t=>[v(E,{modelValue:t.row.whetherRequired,"onUpdate:modelValue":n=>t.row.whetherRequired=n,disabled:h(t.row)},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),v(p,{prop:"whetherSortable",label:"可排序",width:"80",align:"center","show-overflow-tooltip":""},{default:V(t=>[v(E,{modelValue:t.row.whetherSortable,"onUpdate:modelValue":n=>t.row.whetherSortable=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),v(p,{prop:"queryWhether",label:"是否是查询","min-width":"80",align:"center","show-overflow-tooltip":""},{default:V(t=>[v(A,{modelValue:t.row.queryWhether,"onUpdate:modelValue":n=>t.row.queryWhether=n,"active-value":!0,"inactive-value":!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),v(p,{prop:"queryType",label:"查询方式","min-width":"120",align:"center","show-overflow-tooltip":""},{default:V(t=>[v(_,{modelValue:t.row.queryType,"onUpdate:modelValue":n=>t.row.queryType=n,class:"m-2",placeholder:"Select",disabled:!t.row.queryWhether},{default:V(()=>[(Q(!0),M(Z,null,ee(e.queryTypeList,n=>(Q(),Y(T,{key:n.code,label:n.value,value:n.code},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),v(p,{prop:"orderNo",label:"排序",width:"100","show-overflow-tooltip":""},{default:V(t=>[v(b,{modelValue:t.row.orderNo,"onUpdate:modelValue":n=>t.row.orderNo=n,autocomplete:"off",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])),[[q,e.loading]])]),_:1},8,["modelValue"]),v(me,{ref_key:"fkDialogRef",ref:i,onSubmitRefreshFk:m},null,512),v(fe,{ref_key:"treeDialogRef",ref:d,onSubmitRefreshFk:m},null,512)])}}});export{Pe as _};

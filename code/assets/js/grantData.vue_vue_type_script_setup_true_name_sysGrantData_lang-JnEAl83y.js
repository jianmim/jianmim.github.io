import{k as S,r as N,L as R,t,x as c,M as p,D as o,A as l,O as m,S as f,a4 as L,a5 as A,B as E,C as G,y as I}from"./store-dof5ccn5.js";import J from"./orgTree-QS4kKJUc.js";import{g}from"./index-zQlakb1H.js";import{S as y}from"./sys-role-api-_c0ZYyVU.js";const K={class:"sys-grantData-container"},P={style:{color:"#fff"}},Q=m("span",null," 授权数据范围 ",-1),U={class:"dialog-footer"},z=S({name:"sysGrantData"}),X=S({...z,emits:["handleQuery"],setup(M,{expose:h,emit:v}){const b=v,i=N(),e=R({isShowDialog:!1,ruleForm:{},dataScopeType:[{value:1,label:"全部数据"},{value:2,label:"本部门及以下数据"},{value:3,label:"本部门数据"},{value:4,label:"仅本人数据"},{value:5,label:"自定义数据"}]}),w=async s=>{e.ruleForm=JSON.parse(JSON.stringify(s));var n=await g(y).apiSysRoleOwnOrgListGet(s.id);setTimeout(()=>{var r;(r=i.value)==null||r.setCheckedKeys(n.data.result)},100),e.isShowDialog=!0},D=()=>{e.isShowDialog=!1},x=()=>{b("handleQuery"),e.isShowDialog=!1},k=async()=>{var s;e.ruleForm.dataScope===5&&(e.ruleForm.orgIdList=(s=i.value)==null?void 0:s.getCheckedKeys()),await g(y).apiSysRoleGrantDataScopePost(e.ruleForm),x()};return h({openDialog:w}),(s,n)=>{const r=t("ele-Edit"),F=t("el-icon"),V=t("el-option"),C=t("el-select"),d=t("el-form-item"),_=t("el-col"),T=t("el-row"),O=t("el-form"),u=t("el-button"),B=t("el-dialog");return c(),p("div",K,[o(B,{modelValue:e.isShowDialog,"onUpdate:modelValue":n[1]||(n[1]=a=>e.isShowDialog=a),draggable:"","close-on-click-modal":!1,width:"450px"},{header:l(()=>[m("div",P,[o(F,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:l(()=>[o(r)]),_:1}),Q])]),footer:l(()=>[m("span",U,[o(u,{onClick:D},{default:l(()=>[f("取 消")]),_:1}),o(u,{type:"primary",onClick:k},{default:l(()=>[f("确 定")]),_:1})])]),default:l(()=>[o(O,{model:e.ruleForm,"label-position":"top"},{default:l(()=>[o(T,{gutter:35},{default:l(()=>[o(_,{xs:24,sm:24,md:24,lg:24,xl1:24,class:"mb20"},{default:l(()=>[o(d,{label:"数据范围："},{default:l(()=>[o(C,{modelValue:e.ruleForm.dataScope,"onUpdate:modelValue":n[0]||(n[0]=a=>e.ruleForm.dataScope=a),placeholder:"数据范围",style:{width:"100%"}},{default:l(()=>[(c(!0),p(L,null,A(e.dataScopeType,a=>(c(),I(V,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),E(o(_,{xs:24,sm:24,md:24,lg:24,xl1:24},{default:l(()=>[o(d,{label:"机构列表："},{default:l(()=>[o(J,{ref_key:"orgTreeRef",ref:i,class:"w100"},null,512)]),_:1})]),_:1},512),[[G,e.ruleForm.dataScope===5]])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});export{X as _};

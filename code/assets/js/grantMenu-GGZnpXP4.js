import{g as d,r as V}from"./index-lw7p-_pG.js";import{S as m}from"./sys-tenant-api-WCCcDxDS.js";import{k as g,r as B,L as F,p as G,t as a,a6 as T,x as p,M as A,D as s,A as o,O as _,S as f,B as N,y as E,X as K,Y as O}from"./store-mQZkmHj-.js";import{_ as P}from"./_plugin-vue_export-helper-x3n3nnut.js";const R=r=>(K("data-v-da837307"),r=r(),O(),r),z={class:"sys-grantMenu-container"},U={style:{color:"#fff"}},X=R(()=>_("span",null," 授权租户菜单 ",-1)),Y={class:"dialog-footer"},j=g({name:"sysGrantMenu"}),q=g({...j,setup(r,{expose:h}){const c=B(),e=F({loading:!1,isShowDialog:!1,ruleForm:{id:0,menuIdList:[]},menuData:[]});G(async()=>{e.loading=!0;var t=await d(V).apiSysMenuListGet();e.menuData=t.data.result,e.loading=!1});const y=async t=>{var n;(n=c.value)==null||n.setCheckedKeys([]),e.ruleForm=t;var l=await d(m).apiSysTenantOwnMenuListGet(t.userId);setTimeout(()=>{var i;(i=c.value)==null||i.setCheckedKeys(l.data.result)},100),e.isShowDialog=!0},v=()=>{e.isShowDialog=!1},w=async()=>{var t;e.ruleForm.menuIdList=(t=c.value)==null?void 0:t.getCheckedKeys(),await d(m).apiSysTenantGrantMenuPost(e.ruleForm),e.isShowDialog=!1},S=t=>{var n;let l=!0;for(const i in t.children)if(((n=t.children[i].children)==null?void 0:n.length)??0>0){l=!1;break}return l?"penultimate-node":""};return h({openDialog:y}),(t,l)=>{const n=a("ele-Edit"),i=a("el-icon"),k=a("el-tree"),x=a("el-form-item"),D=a("el-col"),C=a("el-row"),M=a("el-form"),u=a("el-button"),I=a("el-dialog"),b=T("loading");return p(),A("div",z,[s(I,{modelValue:e.isShowDialog,"onUpdate:modelValue":l[0]||(l[0]=L=>e.isShowDialog=L),draggable:"","close-on-click-modal":!1,width:"769px"},{header:o(()=>[_("div",U,[s(i,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:o(()=>[s(n)]),_:1}),X])]),footer:o(()=>[_("span",Y,[s(u,{onClick:v},{default:o(()=>[f("取 消")]),_:1}),s(u,{type:"primary",onClick:w},{default:o(()=>[f("确 定")]),_:1})])]),default:o(()=>[N((p(),E(M,{model:e.ruleForm},{default:o(()=>[s(C,{gutter:35},{default:o(()=>[s(D,{xs:24,sm:24,md:24,lg:24,xl1:24},{default:o(()=>[s(x,{prop:"orgIdList",label:""},{default:o(()=>[s(k,{ref_key:"treeRef",ref:c,data:e.menuData,"node-key":"id","show-checkbox":"",props:{children:"children",label:"title",class:S},icon:"ele-Menu","highlight-current":"","default-expand-all":""},null,8,["data","props"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])),[[b,e.loading]])]),_:1},8,["modelValue"])])}}}),Z=P(q,[["__scopeId","data-v-da837307"]]);export{Z as default};

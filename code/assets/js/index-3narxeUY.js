import{k as m,r as L,L as U,t as c,x as V,M as E,D as a,A as s,O as o,T as P,S as n,n as j,aK as A,aJ as M,X as N,Y as O}from"./store-mQZkmHj-.js";import{_ as T}from"./_plugin-vue_export-helper-x3n3nnut.js";const d=p=>(N("data-v-18b58eca"),p=p(),O(),p),z={style:{color:"#fff"}},F={class:"cropper-warp"},q={class:"cropper-warp-left"},J=["src"],K={class:"cropper-warp-right"},X=d(()=>o("div",{class:"cropper-warp-right-title"},"预览",-1)),Y={class:"cropper-warp-right-item"},G={class:"cropper-warp-right-value"},H=["src"],Q=d(()=>o("div",{class:"cropper-warp-right-label"},"100 x 100",-1)),W={class:"cropper-warp-right-item"},Z={class:"cropper-warp-right-value"},$=["src"],ee=d(()=>o("div",{class:"cropper-warp-right-label"},"50 x 50",-1)),oe={class:"dialog-footer"},te=m({name:"cropper"}),re=m({...te,props:{title:{type:String,default:()=>""}},emits:["uploadCropperImg"],setup(p,{expose:u,emit:h}){const f=p,w=h,i=L(),e=U({isShowDialog:!1,cropperImg:"",cropperImgBase64:"",cropper:""}),v=t=>{e.cropperImg=t,e.isShowDialog=!0,j(()=>{I()})},_=()=>{e.cropper.destroy(),e.isShowDialog=!1},g=()=>{_()},C=async()=>{const t=await S();w("uploadCropperImg",{img:t}),_()},I=()=>{const t=document.querySelector(".cropper-warp-left-img");e.cropper=new A(t,{viewMode:1,dragMode:"none",initialAspectRatio:1,aspectRatio:1,preview:".before",background:!0,autoCropArea:1,checkCrossOrigin:!1,crop:()=>{e.cropperImgBase64=e.cropper.getCroppedCanvas().toDataURL("image/jpeg")}})},S=()=>new Promise(t=>{e.cropper.getCroppedCanvas().toBlob(r=>{t(r)})}),b=async t=>{let r=window.URL||window.webkitURL;e.cropperImg=r.createObjectURL(t.raw),e.cropper.replace(e.cropperImg)},x=t=>{i.value.clearFiles();const r=t[0];r.uid=M(),i.value.handleStart(r)};return u({openDialog:v}),(t,r)=>{const y=c("ele-Edit"),k=c("el-icon"),l=c("el-button"),D=c("el-upload"),R=c("el-dialog");return V(),E("div",null,[a(R,{modelValue:e.isShowDialog,"onUpdate:modelValue":r[0]||(r[0]=B=>e.isShowDialog=B),width:"769px","before-close":g},{header:s(()=>[o("div",z,[a(k,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:s(()=>[a(y)]),_:1}),o("span",null,P(f.title),1)])]),footer:s(()=>[o("span",oe,[a(D,{ref_key:"uploadSignRef",ref:i,accept:".jpg,.png",limit:1,"show-file-list":!1,"auto-upload":!1,"on-change":b,"on-exceed":x,style:{display:"inline-block",position:"absolute",right:"172px"}},{default:s(()=>[a(l,{icon:"ele-Picture"},{default:s(()=>[n("选择图片")]),_:1})]),_:1},512),a(l,{onClick:g},{default:s(()=>[n("取 消")]),_:1}),a(l,{type:"primary",onClick:C},{default:s(()=>[n("确 定")]),_:1})])]),default:s(()=>[o("div",F,[o("div",q,[o("img",{src:e.cropperImg,class:"cropper-warp-left-img"},null,8,J)]),o("div",K,[X,o("div",Y,[o("div",G,[o("img",{src:e.cropperImgBase64,class:"cropper-warp-right-value-img"},null,8,H)]),Q]),o("div",W,[o("div",Z,[o("img",{src:e.cropperImgBase64,class:"cropper-warp-right-value-img cropper-size"},null,8,$)]),ee])])])]),_:1},8,["modelValue"])])}}}),pe=T(re,[["__scopeId","data-v-18b58eca"]]);export{pe as default};

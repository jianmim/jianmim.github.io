import{_ as J,S as x}from"./editOpenAccess.vue_vue_type_script_setup_true_name_sysOpenAccessEdit_lang-rZhobWN1.js";import W from"./helpView-rkFaA_gq.js";import{g as S}from"./index-zQlakb1H.js";import{k as D,r as z,L as X,p as Y,t as a,a6 as T,x as m,M as Z,D as e,A as t,B as g,y,S as o,T as b,ai as ee,E as te}from"./store-dof5ccn5.js";import"./sys-tenant-api-I9_VUfg0.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const le={class:"sys-open-access-container"},ae=D({name:"sysOpenAccess"}),pe=D({...ae,setup(ne){const A=z(),P=z(),l=X({loading:!1,openAccessData:[],queryParams:{accessKey:void 0},tableParams:{page:1,pageSize:20,total:0},editOpenAccessTitle:""});Y(async()=>{r()});const r=async()=>{var h,d;l.loading=!0;let n=Object.assign(l.queryParams,l.tableParams);var c=await S(x).apiSysOpenAccessPagePost(n);l.openAccessData=((h=c.data.result)==null?void 0:h.items)??[],l.tableParams.total=(d=c.data.result)==null?void 0:d.total,l.loading=!1},B=()=>{l.queryParams.accessKey=void 0,r()},U=()=>{var n;l.editOpenAccessTitle="添加开放接口身份",(n=A.value)==null||n.openDialog({type:1})},V=n=>{var c;l.editOpenAccessTitle="编辑开放接口身份",(c=A.value)==null||c.openDialog(n)},q=n=>{ee.confirm(`确定删除开放接口身份：【${n.accessKey}】?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await S(x).apiSysOpenAccessDeletePost({id:n.id}),r(),te.success("删除成功")}).catch(()=>{})},E=n=>{l.tableParams.pageSize=n,r()},F=n=>{l.tableParams.page=n,r()},K=()=>{var n;(n=P.value)==null||n.openDialog()};return(n,c)=>{const h=a("el-input"),d=a("el-form-item"),p=a("el-button"),N=a("el-button-group"),R=a("el-form"),C=a("el-card"),i=a("el-table-column"),M=a("ele-InfoFilled"),u=a("el-icon"),_=a("el-text"),k=a("ele-UserFilled"),w=a("el-tag"),f=a("el-descriptions-item"),O=a("ele-Calendar"),Q=a("ele-Tickets"),$=a("el-descriptions"),H=a("el-popover"),I=a("el-table"),j=a("el-pagination"),v=T("auth"),L=T("loading");return m(),Z("div",le,[e(C,{shadow:"hover","body-style":{paddingBottom:"0"}},{default:t(()=>[e(R,{model:l.queryParams,ref:"queryForm",inline:!0},{default:t(()=>[e(d,{label:"身份标识"},{default:t(()=>[e(h,{modelValue:l.queryParams.accessKey,"onUpdate:modelValue":c[0]||(c[0]=s=>l.queryParams.accessKey=s),placeholder:"身份标识",clearable:""},null,8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(N,null,{default:t(()=>[g((m(),y(p,{type:"primary",icon:"ele-Search",onClick:r},{default:t(()=>[o(" 查询 ")]),_:1})),[[v,"sysOpenAccess:page"]]),e(p,{icon:"ele-Refresh",onClick:B},{default:t(()=>[o(" 重置 ")]),_:1})]),_:1})]),_:1}),e(d,null,{default:t(()=>[g((m(),y(p,{type:"primary",icon:"ele-Plus",onClick:U},{default:t(()=>[o(" 新增 ")]),_:1})),[[v,"sysOpenAccess:add"]]),e(p,{icon:"ele-QuestionFilled",onClick:K},{default:t(()=>[o(" 说明 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(C,{class:"full-table",shadow:"hover",style:{"margin-top":"8px"}},{default:t(()=>[g((m(),y(I,{data:l.openAccessData,style:{width:"100%"},border:""},{default:t(()=>[e(i,{type:"index",label:"序号",width:"55",align:"center"}),e(i,{prop:"accessKey",label:"身份标识","header-align":"center","show-overflow-tooltip":""}),e(i,{prop:"accessSecret",label:"密钥","header-align":"center","show-overflow-tooltip":""}),e(i,{prop:"bindUserAccount",label:"绑定用户账号","header-align":"center","show-overflow-tooltip":""}),e(i,{prop:"bindTenantName",label:"绑定租户名称","header-align":"center","show-overflow-tooltip":""}),e(i,{label:"修改记录",width:"100",align:"center","show-overflow-tooltip":""},{default:t(s=>[e(H,{placement:"bottom",width:"280",trigger:"hover"},{reference:t(()=>[e(_,{type:"primary"},{default:t(()=>[e(u,null,{default:t(()=>[e(M)]),_:1}),o("详情 ")]),_:1})]),default:t(()=>[e($,{direction:"vertical",column:2,border:""},{default:t(()=>[e(f,{width:"140"},{label:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[e(k)]),_:1}),o("创建者 ")]),_:1})]),default:t(()=>[e(w,null,{default:t(()=>[o(b(s.row.createUserName??"无"),1)]),_:2},1024)]),_:2},1024),e(f,null,{label:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[e(O)]),_:1}),o("创建时间 ")]),_:1})]),default:t(()=>[e(w,null,{default:t(()=>[o(b(s.row.createTime??"无"),1)]),_:2},1024)]),_:2},1024),e(f,null,{label:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[e(k)]),_:1}),o("修改者 ")]),_:1})]),default:t(()=>[e(w,null,{default:t(()=>[o(b(s.row.updateUserName??"无"),1)]),_:2},1024)]),_:2},1024),e(f,null,{label:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[e(O)]),_:1}),o("修改时间 ")]),_:1})]),default:t(()=>[e(w,null,{default:t(()=>[o(b(s.row.updateTime??"无"),1)]),_:2},1024)]),_:2},1024),e(f,null,{label:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[e(Q)]),_:1}),o("备注 ")]),_:1})]),default:t(()=>[o(" "+b(s.row.remark),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),e(i,{label:"操作",width:"200",fixed:"right",align:"center","show-overflow-tooltip":""},{default:t(s=>[g((m(),y(p,{icon:"ele-Edit",size:"small",text:"",type:"primary",onClick:G=>V(s.row),disabled:s.row.status===1},{default:t(()=>[o(" 编辑 ")]),_:2},1032,["onClick","disabled"])),[[v,"sysOpenAccess:update"]]),g((m(),y(p,{icon:"ele-Delete",size:"small",text:"",type:"danger",onClick:G=>q(s.row),disabled:s.row.status===1},{default:t(()=>[o(" 删除 ")]),_:2},1032,["onClick","disabled"])),[[v,"sysOpenAccess:delete"]])]),_:1})]),_:1},8,["data"])),[[L,l.loading]]),e(j,{currentPage:l.tableParams.page,"onUpdate:currentPage":c[1]||(c[1]=s=>l.tableParams.page=s),"page-size":l.tableParams.pageSize,"onUpdate:pageSize":c[2]||(c[2]=s=>l.tableParams.pageSize=s),total:l.tableParams.total,"page-sizes":[10,20,50,100],small:"",background:"",onSizeChange:E,onCurrentChange:F,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"])]),_:1}),e(J,{ref_key:"editOpenAccessRef",ref:A,title:l.editOpenAccessTitle,onHandleQuery:r},null,8,["title"]),e(W,{ref_key:"helpViewRef",ref:P},null,512)])}}});export{pe as default};

import{_ as K}from"./editMenu.vue_vue_type_script_setup_true_name_sysEditMenu_lang-QDIWve1t.js";import{g as D,r as P}from"./index-xdJ7pE-g.js";import{k as q,r as O,L as j,p as J,t,a6 as T,x as i,M as W,D as e,A as l,B as h,y as s,S as o,O as X,T as m,ai as Y,E as Z}from"./store-dof5ccn5.js";import"./index.vue_vue_type_script_setup_true_name_iconSelector_lang-6-OkLiyV.js";import"./getStyleSheets-sc0x7Sln.js";const ee={class:"sys-menu-container"},le={class:"ml10"},te=q({name:"sysMenu"}),ue=q({...te,setup(oe){const b=O(),n=j({loading:!1,menuData:[],queryParams:{title:void 0,type:void 0},editMenuTitle:""});J(async()=>{f()});const f=async()=>{n.loading=!0;var r=await D(P).apiSysMenuListGet(n.queryParams.title,n.queryParams.type);n.menuData=r.data.result??[],n.loading=!1},B=()=>{n.queryParams.title=void 0,n.queryParams.type=void 0,f()},V=()=>{var r;n.editMenuTitle="添加菜单",(r=b.value)==null||r.openDialog({type:2,isHide:!1,isKeepAlive:!0,isAffix:!1,isIframe:!1,status:1,orderNo:100})},S=r=>{var _;n.editMenuTitle="编辑菜单",(_=b.value)==null||_.openDialog(r)},N=r=>{Y.confirm(`确定删除菜单：【${r.title}】?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await D(P).apiSysMenuDeletePost({id:r.id}),f(),Z.success("删除成功")}).catch(()=>{})};return(r,_)=>{const A=t("el-input"),v=t("el-form-item"),k=t("el-option"),E=t("el-select"),y=t("el-button"),I=t("el-button-group"),U=t("el-form"),M=t("el-card"),F=t("SvgIcon"),u=t("el-table-column"),d=t("el-tag"),$=t("ele-InfoFilled"),c=t("el-icon"),p=t("el-text"),x=t("ele-UserFilled"),w=t("el-descriptions-item"),C=t("ele-Calendar"),Q=t("ele-Tickets"),R=t("el-descriptions"),z=t("el-popover"),H=t("el-table"),g=T("auth"),L=T("loading");return i(),W("div",ee,[e(M,{shadow:"hover","body-style":{paddingBottom:"0"}},{default:l(()=>[e(U,{model:n.queryParams,ref:"queryForm",inline:!0},{default:l(()=>[e(v,{label:"菜单名称"},{default:l(()=>[e(A,{modelValue:n.queryParams.title,"onUpdate:modelValue":_[0]||(_[0]=a=>n.queryParams.title=a),placeholder:"菜单名称",clearable:""},null,8,["modelValue"])]),_:1}),e(v,{label:"类型"},{default:l(()=>[e(E,{modelValue:n.queryParams.type,"onUpdate:modelValue":_[1]||(_[1]=a=>n.queryParams.type=a),placeholder:"类型",clearable:""},{default:l(()=>[e(k,{label:"目录",value:1}),e(k,{label:"菜单",value:2}),e(k,{label:"按钮",value:3})]),_:1},8,["modelValue"])]),_:1}),e(v,null,{default:l(()=>[e(I,null,{default:l(()=>[h((i(),s(y,{type:"primary",icon:"ele-Search",onClick:f},{default:l(()=>[o(" 查询 ")]),_:1})),[[g,"sysMenu:list"]]),e(y,{icon:"ele-Refresh",onClick:B},{default:l(()=>[o(" 重置 ")]),_:1})]),_:1})]),_:1}),e(v,null,{default:l(()=>[h((i(),s(y,{type:"primary",icon:"ele-Plus",onClick:V},{default:l(()=>[o(" 新增 ")]),_:1})),[[g,"sysMenu:add"]])]),_:1})]),_:1},8,["model"])]),_:1}),e(M,{class:"full-table",shadow:"hover",style:{"margin-top":"8px"}},{default:l(()=>[h((i(),s(H,{data:n.menuData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"},border:""},{default:l(()=>[e(u,{label:"菜单名称","header-align":"center","show-overflow-tooltip":""},{default:l(a=>[e(F,{name:a.row.icon},null,8,["name"]),X("span",le,m(r.$t(a.row.title)),1)]),_:1}),e(u,{label:"类型",width:"70",align:"center","show-overflow-tooltip":""},{default:l(a=>[a.row.type===1?(i(),s(d,{key:0,type:"warning"},{default:l(()=>[o("目录")]),_:1})):a.row.type===2?(i(),s(d,{key:1},{default:l(()=>[o("菜单")]),_:1})):(i(),s(d,{key:2,type:"info"},{default:l(()=>[o("按钮")]),_:1}))]),_:1}),e(u,{prop:"path",label:"路由路径","header-align":"center","show-overflow-tooltip":""}),e(u,{prop:"component",label:"组件路径",align:"center","show-overflow-tooltip":""}),e(u,{prop:"permission",label:"权限标识",align:"center","show-overflow-tooltip":""}),e(u,{prop:"orderNo",label:"排序",width:"70",align:"center","show-overflow-tooltip":""}),e(u,{label:"状态",width:"80",align:"center","show-overflow-tooltip":""},{default:l(a=>[a.row.status===1?(i(),s(d,{key:0,type:"success"},{default:l(()=>[o("启用")]),_:1})):(i(),s(d,{key:1,type:"danger"},{default:l(()=>[o("禁用")]),_:1}))]),_:1}),e(u,{label:"修改记录",width:"100",align:"center","show-overflow-tooltip":""},{default:l(a=>[e(z,{placement:"bottom",width:"280",trigger:"hover"},{reference:l(()=>[e(p,{type:"primary"},{default:l(()=>[e(c,null,{default:l(()=>[e($)]),_:1}),o("详情 ")]),_:1})]),default:l(()=>[e(R,{direction:"vertical",column:2,border:""},{default:l(()=>[e(w,{width:"140"},{label:l(()=>[e(p,null,{default:l(()=>[e(c,null,{default:l(()=>[e(x)]),_:1}),o("创建者 ")]),_:1})]),default:l(()=>[e(d,null,{default:l(()=>[o(m(a.row.createUserName??"无"),1)]),_:2},1024)]),_:2},1024),e(w,null,{label:l(()=>[e(p,null,{default:l(()=>[e(c,null,{default:l(()=>[e(C)]),_:1}),o("创建时间 ")]),_:1})]),default:l(()=>[e(d,null,{default:l(()=>[o(m(a.row.createTime??"无"),1)]),_:2},1024)]),_:2},1024),e(w,null,{label:l(()=>[e(p,null,{default:l(()=>[e(c,null,{default:l(()=>[e(x)]),_:1}),o("修改者 ")]),_:1})]),default:l(()=>[e(d,null,{default:l(()=>[o(m(a.row.updateUserName??"无"),1)]),_:2},1024)]),_:2},1024),e(w,null,{label:l(()=>[e(p,null,{default:l(()=>[e(c,null,{default:l(()=>[e(C)]),_:1}),o("修改时间 ")]),_:1})]),default:l(()=>[e(d,null,{default:l(()=>[o(m(a.row.updateTime??"无"),1)]),_:2},1024)]),_:2},1024),e(w,null,{label:l(()=>[e(p,null,{default:l(()=>[e(c,null,{default:l(()=>[e(Q)]),_:1}),o("备注 ")]),_:1})]),default:l(()=>[o(" "+m(a.row.remark),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),e(u,{label:"操作",width:"140",fixed:"right",align:"center","show-overflow-tooltip":""},{default:l(a=>[h((i(),s(y,{icon:"ele-Edit",size:"small",text:"",type:"primary",onClick:G=>S(a.row)},{default:l(()=>[o(" 编辑 ")]),_:2},1032,["onClick"])),[[g,"sysMenu:update"]]),h((i(),s(y,{icon:"ele-Delete",size:"small",text:"",type:"danger",onClick:G=>N(a.row)},{default:l(()=>[o(" 删除 ")]),_:2},1032,["onClick"])),[[g,"sysMenu:delete"]])]),_:1})]),_:1},8,["data"])),[[L,n.loading]])]),_:1}),e(K,{ref_key:"editMenuRef",ref:b,title:n.editMenuTitle,menuData:n.menuData,onHandleQuery:f},null,8,["title","menuData"])])}}});export{ue as default};

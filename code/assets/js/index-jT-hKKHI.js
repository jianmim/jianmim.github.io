import{a as J}from"./authFunction-fIb3RNfc.js";import{g as A,a as V}from"./dict-utils-rfVz76dT.js";import me from"./preview-J91Nyzbc.js";import ve from"./editDialog-nD52zcjF.js";import fe from"./approveDialog-VERcyMfS.js";import ye from"./lookDialog-ZyjsNZIW.js";import{b as _e,c as ge,g as be}from"./licRecordInfo-sgRvjWbe.js";import{k as X,r as f,t as v,a6 as K,x as o,M as D,D as a,A as l,a4 as T,a5 as S,y as r,G as u,F as b,B as R,S as y,O as we,T as L,ai as ke,E as xe}from"./store-mQZkmHj-.js";import{_ as he}from"./_plugin-vue_export-helper-x3n3nnut.js";import"./index-lw7p-_pG.js";import"./request--bhxBvPJ.js";const Ve={class:"licRecordInfo-container"},De=X({name:"licRecordInfo"}),Re=X({...De,setup(Ce){const p=f(!1),_=f(!1),ee=f(),B=f(),E=f(),N=f(),z=f(!1),P=f([]),n=f({}),k=f({page:1,pageSize:10,total:0}),le=f(""),j=f(""),O=f(""),Z=f(""),F=()=>{p.value=!p.value},Q=()=>{_.value=!_.value},w=async()=>{var t,x;z.value=!0;var i=await _e(Object.assign(n.value,k.value));P.value=((t=i.data.result)==null?void 0:t.items)??[],k.value.total=(x=i.data.result)==null?void 0:x.total,z.value=!1},ae=async i=>{n.value.field=i.prop,n.value.order=i.order,await w()},oe=()=>{j.value="添加申请记录明细",B.value.openDialog({giveState:"0",licenseType:"0",approveState:"-1",systemType:"0",concurrencyCount:10,userCount:10})},q=i=>{O.value="审批申请记录明细",E.value.openDialog(i)},G=i=>{Z.value="查看申请记录明细",N.value.openDialog(i)},te=i=>{ke.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await ge(i),w(),xe.success("删除成功")}).catch(()=>{})},re=i=>{k.value.pageSize=i,w()},ne=i=>{k.value.page=i,w()},Y=f([]);return(async()=>{let i=await be();Y.value=i.data.result??[]})(),w(),(i,t)=>{const x=v("el-option"),C=v("el-select"),c=v("el-form-item"),m=v("el-col"),I=v("el-input"),W=v("el-input-number"),M=v("el-date-picker"),g=v("el-button"),ue=v("el-button-group"),de=v("el-row"),ie=v("el-form"),H=v("el-card"),s=v("el-table-column"),$=v("el-tag"),se=v("el-table"),pe=v("el-pagination"),U=K("auth"),ce=K("loading");return o(),D("div",Ve,[a(H,{shadow:"hover","body-style":{paddingBottom:"0"}},{default:l(()=>[a(ie,{model:n.value,ref:"queryForm",labelWidth:"90"},{default:l(()=>[a(de,null,{default:l(()=>[a(m,{xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"申请人"},{default:l(()=>[a(C,{clearable:"",filterable:"",modelValue:n.value.applyUserId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value.applyUserId=e),placeholder:"请选择申请人"},{default:l(()=>[(o(!0),D(T,null,S(Y.value,(e,d)=>(o(),r(x,{key:d,value:e.value,label:e.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),p.value?(o(),r(m,{key:0,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"机器码"},{default:l(()=>[a(I,{modelValue:n.value.machineCode,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value.machineCode=e),clearable:"",placeholder:"请输入机器码"},null,8,["modelValue"])]),_:1})]),_:1})):u("",!0),p.value?(o(),r(m,{key:1,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"申请项目名称"},{default:l(()=>[a(I,{modelValue:n.value.projectName,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value.projectName=e),clearable:"",placeholder:"请输入申请项目名称"},null,8,["modelValue"])]),_:1})]),_:1})):u("",!0),p.value?(o(),r(m,{key:2,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"备注"},{default:l(()=>[a(I,{modelValue:n.value.remark,"onUpdate:modelValue":t[3]||(t[3]=e=>n.value.remark=e),clearable:"",placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1})):u("",!0),p.value?(o(),r(m,{key:3,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"用户数目"},{default:l(()=>[a(W,{modelValue:n.value.userCount,"onUpdate:modelValue":t[4]||(t[4]=e=>n.value.userCount=e),clearable:"",placeholder:"请输入用户数目"},null,8,["modelValue"])]),_:1})]),_:1})):u("",!0),p.value?(o(),r(m,{key:4,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"并发数目"},{default:l(()=>[a(W,{modelValue:n.value.concurrencyCount,"onUpdate:modelValue":t[5]||(t[5]=e=>n.value.concurrencyCount=e),clearable:"",placeholder:"请输入并发数目"},null,8,["modelValue"])]),_:1})]),_:1})):u("",!0),p.value?(o(),r(m,{key:5,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"授权到期时间"},{default:l(()=>[a(M,{placeholder:"请选择授权到期时间","value-format":"YYYY/MM/DD",type:"daterange",modelValue:n.value.licenseExpirationRange,"onUpdate:modelValue":t[6]||(t[6]=e=>n.value.licenseExpirationRange=e)},null,8,["modelValue"])]),_:1})]),_:1})):u("",!0),a(m,{xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"流程状态"},{default:l(()=>[a(C,{clearable:"",modelValue:n.value.flowState,"onUpdate:modelValue":t[7]||(t[7]=e=>n.value.flowState=e),placeholder:"请选择流程状态"},{default:l(()=>[(o(!0),D(T,null,S(b(A)("licrecordinfo_flowstate"),(e,d)=>(o(),r(x,{key:d,value:e.code,label:`[${e.code}] ${e.value}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),p.value?(o(),r(m,{key:6,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"系统类型"},{default:l(()=>[a(C,{clearable:"",modelValue:n.value.systemType,"onUpdate:modelValue":t[8]||(t[8]=e=>n.value.systemType=e),placeholder:"请选择系统类型"},{default:l(()=>[(o(!0),D(T,null,S(b(A)("licrecordinfo_systemtype"),(e,d)=>(o(),r(x,{key:d,value:e.code,label:`[${e.code}] ${e.value}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):u("",!0),p.value?(o(),r(m,{key:7,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"授权方式 "},{default:l(()=>[a(C,{clearable:"",modelValue:n.value.licenseType,"onUpdate:modelValue":t[9]||(t[9]=e=>n.value.licenseType=e),placeholder:"请选择授权方式 "},{default:l(()=>[(o(!0),D(T,null,S(b(A)("licrecordinfo_licensetype"),(e,d)=>(o(),r(x,{key:d,value:e.code,label:`[${e.code}] ${e.value}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):u("",!0),p.value?(o(),r(m,{key:8,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"审批人"},{default:l(()=>[a(C,{clearable:"",filterable:"",modelValue:n.value.approveUserID,"onUpdate:modelValue":t[10]||(t[10]=e=>n.value.approveUserID=e),placeholder:"请输入审批人"},{default:l(()=>[(o(!0),D(T,null,S(Y.value,(e,d)=>(o(),r(x,{key:d,value:e.value,label:e.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):u("",!0),p.value?(o(),r(m,{key:9,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"审批时间"},{default:l(()=>[a(M,{placeholder:"请选择审批时间","value-format":"YYYY/MM/DD",type:"daterange",modelValue:n.value.approveDatetimeRange,"onUpdate:modelValue":t[11]||(t[11]=e=>n.value.approveDatetimeRange=e)},null,8,["modelValue"])]),_:1})]),_:1})):u("",!0),p.value?(o(),r(m,{key:10,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"审批备注"},{default:l(()=>[a(I,{modelValue:n.value.approveRemark,"onUpdate:modelValue":t[12]||(t[12]=e=>n.value.approveRemark=e),clearable:"",placeholder:"请输入审批备注"},null,8,["modelValue"])]),_:1})]),_:1})):u("",!0),p.value?(o(),r(m,{key:11,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"发放授权时间"},{default:l(()=>[a(M,{placeholder:"请选择发放授权时间","value-format":"YYYY/MM/DD",type:"daterange",modelValue:n.value.giveDateRange,"onUpdate:modelValue":t[13]||(t[13]=e=>n.value.giveDateRange=e)},null,8,["modelValue"])]),_:1})]),_:1})):u("",!0),p.value?(o(),r(m,{key:12,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:l(()=>[a(c,{label:"新授权码 "},{default:l(()=>[a(I,{modelValue:n.value.newLicense,"onUpdate:modelValue":t[14]||(t[14]=e=>n.value.newLicense=e),clearable:"",placeholder:"请输入新授权码 "},null,8,["modelValue"])]),_:1})]),_:1})):u("",!0),a(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb10"},{default:l(()=>[a(c,null,{default:l(()=>[a(ue,null,{default:l(()=>[R((o(),r(g,{type:"primary",icon:"ele-Search",onClick:w},{default:l(()=>[y(" 查询 ")]),_:1})),[[U,"licRecordInfo:page"]]),a(g,{icon:"ele-Refresh",onClick:t[15]||(t[15]=()=>n.value={})},{default:l(()=>[y(" 重置 ")]),_:1}),p.value?u("",!0):(o(),r(g,{key:0,icon:"ele-ZoomIn",onClick:F},{default:l(()=>[y(" 高级 ")]),_:1})),_.value?u("",!0):(o(),r(g,{key:1,icon:"ele-ZoomIn",onClick:Q},{default:l(()=>[y(" 展开 ")]),_:1})),_.value?(o(),r(g,{key:2,icon:"ele-ZoomOut",onClick:Q},{default:l(()=>[y(" 折叠 ")]),_:1})):u("",!0),p.value?(o(),r(g,{key:3,icon:"ele-ZoomOut",onClick:F},{default:l(()=>[y(" 隐藏 ")]),_:1})):u("",!0),R((o(),r(g,{type:"primary",icon:"ele-Plus",onClick:oe},{default:l(()=>[y(" 新增 ")]),_:1})),[[U,"licRecordInfo:add"]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(H,{class:"full-table",shadow:"hover",style:{"margin-top":"8px"}},{default:l(()=>[R((o(),r(se,{data:P.value,style:{width:"100%"},"tooltip-effect":"light","row-key":"id",onSortChange:ae,border:"",onRowDblclick:G},{default:l(()=>[a(s,{type:"index",label:"序号",width:"55",align:"center"}),a(s,{prop:"applyUserId",label:"申请人ID",width:"120","show-overflow-tooltip":""},{default:l(e=>[we("span",null,L(e.row.applyUserIdRealName),1)]),_:1}),a(s,{prop:"projectName",label:"申请项目名称","min-width":"120","show-overflow-tooltip":""}),a(s,{prop:"machineCode",label:"机器码","min-width":"300","show-overflow-tooltip":""}),_.value?(o(),r(s,{key:0,prop:"newLicense",label:"新授权码 ","min-width":"730","show-overflow-tooltip":""})):u("",!0),a(s,{prop:"licenseType",label:"授权方式 ","min-width":"100","show-overflow-tooltip":"","text-align":"center",align:"center"},{default:l(e=>{var d;return[a($,{type:(d=b(V)("licrecordinfo_licensetype",e.row.licenseType))==null?void 0:d.tagType},{default:l(()=>{var h;return[y(L((h=b(V)("licrecordinfo_licensetype",e.row.licenseType))==null?void 0:h.value),1)]}),_:2},1032,["type"])]}),_:1}),a(s,{prop:"userCount",label:"用户数目","min-width":"100","show-overflow-tooltip":""}),a(s,{prop:"concurrencyCount",label:"并发数目","min-width":"100","show-overflow-tooltip":""}),a(s,{prop:"licenseExpirationStr",label:"授权到期时间","min-width":"140","show-overflow-tooltip":""}),a(s,{prop:"flowState",label:"流程状态","min-width":"100","show-overflow-tooltip":"",align:"center"},{default:l(e=>{var d;return[a($,{type:(d=b(V)("licrecordinfo_flowstate",e.row.flowState))==null?void 0:d.tagType},{default:l(()=>{var h;return[y(L((h=b(V)("licrecordinfo_flowstate",e.row.flowState))==null?void 0:h.value),1)]}),_:2},1032,["type"])]}),_:1}),_.value?(o(),r(s,{key:1,prop:"remark",label:"备注","min-width":"140","show-overflow-tooltip":""})):u("",!0),_.value?(o(),r(s,{key:2,prop:"approveUserIDRealName",label:"审批人","min-width":"140","show-overflow-tooltip":""})):u("",!0),_.value?(o(),r(s,{key:3,prop:"approveDatetime",label:"审批时间","min-width":"140","show-overflow-tooltip":""})):u("",!0),_.value?(o(),r(s,{key:4,prop:"approveRemark",label:"审批备注","min-width":"140","show-overflow-tooltip":""})):u("",!0),_.value?(o(),r(s,{key:5,prop:"giveDate",label:"发放授权时间","min-width":"140","show-overflow-tooltip":""})):u("",!0),_.value?(o(),r(s,{key:6,prop:"systemType",label:"系统类型","min-width":"140","show-overflow-tooltip":""},{default:l(e=>{var d;return[a($,{type:(d=b(V)("licrecordinfo_systemtype",e.row.systemType))==null?void 0:d.tagType},{default:l(()=>{var h;return[y(L((h=b(V)("licrecordinfo_systemtype",e.row.systemType))==null?void 0:h.value),1)]}),_:2},1032,["type"])]}),_:1})):u("",!0),_.value?(o(),r(s,{key:7,prop:"id",label:"ID",width:"120",align:"center"})):u("",!0),b(J)("licRecordInfo:edit")||b(J)("licRecordInfo:delete")?(o(),r(s,{key:8,label:"操作",width:"210",align:"left",fixed:"right","show-overflow-tooltip":""},{default:l(e=>[a(g,{icon:"ele-Edit",size:"small",text:"",type:"primary",onClick:d=>G(e.row)},{default:l(()=>[y(" 查看 ")]),_:2},1032,["onClick"]),e.row.approveState=="0"&&e.row.licenseType=="1"?R((o(),r(g,{key:0,icon:"ele-Stamp",size:"small",text:"",type:"primary",onClick:d=>q(e.row)},{default:l(()=>[y(" 审核 ")]),_:2},1032,["onClick"])),[[U,"licRecordInfo:approve"]]):u("",!0),e.row.approveState=="0"&&e.row.licenseType=="2"?R((o(),r(g,{key:1,icon:"ele-Stamp",size:"small",text:"",type:"primary",onClick:d=>q(e.row)},{default:l(()=>[y(" 审核 ")]),_:2},1032,["onClick"])),[[U,"licRecordInfo:approve2"]]):u("",!0),R((o(),r(g,{icon:"ele-Delete",size:"small",text:"",type:"primary",onClick:d=>te(e.row)},{default:l(()=>[y(" 删除 ")]),_:2},1032,["onClick"])),[[U,"licRecordInfo:delete"]])]),_:1})):u("",!0)]),_:1},8,["data"])),[[ce,z.value]]),a(pe,{currentPage:k.value.page,"onUpdate:currentPage":t[16]||(t[16]=e=>k.value.page=e),"page-size":k.value.pageSize,"onUpdate:pageSize":t[17]||(t[17]=e=>k.value.pageSize=e),total:k.value.total,"page-sizes":[10,20,50,100,200,500],small:"",background:"",onSizeChange:re,onCurrentChange:ne,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"]),a(me,{ref_key:"printDialogRef",ref:ee,title:le.value,onReloadTable:w},null,8,["title"]),a(ve,{ref_key:"editDialogRef",ref:B,title:j.value,onReloadTable:w},null,8,["title"]),a(fe,{ref_key:"approveDialogRef",ref:E,title:O.value,onReloadTable:w},null,8,["title"]),a(ye,{ref_key:"lookDialogRef",ref:N,title:Z.value,onReloadTable:w},null,8,["title"])]),_:1})])}}}),Ne=he(Re,[["__scopeId","data-v-5853983a"]]);export{Ne as default};

import{a as Q}from"./authFunction-fIb3RNfc.js";import{g as me,a as q}from"./dict-utils-rfVz76dT.js";import fe from"./preview-J91Nyzbc.js";import ve from"./editDialog-Z-K04Xhx.js";import ge from"./importDialog-THx9Z9pz.js";import{p as _e,b as ye,c as he,g as be}from"./licMachineCode-D0t31_8V.js";import{p as Ce}from"./licRecordInfo-sgRvjWbe.js";import{k as W,r as i,t as d,a6 as Z,x as n,M as V,D as l,A as e,a4 as R,a5 as z,y as r,G as _,F as D,B as w,S as m,O as we,T as G,aj as ke,E as x,ai as B}from"./store-mQZkmHj-.js";import{_ as xe}from"./_plugin-vue_export-helper-x3n3nnut.js";import"./index-lw7p-_pG.js";import"./request--bhxBvPJ.js";import"./sys-file-api-F5kUk1jA.js";const De={class:"licMachineCode-container"},Ve=W({name:"licMachineCode"}),Ue=W({...Ve,setup(Me){const p=i(!1),H=i(),U=i(),$=i(),M=i(!1),A=i([]),s=i({}),y=i({page:1,pageSize:10,total:0}),J=i(""),T=i(""),N=i(""),P=()=>{p.value=!p.value},K=i(),c=i([]),X=o=>{c.value=o},h=async()=>{var a,u;M.value=!0;var o=await _e(Object.assign(s.value,y.value));A.value=((a=o.data.result)==null?void 0:a.items)??[],y.value.total=(u=o.data.result)==null?void 0:u.total,M.value=!1},Y=async o=>{s.value.field=o.prop,s.value.order=o.order,await h()},ee=()=>{T.value="添加授权码管理-机器码列表",U.value.openDialog({})},le=()=>{N.value="导入",$.value.openDialog({})},ae=()=>{console.log("multipleSelection",c.value),c.value.length==0?x({message:"请点击列表中序号右侧的复选框,勾选需要【删除】的数据！",type:"error"}):B.confirm(`确定要删除${c.value.length}笔记录吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{let o="";for(var a=0;a<c.value.length;a++)a==0?o=c.value[a].id:o+=","+c.value[a].id;await ye({ids:o}).then(u=>{u.data.code==200?x({message:`${u.data.result.msg}`,type:"success"}):x({message:`导入失败${u.data.message}`,type:"error"}),console.log("导入成功",u)})}).catch(()=>{})},te=()=>{console.log("multipleSelection",c.value),c.value.length==0?x({message:"请点击列表中序号右侧的复选框,勾选需要产生【标准授权】的数据！",type:"error"}):B.confirm(`确定要产生${c.value.length}笔【标准授权】申请记录吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{let o="";for(var a=0;a<c.value.length;a++)a==0?o=c.value[a].id:o+=","+c.value[a].id;await Ce({ids:o}).then(u=>{u.data.code==200?x({message:`${u.data.result.msg}`,type:"success"}):x({message:`导入失败${u.data.message}`,type:"error"}),console.log("导入成功",u)})}).catch(()=>{})},E=o=>{T.value="编辑授权码管理-机器码列表",U.value.openDialog(o)},oe=o=>{B.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await he(o),h(),x.success("删除成功")}).catch(()=>{})},ne=o=>{y.value.pageSize=o,h()},se=o=>{y.value.page=o,h()},S=i([]);return(async()=>{let o=await be();S.value=o.data.result??[]})(),h(),(o,a)=>{const u=d("el-option"),I=d("el-select"),b=d("el-form-item"),C=d("el-col"),L=d("el-input"),j=d("el-input-number"),f=d("el-button"),re=d("el-button-group"),ue=d("el-row"),ie=d("el-form"),F=d("el-card"),v=d("el-table-column"),de=d("el-tag"),ce=d("el-pagination"),k=Z("auth"),pe=Z("loading");return n(),V("div",De,[l(F,{shadow:"hover","body-style":{paddingBottom:"0"}},{default:e(()=>[l(ie,{model:s.value,ref:"queryForm",labelWidth:"90"},{default:e(()=>[l(ue,null,{default:e(()=>[l(C,{xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:e(()=>[l(b,{label:"负责人"},{default:e(()=>[l(I,{clearable:"",filterable:"",modelValue:s.value.applyUserId,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value.applyUserId=t),placeholder:"请选择负责人"},{default:e(()=>[(n(!0),V(R,null,z(S.value,(t,g)=>(n(),r(u,{key:g,value:t.value,label:t.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),p.value?(n(),r(C,{key:0,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:e(()=>[l(b,{label:"机器码"},{default:e(()=>[l(L,{modelValue:s.value.machineCode,"onUpdate:modelValue":a[1]||(a[1]=t=>s.value.machineCode=t),clearable:"",placeholder:"请输入机器码"},null,8,["modelValue"])]),_:1})]),_:1})):_("",!0),p.value?(n(),r(C,{key:1,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:e(()=>[l(b,{label:"项目名称"},{default:e(()=>[l(L,{modelValue:s.value.projectName,"onUpdate:modelValue":a[2]||(a[2]=t=>s.value.projectName=t),clearable:"",placeholder:"请输入项目名称"},null,8,["modelValue"])]),_:1})]),_:1})):_("",!0),p.value?(n(),r(C,{key:2,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:e(()=>[l(b,{label:"备注"},{default:e(()=>[l(L,{modelValue:s.value.remark,"onUpdate:modelValue":a[3]||(a[3]=t=>s.value.remark=t),clearable:"",placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1})):_("",!0),p.value?(n(),r(C,{key:3,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:e(()=>[l(b,{label:"并发数目"},{default:e(()=>[l(j,{modelValue:s.value.concurrencyCount,"onUpdate:modelValue":a[4]||(a[4]=t=>s.value.concurrencyCount=t),clearable:"",placeholder:"请输入并发数目"},null,8,["modelValue"])]),_:1})]),_:1})):_("",!0),p.value?(n(),r(C,{key:4,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:e(()=>[l(b,{label:"用户数目"},{default:e(()=>[l(j,{modelValue:s.value.userCount,"onUpdate:modelValue":a[5]||(a[5]=t=>s.value.userCount=t),clearable:"",placeholder:"请输入用户数目"},null,8,["modelValue"])]),_:1})]),_:1})):_("",!0),p.value?(n(),r(C,{key:5,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:e(()=>[l(b,{label:"负责人"},{default:e(()=>[l(I,{clearable:"",filterable:"",modelValue:s.value.applyUserId,"onUpdate:modelValue":a[6]||(a[6]=t=>s.value.applyUserId=t),placeholder:"请选择负责人"},{default:e(()=>[(n(!0),V(R,null,z(S.value,(t,g)=>(n(),r(u,{key:g,value:t.value,label:t.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):_("",!0),p.value?(n(),r(C,{key:6,xs:24,sm:12,md:12,lg:8,xl:4,class:"mb10"},{default:e(()=>[l(b,{label:"系统类型"},{default:e(()=>[l(I,{clearable:"",modelValue:s.value.systemType,"onUpdate:modelValue":a[7]||(a[7]=t=>s.value.systemType=t),placeholder:"请选择系统类型"},{default:e(()=>[(n(!0),V(R,null,z(D(me)("licrecordinfo_systemtype"),(t,g)=>(n(),r(u,{key:g,value:t.code,label:`[${t.code}] ${t.value}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):_("",!0),l(C,{xs:24,sm:18,md:18,lg:18,xl:18,class:"mb10"},{default:e(()=>[l(b,null,{default:e(()=>[l(re,null,{default:e(()=>[w((n(),r(f,{type:"primary",icon:"ele-Search",onClick:h},{default:e(()=>[m(" 查询 ")]),_:1})),[[k,"licMachineCode:page"]]),l(f,{icon:"ele-Refresh",onClick:a[8]||(a[8]=()=>s.value={})},{default:e(()=>[m(" 重置 ")]),_:1}),p.value?_("",!0):(n(),r(f,{key:0,icon:"ele-ZoomIn",onClick:P},{default:e(()=>[m(" 高级 ")]),_:1})),p.value?(n(),r(f,{key:1,icon:"ele-ZoomOut",onClick:P},{default:e(()=>[m(" 隐藏 ")]),_:1})):_("",!0),w((n(),r(f,{type:"primary",icon:"ele-Plus",onClick:ee},{default:e(()=>[m(" 新增 ")]),_:1})),[[k,"licMachineCode:add"]]),w((n(),r(f,{icon:"ele-Upload",onClick:le},{default:e(()=>[m(" 导入 ")]),_:1})),[[k,"licMachineCode:add"]]),w((n(),r(f,{icon:"ele-Document",onClick:te},{default:e(()=>[m(" 产生标准授权 ")]),_:1})),[[k,"licMachineCode:add"]]),w((n(),r(f,{type:"danger",icon:"ele-Delete",onClick:ae},{default:e(()=>[m(" 批量删除 ")]),_:1})),[[k,"licMachineCode:delete"]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(F,{class:"full-table",shadow:"hover",style:{"margin-top":"8px"}},{default:e(()=>[w((n(),r(D(ke),{ref_key:"multipleTableRef",ref:K,data:A.value,style:{width:"100%"},"tooltip-effect":"light",onRowDblclick:E,onSelectionChange:X,"row-key":"id",onSortChange:Y,border:""},{default:e(()=>[l(v,{type:"selection",width:"55"}),l(v,{type:"index",label:"序号",width:"55",align:"center"}),l(v,{prop:"projectName",label:"项目名称","min-width":"140","show-overflow-tooltip":""}),l(v,{prop:"machineCode",label:"机器码","min-width":"140","show-overflow-tooltip":""}),l(v,{prop:"remark",label:"备注","min-width":"140","show-overflow-tooltip":""}),l(v,{prop:"concurrencyCount",label:"并发数目","min-width":"140","show-overflow-tooltip":""}),l(v,{prop:"userCount",label:"用户数目","min-width":"140","show-overflow-tooltip":""}),l(v,{prop:"applyUserId",label:"负责人","min-width":"120","show-overflow-tooltip":""},{default:e(t=>[we("span",null,G(t.row.applyUserIdRealName),1)]),_:1}),l(v,{prop:"systemType",label:"系统类型",width:"140","show-overflow-tooltip":""},{default:e(t=>{var g;return[l(de,{type:(g=D(q)("licrecordinfo_systemtype",t.row.systemType))==null?void 0:g.tagType},{default:e(()=>{var O;return[m(G((O=D(q)("licrecordinfo_systemtype",t.row.systemType))==null?void 0:O.value),1)]}),_:2},1032,["type"])]}),_:1}),D(Q)("licMachineCode:edit")||D(Q)("licMachineCode:delete")?(n(),r(v,{key:0,label:"操作",width:"140",align:"center",fixed:"right","show-overflow-tooltip":""},{default:e(t=>[w((n(),r(f,{icon:"ele-Edit",size:"small",text:"",type:"primary",onClick:g=>E(t.row)},{default:e(()=>[m(" 编辑 ")]),_:2},1032,["onClick"])),[[k,"licMachineCode:edit"]]),w((n(),r(f,{icon:"ele-Delete",size:"small",text:"",type:"primary",onClick:g=>oe(t.row)},{default:e(()=>[m(" 删除 ")]),_:2},1032,["onClick"])),[[k,"licMachineCode:delete"]])]),_:1})):_("",!0)]),_:1},8,["data"])),[[pe,M.value]]),l(ce,{currentPage:y.value.page,"onUpdate:currentPage":a[9]||(a[9]=t=>y.value.page=t),"page-size":y.value.pageSize,"onUpdate:pageSize":a[10]||(a[10]=t=>y.value.pageSize=t),total:y.value.total,"page-sizes":[10,20,50,100,200,500],small:"",background:"",onSizeChange:ne,onCurrentChange:se,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"]),l(fe,{ref_key:"printDialogRef",ref:H,title:J.value,onReloadTable:h},null,8,["title"]),l(ve,{ref_key:"editDialogRef",ref:U,title:T.value,onReloadTable:h},null,8,["title"]),l(ge,{ref_key:"importDialogRef",ref:$,title:N.value,onReloadTable:h},null,8,["title"])]),_:1})])}}}),Fe=xe(Ue,[["__scopeId","data-v-bb2cc118"]]);export{Fe as default};

import{_ as L}from"./editPos.vue_vue_type_script_setup_true_name_sysEditPos_lang-6AciU4kN.js";import{g as T}from"./index-zQlakb1H.js";import{S as q}from"./sys-pos-api-Js4fKc92.js";import{k as B,r as G,L as H,p as j,t,a6 as D,x as r,M as J,D as e,A as l,B as w,y as u,S as o,T as g,ai as K,E as O}from"./store-dof5ccn5.js";const W={class:"sys-pos-container"},X=B({name:"sysPos"}),oe=B({...X,setup(Y){const h=G(),a=H({loading:!1,posData:[],queryParams:{name:void 0,code:void 0},editPosTitle:""});j(async()=>{p()});const p=async()=>{a.loading=!0;var s=await T(q).apiSysPosListGet(a.queryParams.name,a.queryParams.code);a.posData=s.data.result??[],a.loading=!1},V=()=>{a.queryParams.name=void 0,a.queryParams.code=void 0,p()},S=()=>{var s;a.editPosTitle="添加职位",(s=h.value)==null||s.openDialog({status:1,orderNo:100})},E=s=>{var d;a.editPosTitle="编辑职位",(d=h.value)==null||d.openDialog(s)},N=s=>{K.confirm(`确定删除职位：【${s.name}】?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await T(q).apiSysPosDeletePost({id:s.id}),p(),O.success("删除成功")}).catch(()=>{})};return(s,d)=>{const v=t("el-input"),P=t("el-form-item"),f=t("el-button"),U=t("el-button-group"),F=t("el-form"),k=t("el-card"),i=t("el-table-column"),c=t("el-tag"),A=t("ele-InfoFilled"),_=t("el-icon"),m=t("el-text"),x=t("ele-UserFilled"),y=t("el-descriptions-item"),C=t("ele-Calendar"),M=t("ele-Tickets"),$=t("el-descriptions"),I=t("el-popover"),Q=t("el-table"),b=D("auth"),R=D("loading");return r(),J("div",W,[e(k,{shadow:"hover","body-style":{paddingBottom:"0"}},{default:l(()=>[e(F,{model:a.queryParams,ref:"queryForm",inline:!0},{default:l(()=>[e(P,{label:"职位名称"},{default:l(()=>[e(v,{modelValue:a.queryParams.name,"onUpdate:modelValue":d[0]||(d[0]=n=>a.queryParams.name=n),placeholder:"职位名称",clearable:""},null,8,["modelValue"])]),_:1}),e(P,{label:"职位编码"},{default:l(()=>[e(v,{modelValue:a.queryParams.code,"onUpdate:modelValue":d[1]||(d[1]=n=>a.queryParams.code=n),placeholder:"职位编码",clearable:""},null,8,["modelValue"])]),_:1}),e(P,null,{default:l(()=>[e(U,null,{default:l(()=>[w((r(),u(f,{type:"primary",icon:"ele-Search",onClick:p},{default:l(()=>[o(" 查询 ")]),_:1})),[[b,"sysPos:list"]]),e(f,{icon:"ele-Refresh",onClick:V},{default:l(()=>[o(" 重置 ")]),_:1})]),_:1})]),_:1}),e(P,null,{default:l(()=>[w((r(),u(f,{type:"primary",icon:"ele-Plus",onClick:S},{default:l(()=>[o(" 新增 ")]),_:1})),[[b,"sysPos:add"]])]),_:1})]),_:1},8,["model"])]),_:1}),e(k,{class:"full-table",shadow:"hover",style:{"margin-top":"8px"}},{default:l(()=>[w((r(),u(Q,{data:a.posData,style:{width:"100%"},border:""},{default:l(()=>[e(i,{type:"index",label:"序号",width:"55",align:"center"}),e(i,{prop:"name",label:"职位名称",align:"center","show-overflow-tooltip":""}),e(i,{prop:"code",label:"职位编码",align:"center","show-overflow-tooltip":""}),e(i,{prop:"orderNo",label:"排序",width:"70",align:"center","show-overflow-tooltip":""}),e(i,{label:"状态",width:"70",align:"center","show-overflow-tooltip":""},{default:l(n=>[n.row.status===1?(r(),u(c,{key:0,type:"success"},{default:l(()=>[o("启用")]),_:1})):(r(),u(c,{key:1,type:"danger"},{default:l(()=>[o("禁用")]),_:1}))]),_:1}),e(i,{label:"修改记录",width:"100",align:"center","show-overflow-tooltip":""},{default:l(n=>[e(I,{placement:"bottom",width:"280",trigger:"hover"},{reference:l(()=>[e(m,{type:"primary"},{default:l(()=>[e(_,null,{default:l(()=>[e(A)]),_:1}),o("详情 ")]),_:1})]),default:l(()=>[e($,{direction:"vertical",column:2,border:""},{default:l(()=>[e(y,{width:"140"},{label:l(()=>[e(m,null,{default:l(()=>[e(_,null,{default:l(()=>[e(x)]),_:1}),o("创建者 ")]),_:1})]),default:l(()=>[e(c,null,{default:l(()=>[o(g(n.row.createUserName??"无"),1)]),_:2},1024)]),_:2},1024),e(y,null,{label:l(()=>[e(m,null,{default:l(()=>[e(_,null,{default:l(()=>[e(C)]),_:1}),o("创建时间 ")]),_:1})]),default:l(()=>[e(c,null,{default:l(()=>[o(g(n.row.createTime??"无"),1)]),_:2},1024)]),_:2},1024),e(y,null,{label:l(()=>[e(m,null,{default:l(()=>[e(_,null,{default:l(()=>[e(x)]),_:1}),o("修改者 ")]),_:1})]),default:l(()=>[e(c,null,{default:l(()=>[o(g(n.row.updateUserName??"无"),1)]),_:2},1024)]),_:2},1024),e(y,null,{label:l(()=>[e(m,null,{default:l(()=>[e(_,null,{default:l(()=>[e(C)]),_:1}),o("修改时间 ")]),_:1})]),default:l(()=>[e(c,null,{default:l(()=>[o(g(n.row.updateTime??"无"),1)]),_:2},1024)]),_:2},1024),e(y,null,{label:l(()=>[e(m,null,{default:l(()=>[e(_,null,{default:l(()=>[e(M)]),_:1}),o("备注 ")]),_:1})]),default:l(()=>[o(" "+g(n.row.remark),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),e(i,{label:"操作",width:"140",fixed:"right",align:"center","show-overflow-tooltip":""},{default:l(n=>[w((r(),u(f,{icon:"ele-Edit",size:"small",text:"",type:"primary",onClick:z=>E(n.row)},{default:l(()=>[o(" 编辑 ")]),_:2},1032,["onClick"])),[[b,"sysPos:update"]]),w((r(),u(f,{icon:"ele-Delete",size:"small",text:"",type:"danger",onClick:z=>N(n.row)},{default:l(()=>[o(" 删除 ")]),_:2},1032,["onClick"])),[[b,"sysPos:delete"]])]),_:1})]),_:1},8,["data"])),[[R,a.loading]])]),_:1}),e(L,{ref_key:"editPosRef",ref:h,title:a.editPosTitle,onHandleQuery:p},null,8,["title"])])}}});export{oe as default};

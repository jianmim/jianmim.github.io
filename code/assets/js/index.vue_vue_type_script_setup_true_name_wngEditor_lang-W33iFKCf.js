import{k as p,av as h,L as y,aw as x,w as i,x as C,M as S,D as u,F as m,ax as F,Z as V,ay as v,E as w}from"./store-dof5ccn5.js";import{g as E}from"./index-zQlakb1H.js";import{S as H}from"./sys-file-api-qmAEMBR-.js";const b={class:"editor-container"},T=p({name:"wngEditor"}),I=p({...T,props:{disable:{type:Boolean,default:()=>!1},placeholder:{type:String,default:()=>"请输入内容..."},mode:{type:String,default:()=>"default"},height:{type:String,default:()=>"310px"},getHtml:String,getText:String},emits:["update:getHtml","update:getText"],setup(l,{emit:g}){const o=l,s=g,r=h(),d=y({editorConfig:{placeholder:o.placeholder,MENU_CONF:{uploadImage:{fieldName:"file",customUpload(e,t){(async()=>{const a=await E(H).apiSysFileUploadFilePostForm(e);a.data.type=="success"&&a.data.result!=null?t(a.data.result.url,a.data.result.name,a.data.result.url):w.error("上传失败！")})()}},insertImage:{checkImage(e,t,n){return e.indexOf("http")!==0?"图片网址必须以 http/https 开头":!0}}}},editorVal:o.getHtml}),c=e=>{r.value=e},f=e=>{s("update:getHtml",e.getHtml()),s("update:getText",e.getText())};return x(()=>{const e=r.value;e!=null&&e.destroy()}),i(()=>o.disable,e=>{const t=r.value;t!=null&&(e?t.disable():t.enable())},{deep:!0}),i(()=>o.getHtml,e=>{d.editorVal=e},{deep:!0}),(e,t)=>(C(),S("div",b,[u(m(F),{editor:r.value,mode:l.mode},null,8,["editor","mode"]),u(m(v),{mode:l.mode,defaultConfig:d.editorConfig,style:V({height:l.height}),modelValue:d.editorVal,"onUpdate:modelValue":t[0]||(t[0]=n=>d.editorVal=n),onOnCreated:c,onOnChange:f},null,8,["mode","defaultConfig","style","modelValue"])]))}});export{I as _};

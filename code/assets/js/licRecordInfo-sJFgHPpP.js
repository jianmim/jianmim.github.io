import{s as h,b as I,E as d}from"./store-dof5ccn5.js";import{f as R,L as c,S as v}from"./index-xdJ7pE-g.js";const w=R(),{dictList:p}=h(w);function D(e,r){const t=p.value.filter(s=>s.code===e);if(t.length===0)return null;const n=t[0].children.filter(s=>s.code==r);return n.length===0?null:n[0]}function y(e){const r=p.value.filter(t=>t.code===e);return r.length===0?null:r[0]}function j(e){var t;return((t=y(e))==null?void 0:t.children)??[]}const a=I.create({baseURL:window.__env__.VITE_API_URL,timeout:5e4,headers:{"Content-Type":"application/json"}}),l="access-token",f=`x-${l}`,u=()=>{c.remove(l),c.remove(f),v.clear(),window.location.reload()};a.interceptors.request.use(e=>{var t;const r=c.get(l);if(r){e.headers.Authorization=`Bearer ${r}`;const n=T(r),s=k(n.exp);if(new Date>=s){const o=c.get(f);o&&(e.headers["X-Authorization"]=`Bearer ${o}`)}if(((t=e.method)==null?void 0:t.toLowerCase())==="get"&&e.data){let o=e.url+"?"+g(e.data);o=o.slice(0,-1),e.data={},e.url=o}}return e},e=>Promise.reject(e));a.interceptors.response.use(e=>{var r=e.status,t=e.data;if(r===401&&u(),r>=400)throw new Error(e.statusText||"Request Error.");if(t&&t.hasOwnProperty("errors")&&t.errors)throw new Error(JSON.stringify(t.errors||"Request Error."));var n=e.headers[l],s=e.headers[f];if(n==="invalid_token"?u():s&&n&&n!=="invalid_token"&&(c.set(l,n),c.set(f,s)),t.code===401)u();else{if(t.code===void 0)return Promise.resolve(e);if(t.code!==200){var o;throw t.message&&typeof t.message=="object"?o=JSON.stringify(t.message):o=t.message,d.error(o),new Error(o)}}return e},e=>(e.response&&e.response.status===401&&u(),e.message.indexOf("timeout")!=-1?d.error("网络超时"):e.message=="Network Error"?d.error("网络连接错误"):e.response.data?d.error(e.response.statusText):d.error("接口路径找不到"),Promise.reject(e)));function g(e){let r="";for(const s of Object.keys(e)){const o=e[s];var t=encodeURIComponent(s)+"=";if(o!==null&&o!==""&&typeof o<"u")if(typeof o=="object"){for(const i of Object.keys(o))if(o[i]!==null&&o[i]!==""&&typeof o[i]<"u"){let m=s+"["+i+"]";var n=encodeURIComponent(m)+"=";r+=n+encodeURIComponent(o[i])+"&"}}else r+=t+encodeURIComponent(o)+"&"}return r}function T(e){e=e.replace(/_/g,"/").replace(/-/g,"+");var r=decodeURIComponent(escape(window.atob(e.split(".")[1])));return JSON.parse(r)}function k(e){return new Date(e*1e3)}const A=e=>a({url:"/api/licRecordInfo/add",method:"post",data:e}),E=e=>a({url:"/api/licRecordInfo/delete",method:"post",data:e}),_=e=>a({url:"/api/licRecordInfo/update",method:"post",data:e}),b=e=>a({url:"/api/licRecordInfo/page",method:"post",data:e}),x=e=>a({url:"/api/licRecordInfo/detail",method:"get",data:{id:e}}),C=()=>a({url:"/api/licRecordInfo/SysUserApplyUserIdDropdown",method:"get"});export{A as a,C as b,D as c,x as d,E as e,j as g,b as p,_ as u};

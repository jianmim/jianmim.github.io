import{k as K,r as p,L as E,p as F,w as I,t as s,a6 as L,x as m,y as M,A as t,O as c,D as o,F as g,aE as R,S as r,aF as G,B as P,M as U,T as j}from"./store-dof5ccn5.js";import{g as q}from"./index-xdJ7pE-g.js";import{S as z}from"./sys-org-api-Edv2nJUp.js";import{_ as H}from"./_plugin-vue_export-helper-x3n3nnut.js";const J={class:"card-header"},Q={class:"tree-h-flex"},W={class:"tree-h-left"},X={class:"tree-h-right"},Y={style:{"margin-bottom":"45px"}},Z=K({__name:"orgTree",emits:["node-click"],setup($,{expose:k,emit:x}){const i=p(""),n=p(),a=E({loading:!1,orgData:[],isShowCheckbox:!1,ownOrgData:[]});F(()=>{_()}),I(i,e=>{n.value.filter(e)});const _=async()=>{a.loading=!0;var e=await q(z).apiSysOrgListGet(0);a.orgData=e.data.result??[],a.loading=!1},v=e=>{a.isShowCheckbox=!0,n.value.setCheckedKeys([]),a.ownOrgData=e},w=()=>n.value.getCheckedKeys(),y=(e,l)=>e?l.name.includes(e):!0,C=async e=>{if(e=="expandAll")for(let l=0;l<n.value.store._getAllNodes().length;l++)n.value.store._getAllNodes()[l].expanded=!0;else if(e=="collapseAll")for(let l=0;l<n.value.store._getAllNodes().length;l++)n.value.store._getAllNodes()[l].expanded=!1;else e=="refresh"?_():e=="rootNode"&&h("node-click",{id:0,name:""})},h=x,b=e=>{h("node-click",{id:e.id,name:e.name})};return k({initTreeData:_,setCheckedKeys:v,getCheckedKeys:w}),(e,l)=>{const A=s("el-input"),u=s("el-icon"),D=s("el-button"),d=s("el-dropdown-item"),N=s("el-dropdown-menu"),S=s("el-dropdown"),O=s("ele-School"),T=s("el-tree"),V=s("el-card"),B=L("loading");return m(),M(V,{class:"box-card",shadow:"hover",style:{height:"100%"},"body-style":"height:100%; overflow:auto"},{header:t(()=>[c("div",J,[c("div",Q,[c("div",W,[o(A,{"prefix-icon":g(R),modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=f=>i.value=f),placeholder:"机构名称"},null,8,["prefix-icon","modelValue"])]),c("div",X,[o(S,{onCommand:C},{dropdown:t(()=>[o(N,null,{default:t(()=>[o(d,{command:"expandAll"},{default:t(()=>[r("全部展开")]),_:1}),o(d,{command:"collapseAll"},{default:t(()=>[r("全部折叠")]),_:1}),o(d,{command:"rootNode"},{default:t(()=>[r("根节点")]),_:1}),o(d,{command:"refresh"},{default:t(()=>[r("刷新")]),_:1})]),_:1})]),default:t(()=>[o(D,{style:{"margin-left":"8px",width:"34px"}},{default:t(()=>[o(u,{class:"el-icon--center"},{default:t(()=>[o(g(G))]),_:1})]),_:1})]),_:1})])])])]),default:t(()=>[P((m(),U("div",Y,[o(T,{ref_key:"treeRef",ref:n,class:"filter-tree",data:a.orgData,"node-key":"id",props:{children:"children",label:"name"},"filter-node-method":y,onNodeClick:b,"show-checkbox":a.isShowCheckbox,"default-checked-keys":a.ownOrgData,"highlight-current":"","check-strictly":""},{default:t(({node:f})=>[o(u,null,{default:t(()=>[o(O)]),_:1}),r(j(f.label),1)]),_:1},8,["data","show-checkbox","default-checked-keys"])])),[[B,a.loading]])]),_:1})}}}),ae=H(Z,[["__scopeId","data-v-f464f09b"]]);export{ae as default};

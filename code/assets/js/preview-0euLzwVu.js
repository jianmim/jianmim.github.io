import{k as u,L as g,r as v,t as p,x as C,y as P,A as a,D as s,S as d,Q as c,O as k,n as V}from"./store-dof5ccn5.js";import{_ as b}from"./_plugin-vue_export-helper-x3n3nnut.js";const x=u({__name:"preview",setup(y,{expose:f}){const e=g({dialogVisible:!1,waitShowPrinter:!1,width:0,printData:{},hiprintTemplate:{}}),t=v(),m=(n,i,o=210)=>{e.dialogVisible=!0,e.width=o,e.hiprintTemplate=n,e.printData=i,V(()=>{var l;for(;(l=t.value)!=null&&l.firstChild;)t.value.removeChild(t.value.firstChild);const r=n.getHtml(i);t.value.appendChild(r[0])})},w=()=>{e.waitShowPrinter=!0,e.hiprintTemplate.print(e.printData,{},{callback:()=>{e.waitShowPrinter=!1}})},_=()=>{e.hiprintTemplate.toPdf({},"PDF文件")},h=()=>{e.dialogVisible=!1};return f({showDialog:m}),(n,i)=>{const o=p("el-button"),r=p("el-dialog");return C(),P(r,{modelValue:e.dialogVisible,"onUpdate:modelValue":i[0]||(i[0]=l=>e.dialogVisible=l),draggable:"","close-on-click-modal":!1,width:e.width+8+"mm"},{footer:a(()=>[s(o,{loading:e.waitShowPrinter,type:"primary",icon:"ele-Printer",onClick:c(w,["stop"])},{default:a(()=>[d("直接打印")]),_:1},8,["loading"]),s(o,{type:"primary",icon:"ele-Printer",onClick:c(_,["stop"])},{default:a(()=>[d("导出PDF")]),_:1}),s(o,{key:"close",onClick:h},{default:a(()=>[d(" 关闭 ")]),_:1})]),default:a(()=>[k("div",{id:"preview_content",ref_key:"previewContentRef",ref:t},null,512)]),_:1},8,["modelValue","width"])}}}),T=b(x,[["__scopeId","data-v-99e9d3a8"]]);export{T as default};

import{k as E,v as Y,a0 as ee,s as z,r as k,L as se,l as I,p as oe,aB as te,t as l,x as ne,M as ae,D as s,A as o,S as i,T as d,O as a,P as L,F as u,Z as le,i as w,_ as C,aR as h,E as ie,ai as re}from"./store-mQZkmHj-.js";import{f as ce,u as ue,L as m,g as A,e as de,n as me,y as fe,o as _e}from"./index-lw7p-_pG.js";import{S as ge}from"./sys-notice-api-hm-uSLi9.js";import{c as pe}from"./signalR-d6g4Ksin.js";import{_ as be}from"./_plugin-vue_export-helper-x3n3nnut.js";const he={class:"layout-navbars-breadcrumb-user-icon"},ve=["title"],we={class:"layout-navbars-breadcrumb-user-icon"},Ce=["title"],Se=["title"],ye={class:"layout-navbars-breadcrumb-user-icon"},ze=["title"],ke={class:"layout-navbars-breadcrumb-user-link"},Ie=["src"],Le=E({name:"layoutBreadcrumbUser"}),Ae=E({...Le,setup(Ee){const O=w(()=>C(()=>import("./userNews-DxSHBng4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),T=w(()=>C(()=>import("./search-auuZNUC4.js"),__vite__mapDeps([10,1,2,3,4,8,11]),import.meta.url)),B=w(()=>C(()=>import("./index-j12Yh_Wi.js"),__vite__mapDeps([12,1,2,3,4,13]),import.meta.url)),{locale:N,t:f}=Y.useI18n(),U=ee(),$=ce(),R=ue(),{userInfos:g}=z($),{themeConfig:_}=z(R),S=k(),y=k(),t=se({isScreenfull:!1,disabledI18n:"zh-cn",disabledSize:"large",noticeList:[]}),D=I(()=>{let e="";const{layout:r,isClassicSplitMenu:n}=_.value;return["defaults","columns"].includes(r)||r==="classic"&&!n?e="1":e="",e}),P=I(()=>t.noticeList.some(e=>e.readStatus==null||e.readStatus==0)),M=()=>{if(!h.isEnabled)return ie.warning("暂不不支持全屏"),!1;h.toggle(),h.on("change",()=>{h.isFullscreen?t.isScreenfull=!0:t.isScreenfull=!1})},V=()=>{de.emit("openSetingsDrawer")},F=e=>{e==="logOut"?re({closeOnClickModal:!1,closeOnPressEscape:!1,title:f("message.user.logOutTitle"),message:f("message.user.logOutMessage"),type:"warning",showCancelButton:!0,confirmButtonText:f("message.user.logOutConfirm"),cancelButtonText:f("message.user.logOutCancel"),buttonSize:"default",beforeClose:async(r,n,c)=>{r==="confirm"&&(n.confirmButtonLoading=!0,n.confirmButtonText=f("message.user.logOutExit"),await A(me).apiSysAuthLogoutPost(),n.confirmButtonLoading=!1),c()}}).then(async()=>{fe()}).catch(()=>{}):e==="wareHouse"?window.open("https://gitee.com/zuohuaijun/Admin.NET"):U.push(e)},j=()=>{S.value.openSearch()},H=()=>{y.value.openDrawer()},q=e=>{m.remove("themeConfig"),_.value.globalComponentSize=e,m.set("themeConfig",_.value),p("globalComponentSize","disabledSize"),window.location.reload()},x=e=>{m.remove("themeConfig"),_.value.globalI18n=e,m.set("themeConfig",_.value),N.value=e,_e.useTitle(),p("globalI18n","disabledI18n")},p=(e,r)=>{t[r]=m.get("themeConfig")[e]};oe(async()=>{m.get("themeConfig")&&(p("globalComponentSize","disabledSize"),p("globalI18n","disabledI18n"));var e=await A(ge).apiSysNoticeUnReadListGet();t.noticeList=e.data.result??[],pe.on("PublicNotice",G)});const G=e=>{t.noticeList.unshift(e),te({title:"提示",message:"您有一条新消息...",type:"info",position:"bottom-right"})};return(e,r)=>{const n=l("el-dropdown-item"),c=l("el-dropdown-menu"),v=l("el-dropdown"),Z=l("ele-Search"),b=l("el-icon"),J=l("ele-Bell"),K=l("el-badge"),Q=l("el-popover"),W=l("ele-User"),X=l("ele-ArrowDown");return ne(),ae("div",{class:"layout-navbars-breadcrumb-user pr15",style:le({flex:D.value})},[s(v,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:q},{dropdown:o(()=>[s(c,null,{default:o(()=>[s(n,{command:"large",disabled:t.disabledSize==="large"},{default:o(()=>[i(d(e.$t("message.user.dropdownLarge")),1)]),_:1},8,["disabled"]),s(n,{command:"default",disabled:t.disabledSize==="default"},{default:o(()=>[i(d(e.$t("message.user.dropdownDefault")),1)]),_:1},8,["disabled"]),s(n,{command:"small",disabled:t.disabledSize==="small"},{default:o(()=>[i(d(e.$t("message.user.dropdownSmall")),1)]),_:1},8,["disabled"])]),_:1})]),default:o(()=>[a("div",he,[a("i",{class:"iconfont icon-ziti",title:e.$t("message.user.title0")},null,8,ve)])]),_:1}),s(v,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:x},{dropdown:o(()=>[s(c,null,{default:o(()=>[s(n,{command:"zh-cn",disabled:t.disabledI18n==="zh-cn"},{default:o(()=>[i("简体中文")]),_:1},8,["disabled"]),s(n,{command:"en",disabled:t.disabledI18n==="en"},{default:o(()=>[i("English")]),_:1},8,["disabled"]),s(n,{command:"zh-tw",disabled:t.disabledI18n==="zh-tw"},{default:o(()=>[i("繁體中文")]),_:1},8,["disabled"])]),_:1})]),default:o(()=>[a("div",we,[a("i",{class:L(["iconfont",t.disabledI18n==="en"?"icon-fuhao-yingwen":"icon-fuhao-zhongwen"]),title:e.$t("message.user.title1")},null,10,Ce)])]),_:1}),a("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:j},[s(b,{title:e.$t("message.user.title2")},{default:o(()=>[s(Z)]),_:1},8,["title"])]),a("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:V},[a("i",{class:"icon-skin iconfont",title:e.$t("message.user.title3")},null,8,Se)]),a("div",ye,[s(Q,{placement:"bottom",trigger:"hover",transition:"el-zoom-in-top",width:300,persistent:!1},{reference:o(()=>[s(K,{"is-dot":P.value},{default:o(()=>[s(b,{title:e.$t("message.user.title4")},{default:o(()=>[s(J)]),_:1},8,["title"])]),_:1},8,["is-dot"])]),default:o(()=>[s(u(O),{noticeList:t.noticeList},null,8,["noticeList"])]),_:1})]),a("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:M},[a("i",{class:L(["iconfont",t.isScreenfull?"icon-tuichuquanping":"icon-fullscreen"]),title:t.isScreenfull?e.$t("message.user.title6"):e.$t("message.user.title5")},null,10,ze)]),a("div",{class:"layout-navbars-breadcrumb-user-icon mr10",onClick:H},[s(b,{title:"在线用户"},{default:o(()=>[s(W)]),_:1})]),s(v,{"show-timeout":70,"hide-timeout":50,onCommand:F},{dropdown:o(()=>[s(c,null,{default:o(()=>[s(n,{command:"/system/userCenter"},{default:o(()=>[i(d(e.$t("message.user.dropdown2")),1)]),_:1}),s(n,{divided:"",command:"logOut"},{default:o(()=>[i(d(e.$t("message.user.dropdown5")),1)]),_:1})]),_:1})]),default:o(()=>[a("span",ke,[a("img",{src:u(g).avatar,class:"layout-navbars-breadcrumb-user-link-photo mr5"},null,8,Ie),i(" "+d(u(g).realName==""?u(g).account:u(g).realName)+" ",1),s(b,{class:"el-icon--right"},{default:o(()=>[s(X)]),_:1})])]),_:1}),s(u(T),{ref_key:"searchRef",ref:S},null,512),s(u(B),{ref_key:"onlineUserRef",ref:y},null,512)],4)}}}),$e=be(Ae,[["__scopeId","data-v-aea49229"]]);export{$e as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./userNews-DxSHBng4.js","./store-mQZkmHj-.js","../css/store-dzCp3yyn.css","./index-lw7p-_pG.js","../css/index-5Z0pdBTT.css","./commonFunction-_vykxDAa.js","./formatTime-sb5Dmd3Z.js","./sys-notice-api-hm-uSLi9.js","./_plugin-vue_export-helper-x3n3nnut.js","../css/userNews-lRwHKVoN.css","./search-auuZNUC4.js","../css/search-BmgefWH3.css","./index-j12Yh_Wi.js","./signalR-d6g4Ksin.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

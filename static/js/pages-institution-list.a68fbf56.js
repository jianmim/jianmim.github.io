(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-institution-list"],{"0c92":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return a}));var a={uniNavBar:e("0654").default,vTabs:e("b919").default},n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",[a("uni-nav-bar",{attrs:{title:"办事机构","left-icon":"left",backgroundColor:t.Color,shadow:!0,dark:!0},on:{clickLeft:function(i){arguments[0]=i=t.$handleEvent(i),t.back.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"bg-white margin-sm radius"},[a("v-uni-view",[a("v-uni-view",{staticClass:"cu-bar search"},[a("v-uni-view",{staticClass:"search-form round"},[a("v-uni-text",{staticClass:"icon-search"}),a("v-uni-input",{attrs:{"adjust-position":!1,type:"text",placeholder:"在这里输入您想查找的机构","confirm-type":"search"},on:{confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.toSearch.apply(void 0,arguments)}},model:{value:t.keyword,callback:function(i){t.keyword=i},expression:"keyword"}})],1)],1),a("v-uni-view",{staticClass:"bg-white text-center padding-bottom-xs",staticStyle:{width:"650rpx","margin-left":"30rpx"}},[a("v-tabs",{attrs:{tabs:t.itemList,field:"label",scroll:!1,lineHeight:"6rpx",bgColor:"#fff",activeColor:"#05BEB6",lineColor:"#05BEB6"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.changeTab.apply(void 0,arguments)}},model:{value:t.current,callback:function(i){t.current=i},expression:"current"}})],1)],1)],1),t._l(t.lists,(function(i,n){return[a("v-uni-view",{key:n+"_0",staticClass:"cu-list menu margin-sm sm-border radius",staticStyle:{"background-color":"#fff"}},[a("v-uni-view",{staticClass:"cu-item flex padding-tb",staticStyle:{"align-items":"flex-start"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDetail(i)}}},[a("v-uni-view",[i.Url?a("v-uni-image",{staticStyle:{width:"180rpx",height:"180rpx"},attrs:{src:t.url+i.Url}}):a("v-uni-image",{staticStyle:{width:"180rpx",height:"180rpx"},attrs:{src:"/static/hall_icon_default.jpg"}})],1),a("v-uni-view",{staticClass:"margin-left",staticStyle:{width:"520rpx",overflow:"hidden"}},[a("v-uni-view",{staticClass:"flex_sb_c"},[a("v-uni-view",{staticClass:"text-bold"},[t._v(t._s(i.Name))]),a("v-uni-view",{staticClass:"flex_c text-cyan",staticStyle:{"font-size":"24rpx"}},[a("v-uni-image",{staticStyle:{width:"30rpx",height:"30rpx"},attrs:{src:e("d438")}}),t._v(t._s(t.formatDistance(t.getL(i.Latitude,i.Longitude))))],1)],1),a("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(i.Remark))]),a("v-uni-view",[t._v(t._s(i.AddressInfo))]),a("v-uni-view",{staticClass:"flex_sb_c margin-top",staticStyle:{"padding-right":"50rpx"}},[a("v-uni-view",{staticClass:"flex_c_c",staticStyle:{"flex-direction":"column"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toNav(i)}}},[a("v-uni-image",{staticStyle:{width:"44rpx",height:"44rpx"},attrs:{src:"/static/nav.jpg"}}),a("v-uni-view",{staticClass:"text-sm"},[t._v("导航")])],1),i.TelNo?a("v-uni-view",{staticClass:"flex_c_c",staticStyle:{"flex-direction":"column"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTel(i.TelNo)}}},[a("v-uni-image",{staticStyle:{width:"44rpx",height:"44rpx"},attrs:{src:"/static/tel.jpg"}}),a("v-uni-view",{staticClass:"text-sm"},[t._v("电话")])],1):t._e(),a("v-uni-view",{staticClass:"flex_c_c",staticStyle:{"flex-direction":"column"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toItem(i.ID,i.Name)}}},[a("v-uni-image",{staticStyle:{width:"44rpx",height:"44rpx"},attrs:{src:"/static/shi.jpg"}}),a("v-uni-view",{staticClass:"text-sm"},[t._v("事项")])],1)],1)],1)],1)],1)]})),a("v-uni-view",{staticStyle:{height:"150rpx"}})],2)},s=[]},"2a6a":function(t,i,e){"use strict";(function(t){e("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("e9c4"),e("acd8");var a={data:function(){return{url:"",regionlevel:0,current:"",index:"",Color:"",title:"",keyword:"",id:"",addresstype:"",lists:[],tel:"",itemList:[{ID:0,value:"",label:"全部"},{ID:3,value:3,label:"区县"},{ID:4,value:4,label:"街道/镇"},{ID:5,value:5,label:"社区/村"}],locationInfo:{}}},onLoad:function(i){this.id=i.id,this.addresstype=i.addresstype,t.log(this.addresstype),this.url=uni.getStorageSync("accessoryUrl"),t.log("this.url : ",this.url),this.Color=uni.getStorageSync("Color"),this.tel=uni.getStorageSync("tel"),this.getLocation()},methods:{getLocation:function(){t.log("getl: ");var i=this;uni.getLocation({type:"gcj02",success:function(e){t.log("当前位置的经度：",e.longitude,e.latitude),t.log("当前位置的纬度："+e),i.locationInfo=e}}),i.fetchData()},toNav:function(i){t.log(i),uni.navigateTo({url:"../map/map?item="+JSON.stringify(i)})},toItem:function(t,i){uni.navigateTo({url:"./itemList?id="+t+"&Name="+i})},toTel:function(i){t.log("Mobile: ",i),uni.showModal({title:"提示",content:"确定拨打电话："+i,success:function(e){e.confirm&&uni.makePhoneCall({phoneNumber:i,success:function(){t.log("呼叫成功")},fail:function(i){t.log("直呼电话失败",i)}})}})},changeTab:function(i){t.log(i,this.itemList[i].ID),this.regionlevel=this.itemList[i].ID,this.fetchData()},toSearch:function(){this.fetchData()},fetchData:function(){var i=this,e={page_size:20,page_index:1,key:"5aekiETS5845215sdfasED",srkmid:this.id,addresstype:this.addresstype,regionlevel:this.regionlevel};t.log("data",e),this.$http.get("/IMKnowledge/GetKMAddressInfo",e).then((function(e){t.log("res",e),i.lists=e.data.Data.rows,t.log("lists",i.lists)})).catch((function(i){t.log(i)}))},getL:function(i,e){var a=this.locationInfo,n=i*Math.PI/180,s=a.latitude*Math.PI/180,o=n-s,l=e*Math.PI/180-a.longitude*Math.PI/180,c=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(n)*Math.cos(s)*Math.pow(Math.sin(l/2),2)));return c*=6378.137,c=Math.round(1e4*c)/10,t.log("getLocation: ",c),c},formatDistance:function(i){if(t.log("distance",i),i){var e=parseFloat(i);return e>1e3?(i/1e3).toFixed(2)+"km":e+"m"}return"0km"},toDetail:function(t){uni.navigateTo({url:"./detail?item="+JSON.stringify(t)})},toService:function(){uni.navigateTo({url:"./goto"})},toPhone:function(){uni.makePhoneCall({phoneNumber:this.tel})}}};i.default=a}).call(this,e("5a52")["default"])},"7aa3":function(t,i,e){"use strict";e.r(i);var a=e("2a6a"),n=e.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(s);i["default"]=n.a},a5e9:function(t,i,e){"use strict";var a=e("d0cf"),n=e.n(a);n.a},d0cf:function(t,i,e){var a=e("f56a");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("3b8e9a68",a,!0,{sourceMap:!1,shadowMode:!1})},d438:function(t,i,e){t.exports=e.p+"static/local.png"},f56a:function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,".lists[data-v-6335fa1e]{line-height:%?60?%;margin:%?20?% %?30?%}",""]),t.exports=i},feb0:function(t,i,e){"use strict";e.r(i);var a=e("0c92"),n=e("7aa3");for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("a5e9");var o=e("f0c5"),l=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"6335fa1e",null,!1,a["a"],void 0);i["default"]=l.exports}}]);
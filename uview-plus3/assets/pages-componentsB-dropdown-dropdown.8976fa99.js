import{m as t,k as e,d as a,o as n,c as i,w as o,a as s,q as l,l as u,i as d,b as r,F as c,r as m,u as p,f as _,t as f,n as h,g as y}from"./index.6f985586.js";import{_ as w}from"./u-overlay.bc348baa.js";import{r as b}from"./uni-app.es.6e64b422.js";import{_ as g}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as S}from"./u-icon.3c3802b5.js";import"./u-transition.3959075c.js";const k=g({name:"u-drawdown-item",mixins:[t,e,{props:{value:{type:[Number,String,Array],default:""},title:{type:[String,Number],default:""},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},height:{type:[Number,String],default:"auto"},closeOnClickOverlay:{type:Boolean,default:!0}}}],data:()=>({show:!1,top:"126px",animationData:{}}),mounted(){this.init()},watch:{dataChange(t,e){this.updateParentData()}},computed:{dataChange(){return[this.title,this.disabled]},style(){const t={zIndex:10071,position:"fixed",display:"flex",left:0,right:0};return t.top=uni.$u.addUnit(this.top),t}},methods:{init(){this.updateParentData()},updateParentData(){this.getParentData("u-dropdown"),this.parent||uni.$u.error("u-dropdown-item必须配合u-dropdown使用");const t=this.parent.menuList.findIndex((t=>t.title===this.title)),e={title:this.title,disabled:this.disabled};t>=0?this.parent.menuList[t]=e:this.parent.menuList.push(e)},async setContentAnimate(t){this.animating=!0;const e=uni.createAnimation({timingFunction:"ease-in-out"});e.height(t).step({duration:this.duration}).step(),this.animationData=e.export(),uni.$u.sleep(this.duration).then((()=>{this.animating=!1}))},overlayClick(){this.show=!1,this.setContentAnimate(0)}}},[["render",function(t,e,r,c,m,p){const _=b(a("u-overlay"),w),f=d;return n(),i(f,{class:"u-drawdown-item"},{default:o((()=>[s(_,{customStyle:"top: 126px",show:m.show,closeOnClickOverlay:t.closeOnClickOverlay,onClick:p.overlayClick},null,8,["show","closeOnClickOverlay","onClick"]),s(f,{class:"u-drawdown-item__content",style:l([p.style]),animation:m.animationData,ref:"animation"},{default:o((()=>[u(t.$slots,"default",{},void 0,!0)])),_:3},8,["style","animation"])])),_:3})}],["__scopeId","data-v-e02e4139"]]);const v=g({name:"u-dropdown",mixins:[e,{props:{activeStyle:{type:[String,Object],default:()=>({color:"#2979ff",fontSize:"14px"})},inactiveStyle:{type:[String,Object],default:()=>({color:"#606266",fontSize:"14px"})},closeOnClickMask:{type:Boolean,default:!0},closeOnClickSelf:{type:Boolean,default:!0},duration:{type:[Number,String],default:300},height:{type:[Number,String],default:40},borderBottom:{type:Boolean,default:!1},titleSize:{type:[Number,String],default:14},borderRadius:{type:[Number,String],default:0},menuIcon:{type:String,default:"arrow-down"},menuIconSize:{type:[Number,String],default:14}}}],data:()=>({menuList:[],current:0}),computed:{},created(){this.children=[]},methods:{clickHandler(t,e){this.children.map((e=>{e.title===t.title?(e.$emit("click"),e.setContentAnimate(e.show?0:300),e.show=!e.show):(e.show=!1,e.setContentAnimate(0))}))},queryRect(t){return new Promise((e=>{this.$uGetRect(`.${t}`).then((t=>{e(t)}))}))}}},[["render",function(t,e,w,g,k,v){const C=y,x=b(a("u-icon"),S),O=d;return n(),i(O,{class:"u-drawdown"},{default:o((()=>[s(O,{class:"u-dropdown__menu",style:l({height:t.$u.addUnit(t.height)}),ref:"u-dropdown__menu"},{default:o((()=>[(n(!0),r(c,null,m(k.menuList,((e,a)=>(n(),i(O,{class:"u-dropdown__menu__item",key:a,onClick:p((t=>v.clickHandler(e,a)),["stop"])},{default:o((()=>[s(O,{class:"u-dropdown__menu__item__content"},{default:o((()=>[s(C,{class:"u-dropdown__menu__item__content__text",style:l([a===k.current?t.activeStyle:t.inactiveStyle])},{default:o((()=>[_(f(e.title),1)])),_:2},1032,["style"]),s(O,{class:h(["u-dropdown__menu__item__content__arrow",[a===k.current&&"u-dropdown__menu__item__content__arrow--rotate"]])},{default:o((()=>[s(x,{name:t.menuIcon,size:t.$u.addUnit(t.menuIconSize)},null,8,["name","size"])])),_:2},1032,["class"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"]),s(O,{class:"u-dropdown__content"},{default:o((()=>[u(t.$slots,"default",{},void 0,!0)])),_:3})])),_:3})}],["__scopeId","data-v-b6d10bc3"]]);const C=g({},[["render",function(t,e){const l=y,u=d,r=b(a("u-dropdown-item"),k),c=b(a("u-dropdown"),v);return n(),i(u,{class:"u-page"},{default:o((()=>[s(u,{class:"u-demo-block"},{default:o((()=>[s(l,{class:"u-demo-block__title"},{default:o((()=>[_("基础功能")])),_:1}),s(u,{class:"u-demo-block__content"},{default:o((()=>[s(c,null,{default:o((()=>[s(r,{title:"标题1"},{default:o((()=>[s(u,{class:"",style:{height:"300px"}},{default:o((()=>[_(" 123 ")])),_:1})])),_:1}),s(r,{title:"标题2"},{default:o((()=>[_(" 456 ")])),_:1}),s(r,{title:"标题3"},{default:o((()=>[_(" 789 ")])),_:1}),s(r,{title:"标题4"},{default:o((()=>[_(" abc ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}]]);export{C as default};

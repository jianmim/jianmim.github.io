import{_ as e}from"./u-parse.6ed837cc.js";import{j as t,m as o,k as n,d as s,o as a,c as r,w as i,a as l,q as d,n as u,l as g,p as c,i as h}from"./index.6f985586.js";import{r as p}from"./uni-app.es.6e64b422.js";import{_ as m}from"./u--text.d2107b89.js";import{_ as f}from"./u-icon.3c3802b5.js";import{_}from"./_plugin-vue_export-helper.cdc0426e.js";import"./u-link.5a2e5742.js";const x=_({name:"u-read-more",mixins:[o,n,{props:{showHeight:{type:[String,Number],default:t.readMore.showHeight},toggle:{type:Boolean,default:t.readMore.toggle},closeText:{type:String,default:t.readMore.closeText},openText:{type:String,default:t.readMore.openText},color:{type:String,default:t.readMore.color},fontSize:{type:[String,Number],default:t.readMore.fontSize},shadowStyle:{type:Object,default:()=>({backgroundImage:"linear-gradient(-180deg, rgba(255, 255, 255, 0) 0%, #fff 80%)",paddingTop:"100px",marginTop:"-100px"})},textIndent:{type:String,default:t.readMore.textIndent},name:{type:[String,Number],default:t.readMore.name}}}],data:()=>({isLongContent:!1,status:"close",elId:uni.$u.guid(),contentHeight:100}),computed:{innerShadowStyle(){return"open"===this.status?{}:this.shadowStyle}},mounted(){this.init()},methods:{async init(){this.getContentHeight().then((e=>{this.contentHeight=e,e>uni.$u.getPx(this.showHeight)&&(this.isLongContent=!0,this.status="close")}))},async getContentHeight(){return await uni.$u.sleep(30),new Promise((e=>{this.$uGetRect("."+this.elId).then((t=>{e(t.height)}))}))},toggleReadMore(){this.status="close"===this.status?"open":"close",0==this.toggle&&(this.isLongContent=!1),this.$emit(this.status,this.name)}}},[["render",function(e,t,o,n,_,x){const y=h,S=p(s("u--text"),m),w=p(s("u-icon"),f);return a(),r(y,{class:"u-read-more"},{default:i((()=>[l(y,{class:"u-read-more__content",style:d({height:_.isLongContent&&"close"===_.status?e.$u.addUnit(e.showHeight):e.$u.addUnit(_.contentHeight),textIndent:e.textIndent})},{default:i((()=>[l(y,{class:u(["u-read-more__content__inner",[_.elId]]),ref:"u-read-more__content__inner"},{default:i((()=>[g(e.$slots,"default",{},void 0,!0)])),_:3},8,["class"])])),_:3},8,["style"]),_.isLongContent?(a(),r(y,{key:0,class:"u-read-more__toggle",style:d([x.innerShadowStyle])},{default:i((()=>[g(e.$slots,"toggle",{},(()=>[l(y,{class:"u-read-more__toggle__text",onClick:x.toggleReadMore},{default:i((()=>[l(S,{text:"close"===_.status?e.closeText:e.openText,color:e.color,size:e.fontSize,lineHeight:e.fontSize,margin:"0 5px 0 0"},null,8,["text","color","size","lineHeight"]),l(y,{class:"u-read-more__toggle__icon"},{default:i((()=>[l(w,{color:e.color,size:e.fontSize+2,name:"close"===_.status?"arrow-down":"arrow-up"},null,8,["color","size","name"])])),_:1})])),_:1},8,["onClick"])]),!0)])),_:3},8,["style"])):c("",!0)])),_:3})}],["__scopeId","data-v-ebb2c3fa"]]);const y=_({data:()=>({content:"<p>浔阳江头夜送客，枫叶荻花秋瑟瑟。主人下马客在船，举酒欲饮无管弦。醉不成欢惨将别，别时茫茫江浸月。\n\t\t\t\t\t忽闻水上琵琶声，主人忘归客不发。寻声暗问弹者谁，琵琶声停欲语迟。移船相近邀相见，添酒回灯重开宴。千呼万唤始出来，犹抱琵琶半遮面。转轴拨弦三两声，未成曲调先有情。弦弦掩抑声声思，似诉平生不得志。低眉信手续续弹，说尽心中无限事。轻拢慢捻抹复挑，初为《霓裳》后《六幺》。大弦嘈嘈如急雨，小弦切切如私语。嘈嘈切切错杂弹，大珠小珠落玉盘。间关莺语花底滑，幽咽泉流冰下难。冰泉冷涩弦凝绝，凝绝不通声暂歇。别有幽愁暗恨生，此时无声胜有声。银瓶乍破水浆迸，铁骑突出刀枪鸣。曲终收拨当心画，四弦一声如裂帛。东船西舫悄无言，唯见江心秋月白。\n\t\t\t\t\t沉吟放拨插弦中，整顿衣裳起敛容。自言本是京城女，家在虾蟆陵下住。十三学得琵琶成，名属教坊第一部。曲罢曾教善才服，妆成每被秋娘妒。五陵年少争缠头，一曲红绡不知数。钿头银篦击节碎，血色罗裙翻酒污。今年欢笑复明年，秋月春风等闲度。弟走从军阿姨死，暮去朝来颜色故。门前冷落鞍马稀，老大嫁作商人妇。商人重利轻别离，前月浮梁买茶去。去来江口守空船，绕船月明江水寒。夜深忽梦少年事，梦啼妆泪红阑干。\n\t\t\t\t\t我闻琵琶已叹息，又闻此语重唧唧。同是天涯沦落人，相逢何必曾相识！我从去年辞帝京，谪居卧病浔阳城。浔阳地僻无音乐，终岁不闻丝竹声。住近湓江地低湿，黄芦苦竹绕宅生。其间旦暮闻何物？杜鹃啼血猿哀鸣。春江花朝秋月夜，往往取酒还独倾。岂无山歌与村笛？呕哑嘲哳难为听。今夜闻君琵琶语，如听仙乐耳暂明。莫辞更坐弹一曲，为君翻作《琵琶行》。感我此言良久立，却坐促弦弦转急。凄凄不似向前声，满座重闻皆掩泣。座中泣下谁最多？江州司马青衫湿。</p>",showHeight:200,tagStyle:{p:"color: #606266; line-height: 24px;"}}),methods:{load(){this.$refs.uReadMore.init()},open(e){console.log("open",e)},close(e){console.log("close",e)}}},[["render",function(t,o,n,d,u,g){const c=p(s("u-parse"),e),m=p(s("u-read-more"),x),f=h;return a(),r(f,{class:"u-page"},{default:i((()=>[l(m,{ref:"uReadMore",showHeight:u.showHeight,toggle:"",onOpen:g.open,onClose:g.close},{default:i((()=>[l(c,{content:u.content,onLoad:g.load,"tag-style":u.tagStyle},null,8,["content","onLoad","tag-style"])])),_:1},8,["showHeight","onOpen","onClose"])])),_:1})}]]);export{y as default};

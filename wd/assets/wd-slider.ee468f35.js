import{d as e,r as a,v as l,q as u,m as t,o as s,c as d,w as n,n as i,b as o,t as r,p as v,a as c,y as m,u as h,J as w,i as b}from"./index-dce73128.js";import{g as f,i as p,l as _,m as g,G as y,H as x,r as M,I as $,t as V,b as C}from"./page-wraper.5690414d.js";import{u as T}from"./useTouch.8a27f9aa.js";const k=C(e({name:"wd-slider",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...f,customMinClass:p(""),customMaxClass:p(""),hideMinMax:_(!1),hideLabel:_(!1),disabled:_(!1),inactiveColor:p("#e5e5e5"),activeColor:p(""),max:g(100),min:g(0),step:g(1),modelValue:{type:[Number,Array],default:0}},emits:["dragstart","dragmove","dragend","update:modelValue"],setup(e,{expose:f,emit:p}){const _=e,g={startValue:0,deltaX:0,newValue:0},C=a(`sliderId${y()}`),k=T(),I=T(),L=a(!1),N=a("width: 0; height: 3px"),S=a("3px"),j=a(0),X=a(0),G=a(0),H=a(0),q=a(0),A=a(0),E=a(0),J=a(0),O=a(0),z=a(100),B=a(0),D=a(1);l((()=>_.max),(e=>{e<=_.min?(z.value=_.min,B.value=e,console.warn("[wot design] warning(wd-slider): max value must be greater than min value")):z.value=e,oe()}),{immediate:!0}),l((()=>_.min),(e=>{e>=_.max?(B.value=_.max,z.value=e,console.warn("[wot design] warning(wd-slider): min value must be less than max value")):B.value=e,oe()}),{immediate:!0}),l((()=>_.step),(e=>{e<1?(D.value=1,console.warn("[wot design] warning(wd-slider): step must be greater than 0")):D.value=Math.floor(e)}),{immediate:!0}),l((()=>_.modelValue),((e,a)=>{if(null==e?(p("update:modelValue",a),console.warn("[wot design] warning(wd-slider): value can nott be null or undefined")):M(e)&&2!==e.length?console.warn("[wot design] warning(wd-slider): value must be dyadic array"):$(e)||M(e)||(p("update:modelValue",a),console.warn("[wot design] warning(wd-slider): value must be dyadic array Or Number")),J.value=e,M(e)){if(a&&M(a)&&function(e,a){if(!V(e)||!V(a))return!1;let l=0;return e.forEach(((e,u)=>{e===a[u]&&l++})),2===l}(e,a))return;L.value=!0,H.value<=G.value?(se(e[0]),te(e[1])):(se(e[1]),te(e[0]))}else{if(e===a)return;se(e)}}),{deep:!0,immediate:!0});const{proxy:F}=w(),K=u((()=>`wd-slider ${_.hideLabel?"":"wd-slider__has-label"} ${_.disabled?"wd-slider--disabled":""} ${_.customClass}`)),P=u((()=>""+(_.inactiveColor?"background:"+_.inactiveColor:""))),Q=u((()=>`${N.value};${_.activeColor?"background:"+_.activeColor:""}`)),R=u((()=>`left: ${H.value}%; visibility: ${_.disabled?"hidden":"show"};`)),U=u((()=>`left: ${G.value}%; visibility: ${_.disabled?"hidden":"show"}`));function W(){x(`#${C.value}`,!1,F).then((e=>{q.value=Number(e.width),A.value=Number(e.left)}))}function Y(e){const{disabled:a,modelValue:l}=_;a||(k.touchStart(e),E.value=M(l)?H.value<G.value?ne(l[0]):ne(l[1]):ne(l),p("dragstart",{value:J.value}))}function Z(e){const{disabled:a}=_;if(a)return;k.touchMove(e);const l=k.deltaX.value/q.value*(z.value-B.value);O.value=E.value+l,se(O.value),p("dragmove",{value:J.value})}function ee(){_.disabled||p("dragend",{value:J.value})}function ae(e){if(_.disabled)return;const{modelValue:a}=_;I.touchStart(e),g.startValue=H.value<G.value?ne(a[1]):ne(a[0]),p("dragstart",{value:J.value})}function le(e){if(_.disabled)return;I.touchMove(e);const a=I.deltaX.value/q.value*(z.value-B.value);g.newValue=ne(g.startValue+a),te(g.newValue),p("dragmove",{value:J.value})}function ue(){_.disabled||p("dragend",{value:J.value})}function te(e){e=ne(e),X.value=e,p("update:modelValue",[Math.min(j.value,X.value),Math.max(j.value,X.value)]),G.value=ie(e),de()}function se(e){const a=ie(e=ne(e));L.value?(j.value=e,H.value=a,p("update:modelValue",[Math.min(j.value,X.value),Math.max(j.value,X.value)]),de()):(p("update:modelValue",e),j.value=e,H.value=a,N.value=`width: ${a}%; height: ${S.value};`)}function de(){const e=H.value<G.value?[H.value,G.value]:[G.value,H.value],a=`width: ${e[1]-e[0]}%; height: ${S.value}; left: ${e[0]}%`;J.value=j.value<X.value?[j.value,X.value]:[X.value,j.value],N.value=a}function ne(e){return Math.round(Math.max(B.value,Math.min(e,z.value))/D.value)*D.value}function ie(e){return(e-B.value)/(z.value-B.value)*100}function oe(){const{modelValue:e}=_;let a=M(e)?H.value<G.value?ne(e[0]):ne(e[1]):ne(e);a=ne(a);const l=ie(a);H.value=l,N.value=`width: ${l}%; height: ${S.value};`}return t((()=>{W()})),f({initSlider:W}),(e,a)=>{const l=b;return s(),d(l,{class:i(h(K)),style:m(e.customStyle),id:C.value},{default:n((()=>[e.hideMinMax?v("",!0):(s(),d(l,{key:0,class:i(`wd-slider__label-min ${e.customMinClass}`)},{default:n((()=>[o(r(B.value),1)])),_:1},8,["class"])),c(l,{class:"wd-slider__bar-wrapper",style:m(h(P))},{default:n((()=>[c(l,{class:"wd-slider__bar",style:m(h(Q))},null,8,["style"]),c(l,{class:"wd-slider__button-wrapper",style:m(h(R)),onTouchstart:Y,onTouchmove:Z,onTouchend:ee,onTouchcancel:ee},{default:n((()=>[e.hideLabel?v("",!0):(s(),d(l,{key:0,class:"wd-slider__label"},{default:n((()=>[o(r(j.value),1)])),_:1})),c(l,{class:"wd-slider__button"})])),_:1},8,["style"]),L.value?(s(),d(l,{key:0,class:"wd-slider__button-wrapper",style:m(h(U)),onTouchstart:ae,onTouchmove:le,onTouchend:ue,onTouchcancel:ue},{default:n((()=>[e.hideLabel?v("",!0):(s(),d(l,{key:0,class:"wd-slider__label"},{default:n((()=>[o(r(X.value),1)])),_:1})),c(l,{class:"wd-slider__button"})])),_:1},8,["style"])):v("",!0)])),_:1},8,["style"]),e.hideMinMax?v("",!0):(s(),d(l,{key:1,class:i(`wd-slider__label-max ${e.customMaxClass}`)},{default:n((()=>[o(r(z.value),1)])),_:1},8,["class"]))])),_:1},8,["class","style","id"])}}}),[["__scopeId","data-v-01d7ab9a"]]);export{k as _};

import{d as a,r as e,q as s,v as l,o as t,c as n,w as o,y as i,x as d,p as c,n as u,i as r,J as m,T as v,m as b,a5 as _,h as p,j as f,a as w,u as y,e as h,F as x,f as k,b as $,t as I,a3 as g}from"./index-dce73128.js";import{g as C,w as N,m as T,l as V,i as j,D as S,h as H,t as X,I as q,U as z,b as F,p as G,O as M,c as W,q as A,H as D}from"./page-wraper.5690414d.js";import{_ as E,a as J}from"./wd-sticky-box.c770bb0d.js";import{u as L}from"./useTouch.8a27f9aa.js";import{u as O}from"./useChildren.8ed137fc.js";import{u as P}from"./useTranslate.0a311b40.js";const U=Symbol("wd-tabs"),B={...C,modelValue:N(0),slidableNum:T(6),mapNum:T(10),sticky:V(!1),offsetTop:T(0),swipeable:V(!1),lineWidth:T(19),lineHeight:T(3),color:j(""),inactiveColor:j(""),animated:V(!1),duration:T(300)},K=F(a({name:"wd-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...C,name:S,title:String,disabled:V(!1)},setup(a,{expose:v}){const b=a,_=e(!1),p=e(!1),{proxy:f}=m(),{parent:w,index:y}=H(U),h=s((()=>X(w)?w.state.activeIndex:0));function x(a,e){_.value=a,p.value=e}return l((()=>b.name),(a=>{!X(a)||q(a)||z(a)?w&&function(a){const{name:e}=b;if(null==e||""===e)return;w&&w.children.forEach((s=>{s.$.uid!==a.$.uid&&s.name===e&&console.error(`The tab's bound value: ${e} has been used`)}))}(f):console.error("[wot design] error(wd-tab): the type of name should be number or string")}),{deep:!0,immediate:!0}),l((()=>h.value),(a=>{a===y.value?x(!0,!0):x(_.value,!1)}),{deep:!0,immediate:!0}),v({setShow:x,painted:_}),(a,e)=>{const s=r;return t(),n(s,{class:u(`wd-tab ${a.customClass}`),style:i(a.customStyle)},{default:o((()=>[_.value?(t(),n(s,{key:0,class:"wd-tab__body",style:i(p.value?"":"display: none;")},{default:o((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["style"])):c("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-e07d33f1"]]),Q=F(a({name:"wd-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:B,emits:["change","disabled","click","update:modelValue"],setup(a,{expose:C,emit:N}){const T=a,V=".wd-tabs__nav-item",j=".wd-tabs__nav-container",{translate:S}=P("tabs"),H=v({activeIndex:0}),F=e(""),B=e(!1),K=e(0),Q=e(!1),R=e(!1),{children:Y,linkChildren:Z}=O(U);Z({state:H});const{proxy:aa}=m(),ea=L(),sa=s((()=>Y.map(((a,e)=>({disabled:a.disabled,title:a.title,name:X(a.name)?a.name:e}))))),la=s((()=>T.animated?G({left:-100*H.activeIndex+"%","transition-duration":T.duration+"ms","-webkit-transition-duration":T.duration+"ms"}):"")),ta=M((function(a=0,e=!1,s=!0){0!==sa.value.length&&(a=ma(a),sa.value[a].disabled||(H.activeIndex=a,s&&(oa(!1===e),ia()),function(){if(!R.value)return;sa.value[H.activeIndex].name!==T.modelValue&&(N("change",{index:H.activeIndex,name:sa.value[H.activeIndex].name}),N("update:modelValue",sa.value[H.activeIndex].name))}()))}),100,{leading:!1});function na(){B.value?(Q.value=!1,setTimeout((()=>{B.value=!1}),300)):(B.value=!0,setTimeout((()=>{Q.value=!0}),100))}function oa(a=!0){if(!R.value)return;const{lineWidth:e,lineHeight:s}=T;D(V,!0,aa).then((l=>{const t=l[H.activeIndex],n=e;let o=l.slice(0,H.activeIndex).reduce(((a,e)=>a+Number(e.width)),0);o+=(Number(t.width)-n)/2;const i=`\n            height: ${s}px;\n            width: ${n}px;\n            transform: translateX(${o}px);\n            ${a?"transition: width 300ms ease, transform 300ms ease;":""}\n          `;F.value!==i&&(F.value=i)}))}function ia(){R.value&&Promise.all([D(V,!0,aa),D(j,!1,aa)]).then((([a,e])=>{const s=a[H.activeIndex],l=a.slice(0,H.activeIndex).reduce(((a,e)=>a+e.width),0)-(e.width-Number(s.width))/2;l===K.value?K.value=l+Math.random()/1e4:K.value=l}))}function da(a){if(void 0===a)return;const{name:e,disabled:s}=sa.value[a];s?N("disabled",{index:a,name:e}):(B.value&&na(),ta(a),N("click",{index:a,name:e}))}function ca(a){T.swipeable&&ea.touchStart(a)}function ua(a){T.swipeable&&ea.touchMove(a)}function ra(){if(!T.swipeable)return;const{direction:a,deltaX:e,offsetX:s}=ea;"horizontal"===a.value&&s.value>=50&&(e.value>0&&0!==H.activeIndex?ta(H.activeIndex-1):e.value<0&&H.activeIndex!==sa.value.length-1&&(ta(H.activeIndex+1),ta(H.activeIndex+1)))}function ma(a){if(q(a)&&a>=sa.value.length&&(console.error("[wot design] warning(wd-tabs): the type of tabs' value is Number shouldn't be less than its children"),a=0),z(a)){const e=sa.value.findIndex((e=>e.name===a));a=-1===e?0:e}return a}return l((()=>T.modelValue),(a=>{q(a)||z(a)||console.error("[wot design] error(wd-tabs): the type of value should be number or string"),""!==a&&X(a)||console.error("[wot design] error(wd-tabs): tabs's value cannot be '' null or undefined"),"number"==typeof a&&a<0&&console.error("[wot design] error(wd-tabs): tabs's value cannot be less than zero")}),{immediate:!0,deep:!0}),l((()=>T.modelValue),(a=>{const e=ma(a);ta(a,!1,e!==H.activeIndex)}),{immediate:!1,deep:!0}),l((()=>Y.length),(()=>{R.value&&_((()=>{ta(T.modelValue)}))})),l((()=>T.slidableNum),(a=>{A(a,"slidableNum")})),l((()=>T.mapNum),(a=>{A(a,"mapNum")})),b((()=>{R.value=!0,_((()=>{ta(T.modelValue,!0)}))})),C({setActive:ta,scrollIntoView:ia,updateLineStyle:oa}),(a,e)=>{const s=r,l=g,m=p(f("wd-icon"),W),v=p(f("wd-sticky"),E),b=p(f("wd-sticky-box"),J);return a.sticky?(t(),n(b,{key:0},{default:o((()=>[w(s,{class:u(`wd-tabs ${a.customClass} ${a.slidableNum<y(sa).length?"is-slide":""} ${a.mapNum<y(sa).length&&0!==a.mapNum?"is-map":""}`),style:i(a.customStyle)},{default:o((()=>[w(v,{"offset-top":a.offsetTop},{default:o((()=>[w(s,{class:"wd-tabs__nav wd-tabs__nav--sticky"},{default:o((()=>[w(s,{class:"wd-tabs__nav--wrap"},{default:o((()=>[w(l,{"scroll-x":a.slidableNum<y(sa).length,"scroll-with-animation":"","scroll-left":K.value},{default:o((()=>[w(s,{class:"wd-tabs__nav-container"},{default:o((()=>[(t(!0),h(x,null,k(y(sa),((e,l)=>(t(),n(s,{onClick:a=>da(l),key:l,class:u(`wd-tabs__nav-item  ${H.activeIndex===l?"is-active":""} ${e.disabled?"is-disabled":""}`),style:i(H.activeIndex===l?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:o((()=>[$(I(e.title),1)])),_:2},1032,["onClick","class","style"])))),128)),w(s,{class:"wd-tabs__line",style:i(F.value)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<y(sa).length&&0!==a.mapNum?(t(),n(s,{key:0,class:"wd-tabs__map"},{default:o((()=>[w(s,{class:u("wd-tabs__map-btn  "+(Q.value?"is-open":"")),onClick:na},{default:o((()=>[w(s,{class:u("wd-tabs__map-arrow  "+(Q.value?"is-open":""))},{default:o((()=>[w(m,{name:"arrow-down"})])),_:1},8,["class"])])),_:1},8,["class"]),w(s,{class:"wd-tabs__map-header",style:i(`${B.value?"":"display:none;"}  ${Q.value?"opacity:1;":""}`)},{default:o((()=>[$(I(y(S)("all")),1)])),_:1},8,["style"]),w(s,{class:u("wd-tabs__map-body  "+(Q.value?"is-open":"")),style:i(B.value?"":"display:none")},{default:o((()=>[(t(!0),h(x,null,k(y(sa),((e,l)=>(t(),n(s,{class:"wd-tabs__map-nav-item",key:l,onClick:a=>da(l)},{default:o((()=>[w(s,{class:u(`wd-tabs__map-nav-btn ${H.activeIndex===l?"is-active":""}  ${e.disabled?"is-disabled":""}`),style:i(H.activeIndex===l?a.color?"color:"+a.color+";border-color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:o((()=>[$(I(e.title),1)])),_:2},1032,["class","style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):c("",!0)])),_:1})])),_:1},8,["offset-top"]),w(s,{class:"wd-tabs__container",onTouchstart:ca,onTouchmove:ua,onTouchend:ra,onTouchcancel:ra},{default:o((()=>[w(s,{class:u(["wd-tabs__body",a.animated?"is-animated":""]),style:i(y(la))},{default:o((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),w(s,{class:"wd-tabs__mask",style:i(`${B.value?"":"display:none;"} ${Q.value?"opacity:1;":""}`),onClick:na},null,8,["style"])])),_:3},8,["class","style"])])),_:3})):(t(),n(s,{key:1,class:u(`wd-tabs  ${a.customClass} ${a.slidableNum<y(sa).length?"is-slide":""} ${a.mapNum<y(sa).length&&0!==a.mapNum?"is-map":""}`)},{default:o((()=>[w(s,{class:"wd-tabs__nav"},{default:o((()=>[w(s,{class:"wd-tabs__nav--wrap"},{default:o((()=>[w(l,{"scroll-x":a.slidableNum<y(sa).length,"scroll-with-animation":"","scroll-left":K.value},{default:o((()=>[w(s,{class:"wd-tabs__nav-container"},{default:o((()=>[(t(!0),h(x,null,k(y(sa),((e,l)=>(t(),n(s,{onClick:a=>da(l),key:l,class:u(`wd-tabs__nav-item ${H.activeIndex===l?"is-active":""} ${e.disabled?"is-disabled":""}`),style:i(H.activeIndex===l?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:o((()=>[$(I(e.title),1)])),_:2},1032,["onClick","class","style"])))),128)),w(s,{class:"wd-tabs__line",style:i(F.value)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<y(sa).length&&0!==a.mapNum?(t(),n(s,{key:0,class:"wd-tabs__map"},{default:o((()=>[w(s,{class:"wd-tabs__map-btn",onClick:na},{default:o((()=>[w(s,{class:u("wd-tabs__map-arrow "+(Q.value?"is-open":""))},{default:o((()=>[w(m,{name:"arrow-down"})])),_:1},8,["class"])])),_:1}),w(s,{class:"wd-tabs__map-header",style:i(`${B.value?"":"display:none;"}  ${Q.value?"opacity:1;":""}`)},{default:o((()=>[$(I(y(S)("all")),1)])),_:1},8,["style"]),w(s,{class:u("wd-tabs__map-body "+(Q.value?"is-open":"")),style:i(B.value?"":"display:none")},{default:o((()=>[(t(!0),h(x,null,k(y(sa),((a,e)=>(t(),n(s,{class:"wd-tabs__map-nav-item",key:e,onClick:a=>da(e)},{default:o((()=>[w(s,{class:u(`wd-tabs__map-nav-btn ${H.activeIndex===e?"is-active":""}  ${a.disabled?"is-disabled":""}`)},{default:o((()=>[$(I(a.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):c("",!0)])),_:1}),w(s,{class:"wd-tabs__container",onTouchstart:ca,onTouchmove:ua,onTouchend:ra,onTouchcancel:ra},{default:o((()=>[w(s,{class:u(["wd-tabs__body",a.animated?"is-animated":""]),style:i(y(la))},{default:o((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),w(s,{class:"wd-tabs__mask",style:i(`${B.value?"":"display:none;"}  ${Q.value?"opacity:1":""}`),onClick:na},null,8,["style"])])),_:3},8,["class"]))}}}),[["__scopeId","data-v-a82f0f2e"]]);export{K as _,Q as a};
